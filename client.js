!function(){let e=!1;window.title="",window.gtag=function(){},window._WebSocket=WebSocket,WebSocket=new Proxy(WebSocket,{construct:function(e,t,n){let a=Reflect.construct(e,t,n);return a.addEventListener=function(){},a}}),document.getElementById("disconnect-modal").style.visibility="hidden",document.getElementById("top-buttons").style.visibility="hidden",document.getElementById("account-text").style.visibility="hidden",document.getElementById("right-buttons").style.visibility="hidden",localStorage.settings=JSON.stringify(function(e,t){try{t=JSON.parse(e)}catch(e){}return delete t.showOtherPlayers,delete t.noRadiant,delete t.findAbuser,t}(localStorage.settings,{})),window.findAbuser=function(){};var t={742:(e,t)=>{"use strict";t.b64ToUint8Array=function(e){var t,n,r,o=function(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}(e),i=o[0],s=o[1],l=new Uint8Array(3*(i+(r=s))/4-r),d=0,c=s>0?i-4:i;for(n=0;n<c;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],l[d++]=t>>16&255,l[d++]=t>>8&255,l[d++]=255&t;return 2===s&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,l[d++]=255&t),1===s&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,l[d++]=t>>8&255,l[d++]=255&t),l},t.uint8ArrayToB64=function(e){for(var t,a=e.length,r=a%3,o=[],s=16383,l=0,d=a-r;l<d;l+=s)o.push(i(e,l,l+s>d?d:l+s));return 1===r?(t=e[a-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[a-2]<<8)+e[a-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],a=[],r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=r[o],a[r.charCodeAt(o)]=o;function i(e,t,a){for(var r,o,i=[],s=t;s<a;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return i.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,a=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),s=new E(a||[]);return r(i,"_invoke",{value:T(e,n,s)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",h="executing",m="completed",p={};function g(){}function y(){}function v(){}var b={};d(b,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(L([])));x&&x!==n&&a.call(x,i)&&(b=x);var k=v.prototype=g.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(r,o,i,s){var l=u(e[r],e,o);if("throw"!==l.type){var d=l.arg,c=d.value;return c&&"object"==typeof c&&a.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(c).then((function(e){d.value=e,i(d)}),(function(e){return n("throw",e,i,s)}))}s(l.arg)}var o;r(this,"_invoke",{value:function(e,a){function r(){return new t((function(t,r){n(e,a,t,r)}))}return o=o?o.then(r,r):r()}})}function T(e,t,n){var a=f;return function(r,o){if(a===h)throw new Error("Generator is already running");if(a===m){if("throw"===r)throw o;return I()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var s=_(i,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var l=u(e,t,n);if("normal"===l.type){if(a=n.done?m:"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=m,n.method="throw",n.arg=l.arg)}}}function _(e,n){var a=n.method,r=e.iterator[a];if(r===t)return n.delegate=null,"throw"===a&&e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),p;var o=u(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(z,this),this.reset(!0)}function L(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:I}}function I(){return{value:t,done:!0}}return y.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:y,configurable:!0}),y.displayName=d(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,d(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},S(M.prototype),d(M.prototype,s,(function(){return this})),e.AsyncIterator=M,e.async=function(t,n,a,r,o=Promise){var i=new M(c(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(k),d(k,l,"Generator"),d(k,i,(function(){return this})),d(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=L,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(a,r){return s.type="throw",s.arg=e,n.next=a,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),d=a.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:L(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},774:function(e,t){!function(e){"use strict";function t(e,t,n,a){var r,o=!1,i=0;function s(){r&&clearTimeout(r)}function l(){for(var l=arguments.length,d=new Array(l),c=0;c<l;c++)d[c]=arguments[c];var u=this,f=Date.now()-i;function h(){i=Date.now(),n.apply(u,d)}o||(a&&!r&&h(),s(),void 0===a&&f>e?h():!0!==t&&(r=setTimeout(a?function(){r=void 0}:h,void 0===a?e-f:e)))}return"boolean"!=typeof t&&(a=n,n=t,t=void 0),l.cancel=function(){s(),o=!0},l}e.debounce=function(e,n,a){return void 0===a?t(e,n,!1):t(e,a,!1!==n)},e.throttle=t,Object.defineProperty(e,"__esModule",{value:!0})}(t)},93:(t,a,r)=>{"use strict";var o,i,s;r.d(a,{sp:()=>yw,kZ:()=>Ab,YI:()=>Ob,AG:()=>Mb,jA:()=>ix,VQ:()=>px,r:()=>rx,Pe:()=>Lb,j3:()=>Eb,vE:()=>qw,cF:()=>mx,xf:()=>Xw,vX:()=>Rb,tq:()=>zb,cy:()=>hw,wh:()=>Mw,x8:()=>Pw,_H:()=>Nw,$B:()=>Dw,N1:()=>Rw,br:()=>Iw,$v:()=>dx,ae:()=>Ow,_t:()=>Aw,$b:()=>Hb,pR:()=>Bw,lm:()=>sx,FN:()=>gx,P$:()=>Db,cs:()=>Pb,mv:()=>Bb,cb:()=>Cb,b5:()=>fx,Dk:()=>ox,Rp:()=>$w,gp:()=>lx,PK:()=>Tw,PF:()=>Yb,TF:()=>Yw,Hc:()=>Nb,po:()=>hx,aj:()=>Lw,Oq:()=>ax,D5:()=>ux,H8:()=>Gw});try{o=new TextDecoder}catch(e){}var l=0;const d=[];var c,u,f,h,m,p=d,g=0,y={},v=0,b=0,w=[],x={useRecords:!1,mapsAsObjects:!0};class k{}const S=new k;var M;S.name="MessagePack 0xC1";var T=!1,_=2;try{new Function("")}catch(e){_=1/0}class z{constructor(e){e&&(!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.sequential&&!1!==e.trusted&&(e.trusted=!0,e.structures||0==e.useRecords||(e.structures=[],e.maxSharedStructures||=0)),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType="number")),Object.assign(this,e)}unpack(e,t){if(i)return Q((()=>(ee(),this?this.unpack(e,t):z.prototype.unpack.call(x,e,t))));"object"==typeof t?(s=t.end||e.length,l=t.start||0):(l=0,s=t>-1?t:e.length),g=0,b=0,u=null,p=d,f=null,i=e;try{m=e.dataView||=new DataView(e.buffer,e.byteOffset,e.byteLength)}catch(t){if(i=null,e instanceof Uint8Array)throw t;throw new Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}if(this instanceof z){if(y=this,this.structures)return c=this.structures,C(t);(!c||c.length>0)&&(c=[])}else y=x,(!c||c.length>0)&&(c=[]);return C(t)}unpackMultiple(e,t){let n,a=0;try{T=!0;let r=e.length,o=this?this.unpack(e,r):ne.unpack(e,r);if(!t){for(n=[o];l<r;)a=l,n.push(C());return n}for(t(o);l<r;)if(a=l,!1===t(C()))return}catch(e){throw e.lastPosition=a,e.values=n,e}finally{T=!1,ee()}}_mergeStructures(e,t){e=e||[],Object.isFrozen(e)&&(e=e.map((e=>e.slice(0))));for(let t=0,n=e.length;t<n;t++){let n=e[t];n&&(n.isShared=!0,t>=32&&(n.highByte=t-32>>5))}e.sharedLength=e.length;for(let n in t||[])if(n>=0){let a=e[n],r=t[n];r&&(a&&((e.restoreStructures||=[])[n]=a),e[n]=r)}return this.structures=e}decode(e,t){return this.unpack(e,t)}}function C(e){try{if(!y.trusted&&!T){let e=c.sharedLength||0;e<c.length&&(c.length=e)}let e;if(y.randomAccessStructure&&i[l]<64&&i[l],e=L(),f&&(l=f.postBundlePosition,f=null),l==s)c&&c.restoreStructures&&E(),c=null,i=null,h&&=null;else{if(l>s)throw new Error("Unexpected end of MessagePack data");if(!T)throw new Error("Data read, but end of buffer not reached "+JSON.stringify(e).slice(0,100))}return e}catch(e){throw c&&c.restoreStructures&&E(),ee(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||l>s)&&(e.incomplete=!0),e}}function E(){for(let e in c.restoreStructures)c[e]=c.restoreStructures[e];c.restoreStructures=null}function L(){let e=i[l++];if(e<160){if(e<128){if(e<64)return e;{let t=c[63&e]||y.getStructures&&B()[63&e];return t?(t.read||=A(t,63&e),t.read()):e}}if(e<144){if(e-=128,y.mapsAsObjects){let t={};for(let n=0;n<e;n++){let e=Z();"__proto__"===e&&(e="__proto_"),t[e]=L()}return t}{let t=new Map;for(let n=0;n<e;n++)t.set(L(),L());return t}}{e-=144;let t=new Array(e);for(let n=0;n<e;n++)t[n]=L();return y.freezeData?Object.freeze(t):t}}if(e<192){let t=e-160;if(b>=l)return u.slice(l-v,(l+=t)-v);if(0==b&&s<140){let e=t<16?Y(t):H(t);if(null!=e)return e}return D(t)}{let t;switch(e){case 192:return null;case 193:return f?(t=L(),t>0?f[1].slice(f.position1,f.position1+=t):f[0].slice(f.position0,f.position0-=t)):S;case 194:return!1;case 195:return!0;case 196:if(t=i[l++],void 0===t)throw new Error("Unexpected end of buffer");return G(t);case 197:return t=m.getUint16(l),l+=2,G(t);case 198:return t=m.getUint32(l),l+=4,G(t);case 199:return X(i[l++]);case 200:return t=m.getUint16(l),l+=2,X(t);case 201:return t=m.getUint32(l),l+=4,X(t);case 202:if(t=m.getFloat32(l),y.useFloat32>2){let e=te[(127&i[l])<<1|i[l+1]>>7];return l+=4,(e*t+(t>0?.5:-.5)>>0)/e}return l+=4,t;case 203:return t=m.getFloat64(l),l+=8,t;case 204:return i[l++];case 205:return t=m.getUint16(l),l+=2,t;case 206:return t=m.getUint32(l),l+=4,t;case 207:return"number"===y.int64AsType?(t=4294967296*m.getUint32(l),t+=m.getUint32(l+4)):t="string"===y.int64AsType?m.getBigUint64(l).toString():m.getBigUint64(l),l+=8,t;case 208:return m.getInt8(l++);case 209:return t=m.getInt16(l),l+=2,t;case 210:return t=m.getInt32(l),l+=4,t;case 211:return"number"===y.int64AsType?(t=4294967296*m.getInt32(l),t+=m.getUint32(l+4)):t="string"===y.int64AsType?m.getBigInt64(l).toString():m.getBigInt64(l),l+=8,t;case 212:if(t=i[l++],114==t)return V(63&i[l++]);{let e=w[t];if(e)return e.read?(l++,e.read(L())):e.noBuffer?(l++,e()):e(i.subarray(l,++l));throw new Error("Unknown extension "+t)}case 213:return t=i[l],114==t?(l++,V(63&i[l++],i[l++])):X(2);case 214:return X(4);case 215:return X(8);case 216:return X(16);case 217:return t=i[l++],b>=l?u.slice(l-v,(l+=t)-v):P(t);case 218:return t=m.getUint16(l),b>=(l+=2)?u.slice(l-v,(l+=t)-v):R(t);case 219:return t=m.getUint32(l),b>=(l+=4)?u.slice(l-v,(l+=t)-v):N(t);case 220:return t=m.getUint16(l),l+=2,F(t);case 221:return t=m.getUint32(l),l+=4,F(t);case 222:return t=m.getUint16(l),l+=2,U(t);case 223:return t=m.getUint32(l),l+=4,U(t);default:if(e>=224)return e-256;if(void 0===e){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}throw new Error("Unknown MessagePack token "+e)}}}const I=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function A(e,t){function n(){if(n.count++>_){let n=e.read=new Function("r","return function(){return "+(y.freezeData?"Object.freeze":"")+"({"+e.map((e=>"__proto__"===e?"__proto_:r()":I.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()")).join(",")+"})}")(L);return 0===e.highByte&&(e.read=O(t,e.read)),n()}let a={};for(let t=0,n=e.length;t<n;t++){let n=e[t];"__proto__"===n&&(n="__proto_"),a[n]=L()}return y.freezeData?Object.freeze(a):a}return n.count=0,0===e.highByte?O(t,n):n}const O=(e,t)=>function(){let n=i[l++];if(0===n)return t();let a=e<32?-(e+(n<<5)):e+(n<<5),r=c[a]||B()[a];if(!r)throw new Error("Record id is not defined for "+a);return r.read||=A(r,e),r.read()};function B(){let e=Q((()=>(i=null,y.getStructures())));return c=y._mergeStructures(e,c)}var D=j,P=j,R=j,N=j;function j(e){let t;if(e<16&&(t=Y(e)))return t;if(e>64&&o)return o.decode(i.subarray(l,l+=e));const n=l+e,a=[];for(t="";l<n;){const e=i[l++];if(0==(128&e))a.push(e);else if(192==(224&e)){const t=63&i[l++];a.push((31&e)<<6|t)}else if(224==(240&e)){const t=63&i[l++],n=63&i[l++];a.push((31&e)<<12|t<<6|n)}else if(240==(248&e)){let t=(7&e)<<18|(63&i[l++])<<12|(63&i[l++])<<6|63&i[l++];t>65535&&(t-=65536,a.push(t>>>10&1023|55296),t=1023&t|56320),a.push(t)}else a.push(e);a.length>=4096&&(t+=W.apply(String,a),a.length=0)}return a.length>0&&(t+=W.apply(String,a)),t}function F(e){let t=new Array(e);for(let n=0;n<e;n++)t[n]=L();return y.freezeData?Object.freeze(t):t}function U(e){if(y.mapsAsObjects){let t={};for(let n=0;n<e;n++){let e=Z();"__proto__"===e&&(e="__proto_"),t[e]=L()}return t}{let t=new Map;for(let n=0;n<e;n++)t.set(L(),L());return t}}var W=String.fromCharCode;function H(e){let t=l,n=new Array(e);for(let a=0;a<e;a++){const e=i[l++];if((128&e)>0)return void(l=t);n[a]=e}return W.apply(String,n)}function Y(e){if(e<4){if(e<2){if(0===e)return"";{let e=i[l++];return(128&e)>1?void(l-=1):W(e)}}{let t=i[l++],n=i[l++];if((128&t)>0||(128&n)>0)return void(l-=2);if(e<3)return W(t,n);let a=i[l++];return(128&a)>0?void(l-=3):W(t,n,a)}}{let t=i[l++],n=i[l++],a=i[l++],r=i[l++];if((128&t)>0||(128&n)>0||(128&a)>0||(128&r)>0)return void(l-=4);if(e<6){if(4===e)return W(t,n,a,r);{let e=i[l++];return(128&e)>0?void(l-=5):W(t,n,a,r,e)}}if(e<8){let o=i[l++],s=i[l++];if((128&o)>0||(128&s)>0)return void(l-=6);if(e<7)return W(t,n,a,r,o,s);let d=i[l++];return(128&d)>0?void(l-=7):W(t,n,a,r,o,s,d)}{let o=i[l++],s=i[l++],d=i[l++],c=i[l++];if((128&o)>0||(128&s)>0||(128&d)>0||(128&c)>0)return void(l-=8);if(e<10){if(8===e)return W(t,n,a,r,o,s,d,c);{let e=i[l++];return(128&e)>0?void(l-=9):W(t,n,a,r,o,s,d,c,e)}}if(e<12){let u=i[l++],f=i[l++];if((128&u)>0||(128&f)>0)return void(l-=10);if(e<11)return W(t,n,a,r,o,s,d,c,u,f);let h=i[l++];return(128&h)>0?void(l-=11):W(t,n,a,r,o,s,d,c,u,f,h)}{let u=i[l++],f=i[l++],h=i[l++],m=i[l++];if((128&u)>0||(128&f)>0||(128&h)>0||(128&m)>0)return void(l-=12);if(e<14){if(12===e)return W(t,n,a,r,o,s,d,c,u,f,h,m);{let e=i[l++];return(128&e)>0?void(l-=13):W(t,n,a,r,o,s,d,c,u,f,h,m,e)}}{let p=i[l++],g=i[l++];if((128&p)>0||(128&g)>0)return void(l-=14);if(e<15)return W(t,n,a,r,o,s,d,c,u,f,h,m,p,g);let y=i[l++];return(128&y)>0?void(l-=15):W(t,n,a,r,o,s,d,c,u,f,h,m,p,g,y)}}}}}function $(){let e,t=i[l++];if(t<192)e=t-160;else switch(t){case 217:e=i[l++];break;case 218:e=m.getUint16(l),l+=2;break;case 219:e=m.getUint32(l),l+=4;break;default:throw new Error("Expected string")}return j(e)}function G(e){return y.copyBuffers?Uint8Array.prototype.slice.call(i,l,l+=e):i.subarray(l,l+=e)}function X(e){let t=i[l++];if(w[t]){let n;return w[t](i.subarray(l,n=l+=e),(e=>{l=e;try{return L()}finally{l=n}}))}throw new Error("Unknown extension type "+t)}var q=new Array(4096);function Z(){let e,t=i[l++];if(!(t>=160&&t<192))return l--,L().toString();if(t-=160,b>=l)return u.slice(l-v,(l+=t)-v);if(0!=b||!(s<180))return D(t);let n=4095&(t<<5^(t>1?m.getUint16(l):t>0?i[l]:0)),a=q[n],r=l,o=l+t-3,d=0;if(a&&a.bytes==t){for(;r<o;){if(e=m.getUint32(r),e!=a[d++]){r=1879048192;break}r+=4}for(o+=3;r<o;)if(e=i[r++],e!=a[d++]){r=1879048192;break}if(r===o)return l=r,a.string;o-=3,r=l}for(a=[],q[n]=a,a.bytes=t;r<o;)e=m.getUint32(r),a.push(e),r+=4;for(o+=3;r<o;)e=i[r++],a.push(e);let c=t<16?Y(t):H(t);return a.string=c??D(t)}const V=(e,t)=>{let n=L().map((e=>e.toString())),a=e;void 0!==t&&(e=e<32?-((t<<5)+e):(t<<5)+e,n.highByte=t);let r=c[e];return r&&r.isShared&&((c.restoreStructures||=[])[e]=r),c[e]=n,n.read=A(n,a),n.read()};w[0]=()=>{},w[0].noBuffer=!0,w[101]=()=>{let e=L();return(globalThis[e[0]]||Error)(e[1])},w[105]=e=>{let t,n=m.getUint32(l-4);h||=new Map;let a=i[l];t=a>=144&&a<160||220==a||221==a?[]:{};let r={target:t};h.set(n,r);let o=L();return r.used?Object.assign(t,o):(r.target=o,o)},w[112]=e=>{let t=m.getUint32(l-4),n=h.get(t);return n.used=!0,n.target},w[115]=()=>new Set(L());const J=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map((e=>e+"Array"));w[116]=e=>{let t=e[0],n=J[t];if(!n)throw new Error("Could not find typed array for code "+t);return new globalThis[n](Uint8Array.prototype.slice.call(e,1).buffer)},w[120]=()=>{let e=L();return new RegExp(e[0],e[1])};const K=[];function Q(e){M&&M();let t=s,n=l,a=g,r=v,o=b,d=u,w=p,x=h,k=f,S=new Uint8Array(i.slice(0,s)),_=c,z=c.slice(0,c.length),C=y,E=T,L=e();return s=t,l=n,g=a,v=r,b=o,u=d,p=w,h=x,f=k,i=S,T=E,(c=_).splice(0,c.length,...z),y=C,m=new DataView(i.buffer,i.byteOffset,i.byteLength),L}function ee(){i=null,h=null,c=null}w[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],n=l;return l+=t-e.length,f=K,(f=[$(),$()]).position0=0,f.position1=0,f.postBundlePosition=l,l=n,L()},w[255]=e=>4==e.length?new Date(1e3*(16777216*e[0]+(e[1]<<16)+(e[2]<<8)+e[3])):8==e.length?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+1e3*(4294967296*(3&e[3])+16777216*e[4]+(e[5]<<16)+(e[6]<<8)+e[7])):12==e.length?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+1e3*((128&e[4]?-281474976710656:0)+1099511627776*e[6]+4294967296*e[7]+16777216*e[8]+(e[9]<<16)+(e[10]<<8)+e[11])):new Date("invalid");const te=new Array(147);for(let e=0;e<256;e++)te[e]=+("1e"+Math.floor(45.15-.30103*e));var ne=new z({useRecords:!1});let ae,re,oe;ne.unpack,ne.unpackMultiple,ne.unpack;let ie=new Float32Array(1);new Uint8Array(ie.buffer,0,4);try{ae=new TextEncoder}catch(e){}const se="undefined"!=typeof Buffer,le=se?function(e){return Buffer.allocUnsafeSlow(e)}:Uint8Array,de=se?Buffer:Uint8Array,ce=se?4294967296:2144337920;let ue,fe,he,me,pe=0,ge=null;const ye=/[\u0080-\uFFFF]/,ve=Symbol("record-id");class be extends z{constructor(e){let t,n,a,r;super(e),this.offset=0;let o=de.prototype.utf8Write?function(e,t){return ue.utf8Write(e,t,4294967295)}:!!ae&&!!ae.encodeInto&&function(e,t){return ae.encodeInto(e,ue.subarray(t)).written},i=this;e||={};let s=e&&e.sequential,l=e.structures||e.saveStructures,d=e.maxSharedStructures;if(null==d&&(d=l?32:0),d>8160)throw new Error("Maximum maxSharedStructure is 8160");e.structuredClone&&null==e.moreTypes&&(e.moreTypes=!0);let c=e.maxOwnStructures;null==c&&(c=l?32:64),this.structures||0==e.useRecords||(this.structures=[]);let u=d>32||c+d>64,f=d+64,h=d+c+64;if(h>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let m=[],p=0,g=0;this.pack=this.encode=function(e,o){if(ue||(ue=new le(8192),he=ue.dataView||=new DataView(ue.buffer,0,8192),pe=0),me=ue.length-10,me-pe<2048?(ue=new le(ue.length),he=ue.dataView||=new DataView(ue.buffer,0,ue.length),me=ue.length-10,pe=0):pe=pe+7&2147483640,t=pe,r=i.structuredClone?new Map:null,i.bundleStrings&&"string"!=typeof e?(ge=[],ge.size=1/0):ge=null,a=i.structures,a){a.uninitialized&&(a=i._mergeStructures(i.getStructures()));let e=a.sharedLength||0;if(e>d)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+a.sharedLength);if(!a.transitions){a.transitions=Object.create(null);for(let t=0;t<e;t++){let e,n=a[t];if(!n)continue;let r=a.transitions;for(let t=0,a=n.length;t<a;t++){let a=n[t];e=r[a],e||=r[a]=Object.create(null),r=e}r[ve]=t+64}this.lastNamedStructuresLength=e}s||(a.nextId=e+64)}n&&=!1;try{i.randomAccessStructure&&e.constructor&&e.constructor===Object?S(e):v(e);let n=ge;if(ge&&Se(t,v,0),r&&r.idsToInsert){let e=r.idsToInsert.sort(((e,t)=>e.offset>t.offset?1:-1)),a=e.length,o=-1;for(;n&&a>0;){let r=e[--a].offset+t;r<n.stringsPosition+t&&-1===o&&(o=0),r>n.position+t?o>=0&&(o+=6):(o>=0&&(he.setUint32(n.position+t,he.getUint32(n.position+t)+o),o=-1),n=n.previous,a++)}o>=0&&n&&he.setUint32(n.position+t,he.getUint32(n.position+t)+o),pe+=6*e.length,pe>me&&w(pe),i.offset=pe;let s=function(e,t){let n,a=6*t.length,r=e.length-a;for(;n=t.pop();){let t=n.offset,o=n.id;e.copyWithin(t+a,t,r),a-=6;let i=t+a;e[i++]=214,e[i++]=105,e[i++]=o>>24,e[i++]=o>>16&255,e[i++]=o>>8&255,e[i++]=255&o,r=t}return e}(ue.subarray(t,pe),e);return r=null,s}return i.offset=pe,o&Ie?(ue.start=t,ue.end=pe,ue):ue.subarray(t,pe)}finally{if(a){g<10&&g++;let r=a.sharedLength||0;if(a.length>r&&(a.length=r),p>1e4)a.transitions=null,g=0,p=0,m.length>0&&(m=[]);else if(m.length>0&&!s){for(let e=0,t=m.length;e<t;e++)m[e][ve]=0;m=[]}if(n&&i.saveStructures){let n=ue.subarray(t,pe),o=function(e,t){return e.isCompatible=e=>{let n=!e||(t.lastNamedStructuresLength||0)===e.length;return n||t._mergeStructures(e),n},e}(a,i);return!1===i.saveStructures(o,o.isCompatible)?i.pack(e):(i.lastNamedStructuresLength=r,n)}}o&Ae&&(pe=t)}};const y=e=>{var t=e.length;t<16?ue[pe++]=144|t:t<65536?(ue[pe++]=220,ue[pe++]=t>>8,ue[pe++]=255&t):(ue[pe++]=221,he.setUint32(pe,t),pe+=4);for(let n=0;n<t;n++)v(e[n])},v=e=>{var n;pe>me&&(ue=w(pe));var a=typeof e;if("string"===a){let a,r=e.length;if(ge&&r>=4&&r<4096){if((ge.size+=r)>61440){let e,n,a=(ge[0]?3*ge[0].length+ge[1].length:0)+10;pe+a>me&&(ue=w(pe+a)),ge.position?(n=ge,ue[pe]=200,pe+=3,ue[pe++]=98,e=pe-t,pe+=4,Se(t,v,0),he.setUint16(e+t-3,pe-t-e)):(ue[pe++]=214,ue[pe++]=98,e=pe-t,pe+=4),ge=["",""],ge.previous=n,ge.size=0,ge.position=e}let n=ye.test(e);return ge[n?0:1]+=e,ue[pe++]=193,void v(n?-r:r)}a=r<32?1:r<256?2:r<65536?3:5;let i=3*r;if(pe+i>me&&(ue=w(pe+i)),r<64||!o){let t,o,i,s=pe+a;for(t=0;t<r;t++)o=e.charCodeAt(t),o<128?ue[s++]=o:o<2048?(ue[s++]=o>>6|192,ue[s++]=63&o|128):55296==(64512&o)&&56320==(64512&(i=e.charCodeAt(t+1)))?(o=65536+((1023&o)<<10)+(1023&i),t++,ue[s++]=o>>18|240,ue[s++]=o>>12&63|128,ue[s++]=o>>6&63|128,ue[s++]=63&o|128):(ue[s++]=o>>12|224,ue[s++]=o>>6&63|128,ue[s++]=63&o|128);n=s-pe-a}else n=o(e,pe+a);n<32?ue[pe++]=160|n:n<256?(a<2&&ue.copyWithin(pe+2,pe+1,pe+1+n),ue[pe++]=217,ue[pe++]=n):n<65536?(a<3&&ue.copyWithin(pe+3,pe+2,pe+2+n),ue[pe++]=218,ue[pe++]=n>>8,ue[pe++]=255&n):(a<5&&ue.copyWithin(pe+5,pe+3,pe+3+n),ue[pe++]=219,he.setUint32(pe,n),pe+=4),pe+=n}else if("number"===a)if(e>>>0===e)e<32||e<128&&!1===this.useRecords||e<64&&!this.randomAccessStructure?ue[pe++]=e:e<256?(ue[pe++]=204,ue[pe++]=e):e<65536?(ue[pe++]=205,ue[pe++]=e>>8,ue[pe++]=255&e):(ue[pe++]=206,he.setUint32(pe,e),pe+=4);else if(e>>0===e)e>=-32?ue[pe++]=256+e:e>=-128?(ue[pe++]=208,ue[pe++]=e+256):e>=-32768?(ue[pe++]=209,he.setInt16(pe,e),pe+=2):(ue[pe++]=210,he.setInt32(pe,e),pe+=4);else{let t;if((t=this.useFloat32)>0&&e<4294967296&&e>=-2147483648){let n;if(ue[pe++]=202,he.setFloat32(pe,e),t<4||(n=e*te[(127&ue[pe])<<1|ue[pe+1]>>7])>>0===n)return void(pe+=4);pe--}ue[pe++]=203,he.setFloat64(pe,e),pe+=8}else if("object"===a)if(e){if(r){let n=r.get(e);if(n){if(!n.id){let e=r.idsToInsert||=[];n.id=e.push(n)}return ue[pe++]=214,ue[pe++]=112,he.setUint32(pe,n.id),void(pe+=4)}r.set(e,{offset:pe-t})}let a=e.constructor;if(a===Object)b(e,!0);else if(a===Array)y(e);else if(a===Map){(n=e.size)<16?ue[pe++]=128|n:n<65536?(ue[pe++]=222,ue[pe++]=n>>8,ue[pe++]=255&n):(ue[pe++]=223,he.setUint32(pe,n),pe+=4);for(let[t,n]of e)v(t),v(n)}else{for(let t=0,n=re.length;t<n;t++)if(e instanceof oe[t]){let n,a=re[t];if(a.write){a.type&&(ue[pe++]=212,ue[pe++]=a.type,ue[pe++]=0);let t=a.write.call(this,e);return void(t===e?Array.isArray(e)?y(e):b(e):v(t))}let r=ue,o=he,i=pe;ue=null;try{n=a.pack.call(this,e,(e=>(ue=r,r=null,pe+=e,pe>me&&w(pe),{target:ue,targetView:he,position:pe-e})),v)}finally{r&&(ue=r,he=o,pe=i,me=ue.length-10)}return void(n&&(n.length+pe>me&&w(n.length+pe),pe=ke(n,ue,pe,a.type)))}Array.isArray(e)?y(e):b(e,!e.hasOwnProperty)}}else ue[pe++]=192;else if("boolean"===a)ue[pe++]=e?195:194;else if("bigint"===a){if(e<BigInt(1)<<BigInt(63)&&e>=-(BigInt(1)<<BigInt(63)))ue[pe++]=211,he.setBigInt64(pe,e);else if(e<BigInt(1)<<BigInt(64)&&e>0)ue[pe++]=207,he.setBigUint64(pe,e);else{if(!this.largeBigIntToFloat)throw new RangeError(e+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");ue[pe++]=203,he.setFloat64(pe,Number(e))}pe+=8}else if("undefined"===a)this.encodeUndefinedAsNil?ue[pe++]=192:(ue[pe++]=212,ue[pe++]=0,ue[pe++]=0);else{if("function"!==a)throw new Error("Unknown type: "+a);v(this.writeFunction&&this.writeFunction())}},b=!1===this.useRecords?this.variableMapSize?e=>{let t,n=Object.keys(e),a=n.length;a<16?ue[pe++]=128|a:a<65536?(ue[pe++]=222,ue[pe++]=a>>8,ue[pe++]=255&a):(ue[pe++]=223,he.setUint32(pe,a),pe+=4);for(let r=0;r<a;r++)v(t=n[r]),v(e[t])}:(e,n)=>{ue[pe++]=222;let a=pe-t;pe+=2;let r=0;for(let t in e)(n||e.hasOwnProperty(t))&&(v(t),v(e[t]),r++);ue[a+++t]=r>>8,ue[a+t]=255&r}:e.progressiveRecords&&!u?(e,n)=>{let r,o,i=a.transitions||=Object.create(null),s=pe++-t;for(let l in e)if(n||e.hasOwnProperty(l)){if(r=i[l],r)i=r;else{let n=Object.keys(e),d=i;i=a.transitions;let c=0;for(let e=0,t=n.length;e<t;e++){let t=n[e];r=i[t],r||(r=i[t]=Object.create(null),c++),i=r}s+t+1==pe?(pe--,x(i,n,c)):k(i,n,s,c),o=!0,i=d[l]}v(e[l])}if(!o){let n=i[ve];n?ue[s+t]=n:k(i,Object.keys(e),s,0)}}:(e,t)=>{let n,r=a.transitions||=Object.create(null),o=0;for(let a in e)(t||e.hasOwnProperty(a))&&(n=r[a],n||(n=r[a]=Object.create(null),o++),r=n);let i=r[ve];i?i>=96&&u?(ue[pe++]=96+(31&(i-=96)),ue[pe++]=i>>5):ue[pe++]=i:x(r,r.__keys__||Object.keys(e),o);for(let n in e)(t||e.hasOwnProperty(n))&&v(e[n])},w=e=>{let n;if(e>16777216){if(e-t>ce)throw new Error("Packed buffer would be larger than maximum buffer size");n=Math.min(ce,4096*Math.round(Math.max((e-t)*(e>67108864?1.25:2),4194304)/4096))}else n=1+(Math.max(e-t<<2,ue.length-1)>>12)<<12;let a=new le(n);return he=a.dataView||=new DataView(a.buffer,0,n),e=Math.min(e,ue.length),ue.copy?ue.copy(a,0,t,e):a.set(ue.slice(t,e)),pe-=t,t=0,me=a.length-10,ue=a},x=(e,t,r)=>{let o=a.nextId;o||=64,o<f&&this.shouldShareStructure&&!this.shouldShareStructure(t)?(o=a.nextOwnId,o<h||(o=f),a.nextOwnId=o+1):(o>=h&&(o=f),a.nextId=o+1);let i=t.highByte=o>=96&&u?o-96>>5:-1;e[ve]=o,e.__keys__=t,a[o-64]=t,o<f?(t.isShared=!0,a.sharedLength=o-63,n=!0,i>=0?(ue[pe++]=96+(31&o),ue[pe++]=i):ue[pe++]=o):(i>=0?(ue[pe++]=213,ue[pe++]=114,ue[pe++]=96+(31&o),ue[pe++]=i):(ue[pe++]=212,ue[pe++]=114,ue[pe++]=o),r&&(p+=g*r),m.length>=c&&(m.shift()[ve]=0),m.push(e),v(t))},k=(e,n,a,r)=>{let o=ue,i=pe,s=me,l=t;ue=fe,pe=0,t=0,ue||(fe=ue=new le(8192)),me=ue.length-10,x(e,n,r),fe=ue;let d=pe;if(ue=o,pe=i,me=s,t=l,d>1){let e=pe+d-1;e>me&&w(e);let n=a+t;ue.copyWithin(n+d,n+1,pe),ue.set(fe.slice(0,d),n),pe=e}else ue[a+t]=fe[0]},S=(e,r)=>{let o=(void 0)(e,ue,pe,a,w,((e,a,r)=>{if(r)return n=!0;if(pe=a,t>0){if(v(e),0==t)return{position:pe,targetView:he,target:ue}}else v(e);return pe}),this);if(0===o)return b(e,!0);pe=o}}useBuffer(e){ue=e,he=new DataView(ue.buffer,ue.byteOffset,ue.byteLength),pe=0}clearSharedData(){this.structures&&=[],this.typedStructs&&=[]}}function we(e,t,n,a){let r=e.byteLength;if(r+1<256){var{target:o,position:i}=n(4+r);o[i++]=199,o[i++]=r+1}else if(r+1<65536){var{target:o,position:i}=n(5+r);o[i++]=200,o[i++]=r+1>>8,o[i++]=r+1&255}else{var{target:o,position:i,targetView:s}=n(7+r);o[i++]=201,s.setUint32(i,r+1),i+=4}o[i++]=116,o[i++]=t,o.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),i)}function xe(e,t){let n=e.byteLength;var a,r;if(n<256){var{target:a,position:r}=t(n+2);a[r++]=196,a[r++]=n}else if(n<65536){var{target:a,position:r}=t(n+3);a[r++]=197,a[r++]=n>>8,a[r++]=255&n}else{var{target:a,position:r,targetView:o}=t(n+5);a[r++]=198,o.setUint32(r,n),r+=4}a.set(e,r)}function ke(e,t,n,a){let r=e.length;switch(r){case 1:t[n++]=212;break;case 2:t[n++]=213;break;case 4:t[n++]=214;break;case 8:t[n++]=215;break;case 16:t[n++]=216;break;default:r<256?(t[n++]=199,t[n++]=r):r<65536?(t[n++]=200,t[n++]=r>>8,t[n++]=255&r):(t[n++]=201,t[n++]=r>>24,t[n++]=r>>16&255,t[n++]=r>>8&255,t[n++]=255&r)}return t[n++]=a,t.set(e,n),n+r}function Se(e,t,n){if(ge.length>0){he.setUint32(ge.position+e,pe+n-ge.position-e),ge.stringsPosition=pe-e;let a=ge;ge=null,t(a[0]),t(a[1])}}var Me,Te;oe=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,k],re=[{pack(e,t,n){let a=e.getTime()/1e3;if((this.useTimestamp32||0===e.getMilliseconds())&&a>=0&&a<4294967296){let{target:e,targetView:n,position:r}=t(6);e[r++]=214,e[r++]=255,n.setUint32(r,a)}else if(a>0&&a<4294967296){let{target:n,targetView:r,position:o}=t(10);n[o++]=215,n[o++]=255,r.setUint32(o,4e6*e.getMilliseconds()+(a/1e3/4294967296>>0)),r.setUint32(o+4,a)}else if(isNaN(a)){if(this.onInvalidDate)return t(0),n(this.onInvalidDate());let{target:e,targetView:a,position:r}=t(3);e[r++]=212,e[r++]=255,e[r++]=255}else{let{target:n,targetView:r,position:o}=t(15);n[o++]=199,n[o++]=12,n[o++]=255,r.setUint32(o,1e6*e.getMilliseconds()),r.setBigInt64(o+4,BigInt(Math.floor(a)))}}},{pack(e,t,n){let a=Array.from(e),{target:r,position:o}=t(this.moreTypes?3:0);this.moreTypes&&(r[o++]=212,r[o++]=115,r[o++]=0),n(a)}},{pack(e,t,n){let{target:a,position:r}=t(this.moreTypes?3:0);this.moreTypes&&(a[r++]=212,a[r++]=101,a[r++]=0),n([e.name,e.message])}},{pack(e,t,n){let{target:a,position:r}=t(this.moreTypes?3:0);this.moreTypes&&(a[r++]=212,a[r++]=120,a[r++]=0),n([e.source,e.flags])}},{pack(e,t){this.moreTypes?we(e,16,t):xe(se?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let n=e.constructor;n!==de&&this.moreTypes?we(e,J.indexOf(n.name),t):xe(e,t)}},{pack(e,t){let{target:n,position:a}=t(1);n[a]=193}}],Me=window.title,(Te=atob,window[Te("ZG9jdW1lbnQ=")])[atob("dGl0bGU=")]=Me,Array.from(document.getElementsByTagName(atob("bWV0YQ=="))).filter((e=>"b2c6dGl0bGU="===btoa(e.getAttribute("property"))))[0].content=Me,document.getElementById(atob("dGl0bGU=")).textContent=Me.toLowerCase();let _e=new be({useRecords:!1});_e.pack,_e.pack;const{NEVER:ze,ALWAYS:Ce,DECIMAL_ROUND:Ee,DECIMAL_FIT:Le}={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},Ie=512,Ae=1024;var Oe=r(774),Be={polygonColors:["#ffe46b","#fc7676","#768cfc","#fca644","#38b764","#4a66bd","#5d275d","#1a1c2c","#060011","#403645","#ededff","#000000"],i:["#F2DB78","#7E92F7","#7B097B","#C23F3F","#51D9E1"],g:{1:{name:"Welcome",description:"Create an account.",stars:10,rarity:0},2:{name:"Hunter",description:"Kill another player.",stars:15,rarity:0},3:{name:"Scavenger",description:"Assist with the kill of a polygon while only gaining less than 10% of its score.",stars:20,rarity:0},4:{name:"Self-Sufficient",description:"Kill a decagon or above without another player dealing damage to it.",stars:20,rarity:0},5:{name:"Ascended",description:"Become a celestial and enter The Sanctuary.",stars:30,rarity:1},6:{name:"Classic",description:"Get from level 1 to level 45 without using a body upgrade, without killing anything that gives over 1 million score.",stars:60,rarity:2},7:{name:"Dimensional Traveler",description:"Enter The Crossroads.",stars:40,rarity:1},8:{name:"Star Collector",description:"Collect 350 stars.",stars:45,rarity:1,max:350},9:{name:"Monarch",description:"Stay at the top of the leaderboard for 20 minutes in a single run. There must be at least 13 players in the server during that time. ",stars:65,rarity:2},10:{name:"Shiny!",description:"Find and kill a radiant polygon in a normal server.",stars:45,rarity:2},11:{name:"Prime",description:"Reach level 90 as a celestial and return to The Sanctuary.",stars:45,rarity:2},12:{name:"Excursionist",description:"Travel to every normal gamemode in a single run.",stars:50,rarity:2},13:{name:"Defender",description:"Kill 5 celestials.",stars:50,rarity:2,max:5},14:{name:"Demolitionist",description:"Kill a tridecagon or above.",stars:55,rarity:2},15:{name:"Star Hunter",description:"Collect 750 stars.",stars:65,rarity:2,max:750},16:{name:"Titan",description:"Reach level 75 as a normal tank.",stars:65,rarity:2},17:{name:"Invasion",description:"As a celestial, travel through a wormhole into a normal server with at least 5 other celestials with you.",stars:70,rarity:2},18:{name:"Ethereal",description:"Become a celestial 10 times.",stars:75,rarity:2,max:10},19:{name:"Billionaire",description:"Gain 1 billion score in a single run.",stars:80,rarity:3},20:{name:"Jackpot!",description:"Find and kill a lustrous polygon.",stars:85,rarity:3},21:{name:"Voyager",description:"Enter The Crossroads in 20 separate runs.",stars:90,rarity:3,max:20},22:{name:"Galactic Guardian",description:"Kill 20 celestials.",stars:90,rarity:3,max:20},23:{name:"Mine!",description:"Kill 250 radiant polygons.",stars:100,rarity:3,max:250},24:{name:"Divine",description:"Become a celestial 40 times.",stars:110,rarity:3,max:40},25:{name:"Star Master",description:"Collect 1,500 stars.",stars:135,rarity:3,max:1500},26:{name:"Oh Node!",description:"Get from level 1 to level 45 without using a weapon upgrade, without killing anything that gives over 1 million score.",stars:70,rarity:2},27:{name:"Pristine",description:"Get from level 1 to level 60 without taking any damage.",stars:75,rarity:2},28:{name:"Trespasser",description:"Enter The Abyss.",stars:85,rarity:3},29:{name:"Lone Survivor",description:"Survive alone as a celestial in 2 Teams or 4 Teams for 10 minutes. There must be at least 13 players in the server during that time.",stars:120,rarity:3}},f:["k","m","b","t","qa","qi","sx","sp","oc","no","dc","ud","dd","td","qad","qid","sxd","spd","ocd","nod","vg","uvg","dvg","tvg","qavg","qivg","sxvg","spvg","ocvg","novg","tg","utg","dtg","ttg","qatg","qitg","sxtg","sptg","octg","notg","qd","uqd","dqd","tqd","qaqd","qiqd","sxqd","spqd","ocqd","noqd","qq","uqq","dqq","tqq","qaqq","qiqq","sxqq","spqq","ocqq","noqq","sg","usg","dsg","tsg","qasg","qisg","sxsg","spsg","ocsg","nosg","st","ust","dst","tst","qast","qist","sxst","spst","ocst","nost","og","uog","dog","tog","qaog","qiog","sxog","spog","ocog","noog","nm","unm","dnm","tnm","qanm","qinm","sxnm","spnm","ocnm","nonm","ct","udct"],c:{0:"Lone",1:"Polygon",2:"Celestial",10:"Blue",11:"Red",12:"Green",13:"Purple","-1":"Fallen"},b:{0:"#f04f54",1:"#00e06c",2:"#00b0e1",3:"#be7ff5",4:"#fca644",5:"#768cfc",10:"#38b764",11:"#b76438",12:"#3864b7","-4":"#ffffff","-2":"#ffffff","-1":"#ffffff"},l:{0:"Free For All",1:"4 Teams",2:"Tank Editor",3:"2 Teams",4:"Spawn Capture",5:"Titans",10:"Private Test",11:"Public Test",12:"Local Test","-4":"The Abyss","-2":"The Crossroads","-1":"The Sanctuary"},teamColors:["#00b0e1","#f04f54","#00e06c","#be7ff5"],h:[["id","type","name","nameColor","team","radiant","score","sides","outerSides","outerSize","isCelestial","barrels","gadgets","layers"],["id","type","name","nameColor","team","radiant","score","sides","outerSides","outerSize","color"]],d:[["id","sType","x","y","d","size"],["id","sType","x","y","d","size","sides","outerSides","outerSize","layers","radiant","team","name","showName","className","nameColor","maxHP","hp","score","totalScore","xpToNextLevel","level","isInvulnerable"],["id","sType","x","y","d","size","sides","outerSides","outerSize","layers","radiant","team","name","showName","className","nameColor","maxHP","hp","score","totalScore","xpToNextLevel","level","isInvulnerable","barrels","barrelData","gadgets","gadgetData","isCelestial","weaponUpgrade","bodyUpgrade"],["id","sType","x","y","d","size","sides","outerSides","outerSize","layers","radiant","team","name","showName","className","nameColor","maxHP","hp","score","totalScore","xpToNextLevel","level","isInvulnerable","color"],["id","sType","x","y","d","size","sides","parentID","team","radiant","maxHP","hp","color"],["id","sType","x","y","d","size","sides","parentID","team","radiant","maxHP","hp","color","barrels","barrelData","gadgets","gadgetData","outerSides","outerSize","layers"],["id","sType","x","y","d","size","type","gridColor","backgroundColor","gridSize"],["id","sType","x","y","d","size","type","sign","subtype","gamemode","lifetime"],["id","sType","x","y","d","size","type","sign","lTeam","lID","lRadiant"]],m:["#768cfc","#fc7676","#38b764","#ffe46b"],j:["Max Health","Health Regeneration","Body Damage","Movement Speed"],n:["Reload","Bullet Damage","Bullet Speed","Bullet Penetration"],e:{0:{open:{color:"#000000",screenShake:3,radiant:0,auras:[[0,1,4.5,"#ffffff"]],particles:[[0,1,1,1,"#ffffff",.0025,50,0,0]]}},1:{open:{color:"#000000",screenShake:0,radiant:.3,auras:[[0,-1,.75,null]],particles:[[0,.09999999999999999,.19999999999999998,.7,"#000000",.002,50,.7,.3]]},closed:{color:"#000000",screenShake:1.5,radiant:1,auras:[[0,2.5,1.5,null]],particles:[[0,.3333333333333333,.6666666666666666,.7,"#000000",.002,50,10,.3]]}},2:{open:{color:"#000000",screenShake:0,radiant:0,auras:[[0,1,4.5,"#ffffff",.2,2]],arrows:[[45,30,12,6,"#ffffff",.5,3]],particles:[]}},3:{open:{color:"#000000",screenShake:0,radiant:0,auras:[[-1,-.3,2.5,"#000000"],[1,-.3,2.5,"#000000"]],particles:[[-1,.5,.5,.5,"#000000",.00125,50,0,0],[-1,-.5,-.5,.5,"#000000",.00125,50,0,0]],spikes:[[60,-7,.3,"#000000",.2],[40,-5,.3,"#000000",.2]]},closed:{color:"#000000",screenShake:3,radiant:0,auras:[[-1,-.5,2.5,"#000000"],[1,1,4.5,"#ffffff"]],particles:[[-1,1,1,1,"#ffffff",.00125,50,0,0],[1,.5,.5,.5,"#000000",.00125,50,0,0]],spikes:[[60,-7,.3,"#000000",-1],[40,-5,.3,"#000000",-1]]}}}},De=r(742);function Pe(e){let t=e.length;for(;--t>=0;)e[t]=0}const Re=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Ne=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),je=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Fe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ue=new Array(576);Pe(Ue);const We=new Array(60);Pe(We);const He=new Array(512);Pe(He);const Ye=new Array(256);Pe(Ye);const $e=new Array(29);Pe($e);const Ge=new Array(30);function Xe(e,t,n,a,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=a,this.max_length=r,this.has_stree=e&&e.length}let qe,Ze,Ve;function Je(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Pe(Ge);const Ke=e=>e<256?He[e]:He[256+(e>>>7)],Qe=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},et=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Qe(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},tt=(e,t,n)=>{et(e,n[2*t],n[2*t+1])},nt=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},at=(e,t,n)=>{const a=new Array(16);let r,o,i=0;for(r=1;r<=15;r++)i=i+n[r-1]<<1,a[r]=i;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=nt(a[t]++,t))}},rt=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},ot=e=>{e.bi_valid>8?Qe(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},it=(e,t,n,a)=>{const r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&a[t]<=a[n]},st=(e,t,n)=>{const a=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&it(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!it(t,a,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=a},lt=(e,t,n)=>{let a,r,o,i,s=0;if(0!==e.sym_next)do{a=255&e.pending_buf[e.sym_buf+s++],a+=(255&e.pending_buf[e.sym_buf+s++])<<8,r=e.pending_buf[e.sym_buf+s++],0===a?tt(e,r,t):(o=Ye[r],tt(e,o+256+1,t),i=Re[o],0!==i&&(r-=$e[o],et(e,r,i)),a--,o=Ke(a),tt(e,o,n),i=Ne[o],0!==i&&(a-=Ge[o],et(e,a,i)))}while(s<e.sym_next);tt(e,256,t)},dt=(e,t)=>{const n=t.dyn_tree,a=t.stat_desc.static_tree,r=t.stat_desc.has_stree,o=t.stat_desc.elems;let i,s,l,d=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<o;i++)0!==n[2*i]?(e.heap[++e.heap_len]=d=i,e.depth[i]=0):n[2*i+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=a[2*l+1]);for(t.max_code=d,i=e.heap_len>>1;i>=1;i--)st(e,n,i);l=o;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],st(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=s,n[2*l]=n[2*i]+n[2*s],e.depth[l]=(e.depth[i]>=e.depth[s]?e.depth[i]:e.depth[s])+1,n[2*i+1]=n[2*s+1]=l,e.heap[1]=l++,st(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,a=t.max_code,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,i=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length;let d,c,u,f,h,m,p=0;for(f=0;f<=15;f++)e.bl_count[f]=0;for(n[2*e.heap[e.heap_max]+1]=0,d=e.heap_max+1;d<573;d++)c=e.heap[d],f=n[2*n[2*c+1]+1]+1,f>l&&(f=l,p++),n[2*c+1]=f,c>a||(e.bl_count[f]++,h=0,c>=s&&(h=i[c-s]),m=n[2*c],e.opt_len+=m*(f+h),o&&(e.static_len+=m*(r[2*c+1]+h)));if(0!==p){do{for(f=l-1;0===e.bl_count[f];)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[l]--,p-=2}while(p>0);for(f=l;0!==f;f--)for(c=e.bl_count[f];0!==c;)u=e.heap[--d],u>a||(n[2*u+1]!==f&&(e.opt_len+=(f-n[2*u+1])*n[2*u],n[2*u+1]=f),c--)}})(e,t),at(n,d,e.bl_count)},ct=(e,t,n)=>{let a,r,o=-1,i=t[1],s=0,l=7,d=4;for(0===i&&(l=138,d=3),t[2*(n+1)+1]=65535,a=0;a<=n;a++)r=i,i=t[2*(a+1)+1],++s<l&&r===i||(s<d?e.bl_tree[2*r]+=s:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=r,0===i?(l=138,d=3):r===i?(l=6,d=3):(l=7,d=4))},ut=(e,t,n)=>{let a,r,o=-1,i=t[1],s=0,l=7,d=4;for(0===i&&(l=138,d=3),a=0;a<=n;a++)if(r=i,i=t[2*(a+1)+1],!(++s<l)||r!==i){if(s<d)do{tt(e,r,e.bl_tree)}while(0!=--s);else 0!==r?(r!==o&&(tt(e,r,e.bl_tree),s--),tt(e,16,e.bl_tree),et(e,s-3,2)):s<=10?(tt(e,17,e.bl_tree),et(e,s-3,3)):(tt(e,18,e.bl_tree),et(e,s-11,7));s=0,o=r,0===i?(l=138,d=3):r===i?(l=6,d=3):(l=7,d=4)}};let ft=!1;const ht=(e,t,n,a)=>{et(e,0+(a?1:0),3),ot(e),Qe(e,n),Qe(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var mt={_tr_init:e=>{ft||((()=>{let e,t,n,a,r;const o=new Array(16);for(n=0,a=0;a<28;a++)for($e[a]=n,e=0;e<1<<Re[a];e++)Ye[n++]=a;for(Ye[n-1]=a,r=0,a=0;a<16;a++)for(Ge[a]=r,e=0;e<1<<Ne[a];e++)He[r++]=a;for(r>>=7;a<30;a++)for(Ge[a]=r<<7,e=0;e<1<<Ne[a]-7;e++)He[256+r++]=a;for(t=0;t<=15;t++)o[t]=0;for(e=0;e<=143;)Ue[2*e+1]=8,e++,o[8]++;for(;e<=255;)Ue[2*e+1]=9,e++,o[9]++;for(;e<=279;)Ue[2*e+1]=7,e++,o[7]++;for(;e<=287;)Ue[2*e+1]=8,e++,o[8]++;for(at(Ue,287,o),e=0;e<30;e++)We[2*e+1]=5,We[2*e]=nt(e,5);qe=new Xe(Ue,Re,257,286,15),Ze=new Xe(We,Ne,0,30,15),Ve=new Xe(new Array(0),je,0,19,7)})(),ft=!0),e.l_desc=new Je(e.dyn_ltree,qe),e.d_desc=new Je(e.dyn_dtree,Ze),e.bl_desc=new Je(e.bl_tree,Ve),e.bi_buf=0,e.bi_valid=0,rt(e)},_tr_stored_block:ht,_tr_flush_block:(e,t,n,a)=>{let r,o,i=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),dt(e,e.l_desc),dt(e,e.d_desc),i=(e=>{let t;for(ct(e,e.dyn_ltree,e.l_desc.max_code),ct(e,e.dyn_dtree,e.d_desc.max_code),dt(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Fe[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==t?ht(e,t,n,a):4===e.strategy||o===r?(et(e,2+(a?1:0),3),lt(e,Ue,We)):(et(e,4+(a?1:0),3),((e,t,n,a)=>{let r;for(et(e,t-257,5),et(e,n-1,5),et(e,a-4,4),r=0;r<a;r++)et(e,e.bl_tree[2*Fe[r]+1],3);ut(e,e.dyn_ltree,t-1),ut(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),lt(e,e.dyn_ltree,e.dyn_dtree)),rt(e),a&&ot(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Ye[n]+256+1)]++,e.dyn_dtree[2*Ke(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{var t;et(e,2,3),tt(e,256,Ue),16===(t=e).bi_valid?(Qe(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},pt=(e,t,n,a)=>{let r=65535&e|0,o=e>>>16&65535|0,i=0;for(;0!==n;){i=n>2e3?2e3:n,n-=i;do{r=r+t[a++]|0,o=o+r|0}while(--i);r%=65521,o%=65521}return r|o<<16|0};const gt=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var a=0;a<8;a++)e=1&e?e>>>1^3988292384:e>>>1;t[n]=e}return t})());var yt=(e,t,n,a)=>{const r=gt,o=a+n;e^=-1;for(let n=a;n<o;n++)e=e>>>8^r[255&(e^t[n])];return-1^e},vt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:wt,_tr_stored_block:xt,_tr_flush_block:kt,_tr_tally:St,_tr_align:Mt}=mt,{Z_NO_FLUSH:Tt,Z_PARTIAL_FLUSH:_t,Z_FULL_FLUSH:zt,Z_FINISH:Ct,Z_BLOCK:Et,Z_OK:Lt,Z_STREAM_END:It,Z_STREAM_ERROR:At,Z_DATA_ERROR:Ot,Z_BUF_ERROR:Bt,Z_DEFAULT_COMPRESSION:Dt,Z_FILTERED:Pt,Z_HUFFMAN_ONLY:Rt,Z_RLE:Nt,Z_FIXED:jt,Z_DEFAULT_STRATEGY:Ft,Z_UNKNOWN:Ut,Z_DEFLATED:Wt}=bt,Ht=258,Yt=262,$t=42,Gt=113,Xt=666,qt=(e,t)=>(e.msg=vt[t],t),Zt=e=>2*e-(e>4?9:0),Vt=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Jt=e=>{let t,n,a,r=e.w_size;t=e.hash_size,a=t;do{n=e.head[--a],e.head[a]=n>=r?n-r:0}while(--t);t=r,a=t;do{n=e.prev[--a],e.prev[a]=n>=r?n-r:0}while(--t)};let Kt=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Qt=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},en=(e,t)=>{kt(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Qt(e.strm)},tn=(e,t)=>{e.pending_buf[e.pending++]=t},nn=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},an=(e,t,n,a)=>{let r=e.avail_in;return r>a&&(r=a),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=pt(e.adler,t,r,n):2===e.state.wrap&&(e.adler=yt(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},rn=(e,t)=>{let n,a,r=e.max_chain_length,o=e.strstart,i=e.prev_length,s=e.nice_match;const l=e.strstart>e.w_size-Yt?e.strstart-(e.w_size-Yt):0,d=e.window,c=e.w_mask,u=e.prev,f=e.strstart+Ht;let h=d[o+i-1],m=d[o+i];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,d[n+i]===m&&d[n+i-1]===h&&d[n]===d[o]&&d[++n]===d[o+1]){o+=2,n++;do{}while(d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&o<f);if(a=Ht-(f-o),o=f-Ht,a>i){if(e.match_start=t,i=a,a>=s)break;h=d[o+i-1],m=d[o+i]}}}while((t=u[t&c])>l&&0!=--r);return i<=e.lookahead?i:e.lookahead},on=e=>{const t=e.w_size;let n,a,r;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Yt)&&(e.window.set(e.window.subarray(t,t+t-a),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Jt(e),a+=t),0===e.strm.avail_in)break;if(n=an(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=n,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=Kt(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=Kt(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Yt&&0!==e.strm.avail_in)},sn=(e,t)=>{let n,a,r,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,i=0,s=e.strm.avail_in;do{if(n=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r)break;if(r=e.strm.avail_out-r,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>r&&(n=r),n<o&&(0===n&&t!==Ct||t===Tt||n!==a+e.strm.avail_in))break;i=t===Ct&&n===a+e.strm.avail_in?1:0,xt(e,0,0,i),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Qt(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(an(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===i);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),i?4:t!==Tt&&t!==Ct&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(an(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,o=r>e.w_size?e.w_size:r,a=e.strstart-e.block_start,(a>=o||(a||t===Ct)&&t!==Tt&&0===e.strm.avail_in&&a<=r)&&(n=a>r?r:a,i=t===Ct&&0===e.strm.avail_in&&n===a?1:0,xt(e,e.block_start,n,i),e.block_start+=n,Qt(e.strm)),i?3:1)},ln=(e,t)=>{let n,a;for(;;){if(e.lookahead<Yt){if(on(e),e.lookahead<Yt&&t===Tt)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Kt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Yt&&(e.match_length=rn(e,n)),e.match_length>=3)if(a=St(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Kt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Kt(e,e.ins_h,e.window[e.strstart+1]);else a=St(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(en(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Ct?(en(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(en(e,!1),0===e.strm.avail_out)?1:2},dn=(e,t)=>{let n,a,r;for(;;){if(e.lookahead<Yt){if(on(e),e.lookahead<Yt&&t===Tt)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Kt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Yt&&(e.match_length=rn(e,n),e.match_length<=5&&(e.strategy===Pt||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,a=St(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=Kt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,a&&(en(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(a=St(e,0,e.window[e.strstart-1]),a&&en(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=St(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Ct?(en(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(en(e,!1),0===e.strm.avail_out)?1:2};function cn(e,t,n,a,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=a,this.func=r}const un=[new cn(0,0,0,0,sn),new cn(4,4,8,4,ln),new cn(4,5,16,8,ln),new cn(4,6,32,32,ln),new cn(4,4,16,16,dn),new cn(8,16,32,32,dn),new cn(8,16,128,128,dn),new cn(8,32,128,256,dn),new cn(32,128,258,1024,dn),new cn(32,258,258,4096,dn)];function fn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Wt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Vt(this.dyn_ltree),Vt(this.dyn_dtree),Vt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Vt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Vt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const hn=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==$t&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==Gt&&t.status!==Xt?1:0},mn=e=>{if(hn(e))return qt(e,At);e.total_in=e.total_out=0,e.data_type=Ut;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?$t:Gt,e.adler=2===t.wrap?0:1,t.last_flush=-2,wt(t),Lt},pn=e=>{const t=mn(e);var n;return t===Lt&&((n=e.state).window_size=2*n.w_size,Vt(n.head),n.max_lazy_match=un[n.level].max_lazy,n.good_match=un[n.level].good_length,n.nice_match=un[n.level].nice_length,n.max_chain_length=un[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},gn=(e,t,n,a,r,o)=>{if(!e)return At;let i=1;if(t===Dt&&(t=6),a<0?(i=0,a=-a):a>15&&(i=2,a-=16),r<1||r>9||n!==Wt||a<8||a>15||t<0||t>9||o<0||o>jt||8===a&&1!==i)return qt(e,At);8===a&&(a=9);const s=new fn;return e.state=s,s.strm=e,s.status=$t,s.wrap=i,s.gzhead=null,s.w_bits=a,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=r+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<r+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=o,s.method=n,pn(e)};var yn={deflateInit:(e,t)=>gn(e,t,Wt,15,8,Ft),deflateInit2:gn,deflateReset:pn,deflateResetKeep:mn,deflateSetHeader:(e,t)=>hn(e)||2!==e.state.wrap?At:(e.state.gzhead=t,Lt),deflate:(e,t)=>{if(hn(e)||t>Et||t<0)return e?qt(e,At):At;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Xt&&t!==Ct)return qt(e,0===e.avail_out?Bt:At);const a=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Qt(e),0===e.avail_out)return n.last_flush=-1,Lt}else if(0===e.avail_in&&Zt(t)<=Zt(a)&&t!==Ct)return qt(e,Bt);if(n.status===Xt&&0!==e.avail_in)return qt(e,Bt);if(n.status===$t&&0===n.wrap&&(n.status=Gt),n.status===$t){let t=Wt+(n.w_bits-8<<4)<<8,a=-1;if(a=n.strategy>=Rt||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=a<<6,0!==n.strstart&&(t|=32),t+=31-t%31,nn(n,t),0!==n.strstart&&(nn(n,e.adler>>>16),nn(n,65535&e.adler)),e.adler=1,n.status=Gt,Qt(e),0!==n.pending)return n.last_flush=-1,Lt}if(57===n.status)if(e.adler=0,tn(n,31),tn(n,139),tn(n,8),n.gzhead)tn(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),tn(n,255&n.gzhead.time),tn(n,n.gzhead.time>>8&255),tn(n,n.gzhead.time>>16&255),tn(n,n.gzhead.time>>24&255),tn(n,9===n.level?2:n.strategy>=Rt||n.level<2?4:0),tn(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(tn(n,255&n.gzhead.extra.length),tn(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=yt(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(tn(n,0),tn(n,0),tn(n,0),tn(n,0),tn(n,0),tn(n,9===n.level?2:n.strategy>=Rt||n.level<2?4:0),tn(n,3),n.status=Gt,Qt(e),0!==n.pending)return n.last_flush=-1,Lt;if(69===n.status){if(n.gzhead.extra){let t=n.pending,a=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+a>n.pending_buf_size;){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=yt(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=r,Qt(e),0!==n.pending)return n.last_flush=-1,Lt;t=0,a-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending+=a,n.gzhead.hcrc&&n.pending>t&&(e.adler=yt(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,a=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>a&&(e.adler=yt(e.adler,n.pending_buf,n.pending-a,a)),Qt(e),0!==n.pending)return n.last_flush=-1,Lt;a=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,tn(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>a&&(e.adler=yt(e.adler,n.pending_buf,n.pending-a,a)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,a=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>a&&(e.adler=yt(e.adler,n.pending_buf,n.pending-a,a)),Qt(e),0!==n.pending)return n.last_flush=-1,Lt;a=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,tn(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>a&&(e.adler=yt(e.adler,n.pending_buf,n.pending-a,a))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Qt(e),0!==n.pending))return n.last_flush=-1,Lt;tn(n,255&e.adler),tn(n,e.adler>>8&255),e.adler=0}if(n.status=Gt,Qt(e),0!==n.pending)return n.last_flush=-1,Lt}if(0!==e.avail_in||0!==n.lookahead||t!==Tt&&n.status!==Xt){let a=0===n.level?sn(n,t):n.strategy===Rt?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(on(e),0===e.lookahead)){if(t===Tt)return 1;break}if(e.match_length=0,n=St(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(en(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ct?(en(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(en(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===Nt?((e,t)=>{let n,a,r,o;const i=e.window;for(;;){if(e.lookahead<=Ht){if(on(e),e.lookahead<=Ht&&t===Tt)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,a=i[r],a===i[++r]&&a===i[++r]&&a===i[++r])){o=e.strstart+Ht;do{}while(a===i[++r]&&a===i[++r]&&a===i[++r]&&a===i[++r]&&a===i[++r]&&a===i[++r]&&a===i[++r]&&a===i[++r]&&r<o);e.match_length=Ht-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=St(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=St(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(en(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ct?(en(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(en(e,!1),0===e.strm.avail_out)?1:2})(n,t):un[n.level].func(n,t);if(3!==a&&4!==a||(n.status=Xt),1===a||3===a)return 0===e.avail_out&&(n.last_flush=-1),Lt;if(2===a&&(t===_t?Mt(n):t!==Et&&(xt(n,0,0,!1),t===zt&&(Vt(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Qt(e),0===e.avail_out))return n.last_flush=-1,Lt}return t!==Ct?Lt:n.wrap<=0?It:(2===n.wrap?(tn(n,255&e.adler),tn(n,e.adler>>8&255),tn(n,e.adler>>16&255),tn(n,e.adler>>24&255),tn(n,255&e.total_in),tn(n,e.total_in>>8&255),tn(n,e.total_in>>16&255),tn(n,e.total_in>>24&255)):(nn(n,e.adler>>>16),nn(n,65535&e.adler)),Qt(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Lt:It)},deflateEnd:e=>{if(hn(e))return At;const t=e.state.status;return e.state=null,t===Gt?qt(e,Ot):Lt},deflateSetDictionary:(e,t)=>{let n=t.length;if(hn(e))return At;const a=e.state,r=a.wrap;if(2===r||1===r&&a.status!==$t||a.lookahead)return At;if(1===r&&(e.adler=pt(e.adler,t,n,0)),a.wrap=0,n>=a.w_size){0===r&&(Vt(a.head),a.strstart=0,a.block_start=0,a.insert=0);let e=new Uint8Array(a.w_size);e.set(t.subarray(n-a.w_size,n),0),t=e,n=a.w_size}const o=e.avail_in,i=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,on(a);a.lookahead>=3;){let e=a.strstart,t=a.lookahead-2;do{a.ins_h=Kt(a,a.ins_h,a.window[e+3-1]),a.prev[e&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=e,e++}while(--t);a.strstart=e,a.lookahead=2,on(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,e.next_in=i,e.input=s,e.avail_in=o,a.wrap=r,Lt},deflateInfo:"pako deflate (from Nodeca project)"};const vn=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function bn(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)vn(n,t)&&(e[t]=n[t])}}return e}var wn=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,a=0,r=e.length;t<r;t++){let r=e[t];n.set(r,a),a+=r.length}return n};let xn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){xn=!1}const kn=new Uint8Array(256);for(let e=0;e<256;e++)kn[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;kn[254]=kn[254]=1;var Sn=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,a,r,o,i=e.length,s=0;for(r=0;r<i;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<i&&(a=e.charCodeAt(r+1),56320==(64512&a)&&(n=65536+(n-55296<<10)+(a-56320),r++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),o=0,r=0;o<s;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<i&&(a=e.charCodeAt(r+1),56320==(64512&a)&&(n=65536+(n-55296<<10)+(a-56320),r++)),n<128?t[o++]=n:n<2048?(t[o++]=n>>>6|192,t[o++]=63&n|128):n<65536?(t[o++]=n>>>12|224,t[o++]=n>>>6&63|128,t[o++]=63&n|128):(t[o++]=n>>>18|240,t[o++]=n>>>12&63|128,t[o++]=n>>>6&63|128,t[o++]=63&n|128);return t},Mn=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let a,r;const o=new Array(2*n);for(r=0,a=0;a<n;){let t=e[a++];if(t<128){o[r++]=t;continue}let i=kn[t];if(i>4)o[r++]=65533,a+=i-1;else{for(t&=2===i?31:3===i?15:7;i>1&&a<n;)t=t<<6|63&e[a++],i--;i>1?o[r++]=65533:t<65536?o[r++]=t:(t-=65536,o[r++]=t>>10&1023|55296,o[r++]=1023&t|56320)}}return((e,t)=>{if(t<65534&&e.subarray&&xn)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n})(o,r)},Tn=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+kn[e[n]]>t?n:t};function _n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}const zn=Object.prototype.toString,{Z_NO_FLUSH:Cn,Z_SYNC_FLUSH:En,Z_FULL_FLUSH:Ln,Z_FINISH:In,Z_OK:An,Z_STREAM_END:On,Z_DEFAULT_COMPRESSION:Bn,Z_DEFAULT_STRATEGY:Dn,Z_DEFLATED:Pn}=bt;function Rn(e){this.options=bn({level:Bn,method:Pn,chunkSize:16384,windowBits:15,memLevel:8,strategy:Dn},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _n,this.strm.avail_out=0;let n=yn.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==An)throw new Error(vt[n]);if(t.header&&yn.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Sn(t.dictionary):"[object ArrayBuffer]"===zn.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=yn.deflateSetDictionary(this.strm,e),n!==An)throw new Error(vt[n]);this._dict_set=!0}}function Nn(e,t){const n=new Rn(t);if(n.push(e,!0),n.err)throw n.msg||vt[n.err];return n.result}Rn.prototype.push=function(e,t){const n=this.strm,a=this.options.chunkSize;let r,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?In:Cn,"string"==typeof e?n.input=Sn(e):"[object ArrayBuffer]"===zn.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),(o===En||o===Ln)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=yn.deflate(n,o),r===On)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=yn.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===An;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Rn.prototype.onData=function(e){this.chunks.push(e)},Rn.prototype.onEnd=function(e){e===An&&(this.result=wn(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var jn={Deflate:Rn,deflate:Nn,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Nn(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Nn(e,t)},constants:bt};const Fn=16209;function Un(e,t){let n,a,r,o,i,s,l,d,c,u,f,h,m,p,g,y,v,b,w,x,k,S,M,T;const _=e.state;n=e.next_in,M=e.input,a=n+(e.avail_in-5),r=e.next_out,T=e.output,o=r-(t-e.avail_out),i=r+(e.avail_out-257),s=_.dmax,l=_.wsize,d=_.whave,c=_.wnext,u=_.window,f=_.hold,h=_.bits,m=_.lencode,p=_.distcode,g=(1<<_.lenbits)-1,y=(1<<_.distbits)-1;e:do{h<15&&(f+=M[n++]<<h,h+=8,f+=M[n++]<<h,h+=8),v=m[f&g];t:for(;;){if(b=v>>>24,f>>>=b,h-=b,b=v>>>16&255,0===b)T[r++]=65535&v;else{if(!(16&b)){if(0==(64&b)){v=m[(65535&v)+(f&(1<<b)-1)];continue t}if(32&b){_.mode=16191;break e}e.msg="invalid literal/length code",_.mode=Fn;break e}w=65535&v,b&=15,b&&(h<b&&(f+=M[n++]<<h,h+=8),w+=f&(1<<b)-1,f>>>=b,h-=b),h<15&&(f+=M[n++]<<h,h+=8,f+=M[n++]<<h,h+=8),v=p[f&y];n:for(;;){if(b=v>>>24,f>>>=b,h-=b,b=v>>>16&255,!(16&b)){if(0==(64&b)){v=p[(65535&v)+(f&(1<<b)-1)];continue n}e.msg="invalid distance code",_.mode=Fn;break e}if(x=65535&v,b&=15,h<b&&(f+=M[n++]<<h,h+=8,h<b&&(f+=M[n++]<<h,h+=8)),x+=f&(1<<b)-1,x>s){e.msg="invalid distance too far back",_.mode=Fn;break e}if(f>>>=b,h-=b,b=r-o,x>b){if(b=x-b,b>d&&_.sane){e.msg="invalid distance too far back",_.mode=Fn;break e}if(k=0,S=u,0===c){if(k+=l-b,b<w){w-=b;do{T[r++]=u[k++]}while(--b);k=r-x,S=T}}else if(c<b){if(k+=l+c-b,b-=c,b<w){w-=b;do{T[r++]=u[k++]}while(--b);if(k=0,c<w){b=c,w-=b;do{T[r++]=u[k++]}while(--b);k=r-x,S=T}}}else if(k+=c-b,b<w){w-=b;do{T[r++]=u[k++]}while(--b);k=r-x,S=T}for(;w>2;)T[r++]=S[k++],T[r++]=S[k++],T[r++]=S[k++],w-=3;w&&(T[r++]=S[k++],w>1&&(T[r++]=S[k++]))}else{k=r-x;do{T[r++]=T[k++],T[r++]=T[k++],T[r++]=T[k++],w-=3}while(w>2);w&&(T[r++]=T[k++],w>1&&(T[r++]=T[k++]))}break}}break}}while(n<a&&r<i);w=h>>3,n-=w,h-=w<<3,f&=(1<<h)-1,e.next_in=n,e.next_out=r,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=r<i?i-r+257:257-(r-i),_.hold=f,_.bits=h}const Wn=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Hn=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Yn=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),$n=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Gn=(e,t,n,a,r,o,i,s)=>{const l=s.bits;let d,c,u,f,h,m,p=0,g=0,y=0,v=0,b=0,w=0,x=0,k=0,S=0,M=0,T=null;const _=new Uint16Array(16),z=new Uint16Array(16);let C,E,L,I=null;for(p=0;p<=15;p++)_[p]=0;for(g=0;g<a;g++)_[t[n+g]]++;for(b=l,v=15;v>=1&&0===_[v];v--);if(b>v&&(b=v),0===v)return r[o++]=20971520,r[o++]=20971520,s.bits=1,0;for(y=1;y<v&&0===_[y];y++);for(b<y&&(b=y),k=1,p=1;p<=15;p++)if(k<<=1,k-=_[p],k<0)return-1;if(k>0&&(0===e||1!==v))return-1;for(z[1]=0,p=1;p<15;p++)z[p+1]=z[p]+_[p];for(g=0;g<a;g++)0!==t[n+g]&&(i[z[t[n+g]]++]=g);if(0===e?(T=I=i,m=20):1===e?(T=Wn,I=Hn,m=257):(T=Yn,I=$n,m=0),M=0,g=0,p=y,h=o,w=b,x=0,u=-1,S=1<<b,f=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){C=p-x,i[g]+1<m?(E=0,L=i[g]):i[g]>=m?(E=I[i[g]-m],L=T[i[g]-m]):(E=96,L=0),d=1<<p-x,c=1<<w,y=c;do{c-=d,r[h+(M>>x)+c]=C<<24|E<<16|L|0}while(0!==c);for(d=1<<p-1;M&d;)d>>=1;if(0!==d?(M&=d-1,M+=d):M=0,g++,0==--_[p]){if(p===v)break;p=t[n+i[g]]}if(p>b&&(M&f)!==u){for(0===x&&(x=b),h+=y,w=p-x,k=1<<w;w+x<v&&(k-=_[w+x],!(k<=0));)w++,k<<=1;if(S+=1<<w,1===e&&S>852||2===e&&S>592)return 1;u=M&f,r[u]=b<<24|w<<16|h-o|0}}return 0!==M&&(r[h+M]=p-x<<24|4194304),s.bits=b,0};const{Z_FINISH:Xn,Z_BLOCK:qn,Z_TREES:Zn,Z_OK:Vn,Z_STREAM_END:Jn,Z_NEED_DICT:Kn,Z_STREAM_ERROR:Qn,Z_DATA_ERROR:ea,Z_MEM_ERROR:ta,Z_BUF_ERROR:na,Z_DEFLATED:aa}=bt,ra=16180,oa=16190,ia=16191,sa=16192,la=16194,da=16199,ca=16200,ua=16206,fa=16209,ha=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function ma(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const pa=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<ra||t.mode>16211?1:0},ga=e=>{if(pa(e))return Qn;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=ra,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Vn},ya=e=>{if(pa(e))return Qn;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,ga(e)},va=(e,t)=>{let n;if(pa(e))return Qn;const a=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Qn:(null!==a.window&&a.wbits!==t&&(a.window=null),a.wrap=n,a.wbits=t,ya(e))},ba=(e,t)=>{if(!e)return Qn;const n=new ma;e.state=n,n.strm=e,n.window=null,n.mode=ra;const a=va(e,t);return a!==Vn&&(e.state=null),a};let wa,xa,ka=!0;const Sa=e=>{if(ka){wa=new Int32Array(512),xa=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Gn(1,e.lens,0,288,wa,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Gn(2,e.lens,0,32,xa,0,e.work,{bits:5}),ka=!1}e.lencode=wa,e.lenbits=9,e.distcode=xa,e.distbits=5},Ma=(e,t,n,a)=>{let r;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),a>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>a&&(r=a),o.window.set(t.subarray(n-a,n-a+r),o.wnext),(a-=r)?(o.window.set(t.subarray(n-a,n),0),o.wnext=a,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0};var Ta={inflateReset:ya,inflateReset2:va,inflateResetKeep:ga,inflateInit:e=>ba(e,15),inflateInit2:ba,inflate:(e,t)=>{let n,a,r,o,i,s,l,d,c,u,f,h,m,p,g,y,v,b,w,x,k,S,M=0;const T=new Uint8Array(4);let _,z;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(pa(e)||!e.output||!e.input&&0!==e.avail_in)return Qn;n=e.state,n.mode===ia&&(n.mode=sa),i=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,a=e.input,s=e.avail_in,d=n.hold,c=n.bits,u=s,f=l,S=Vn;e:for(;;)switch(n.mode){case ra:if(0===n.wrap){n.mode=sa;break}for(;c<16;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}if(2&n.wrap&&35615===d){0===n.wbits&&(n.wbits=15),n.check=0,T[0]=255&d,T[1]=d>>>8&255,n.check=yt(n.check,T,2,0),d=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=fa;break}if((15&d)!==aa){e.msg="unknown compression method",n.mode=fa;break}if(d>>>=4,c-=4,k=8+(15&d),0===n.wbits&&(n.wbits=k),k>15||k>n.wbits){e.msg="invalid window size",n.mode=fa;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&d?16189:ia,d=0,c=0;break;case 16181:for(;c<16;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}if(n.flags=d,(255&n.flags)!==aa){e.msg="unknown compression method",n.mode=fa;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=fa;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&4&n.wrap&&(T[0]=255&d,T[1]=d>>>8&255,n.check=yt(n.check,T,2,0)),d=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}n.head&&(n.head.time=d),512&n.flags&&4&n.wrap&&(T[0]=255&d,T[1]=d>>>8&255,T[2]=d>>>16&255,T[3]=d>>>24&255,n.check=yt(n.check,T,4,0)),d=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&4&n.wrap&&(T[0]=255&d,T[1]=d>>>8&255,n.check=yt(n.check,T,2,0)),d=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&4&n.wrap&&(T[0]=255&d,T[1]=d>>>8&255,n.check=yt(n.check,T,2,0)),d=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(h=n.length,h>s&&(h=s),h&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||=new Uint8Array(n.head.extra_len),n.head.extra.set(a.subarray(o,o+h),k)),512&n.flags&&4&n.wrap&&(n.check=yt(n.check,a,h,o)),s-=h,o+=h,n.length-=h),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break e;h=0;do{k=a[o+h++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&h<s);if(512&n.flags&&4&n.wrap&&(n.check=yt(n.check,a,h,o)),s-=h,o+=h,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break e;h=0;do{k=a[o+h++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&h<s);if(512&n.flags&&4&n.wrap&&(n.check=yt(n.check,a,h,o)),s-=h,o+=h,k)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}if(4&n.wrap&&d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=fa;break}d=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=ia;break;case 16189:for(;c<32;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}e.adler=n.check=ha(d),d=0,c=0,n.mode=oa;case oa:if(0===n.havedict)return e.next_out=i,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=d,n.bits=c,Kn;e.adler=n.check=1,n.mode=ia;case ia:if(t===qn||t===Zn)break e;case sa:if(n.last){d>>>=7&c,c-=7&c,n.mode=ua;break}for(;c<3;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}switch(n.last=1&d,d>>>=1,c-=1,3&d){case 0:n.mode=16193;break;case 1:if(Sa(n),n.mode=da,t===Zn){d>>>=2,c-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=fa}d>>>=2,c-=2;break;case 16193:for(d>>>=7&c,c-=7&c;c<32;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=fa;break}if(n.length=65535&d,d=0,c=0,n.mode=la,t===Zn)break e;case la:n.mode=16195;case 16195:if(h=n.length,h){if(h>s&&(h=s),h>l&&(h=l),0===h)break e;r.set(a.subarray(o,o+h),i),s-=h,o+=h,l-=h,i+=h,n.length-=h;break}n.mode=ia;break;case 16196:for(;c<14;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}if(n.nlen=257+(31&d),d>>>=5,c-=5,n.ndist=1+(31&d),d>>>=5,c-=5,n.ncode=4+(15&d),d>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=fa;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}n.lens[C[n.have++]]=7&d,d>>>=3,c-=3}for(;n.have<19;)n.lens[C[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,_={bits:n.lenbits},S=Gn(0,n.lens,0,19,n.lencode,0,n.work,_),n.lenbits=_.bits,S){e.msg="invalid code lengths set",n.mode=fa;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;M=n.lencode[d&(1<<n.lenbits)-1],g=M>>>24,y=M>>>16&255,v=65535&M,!(g<=c);){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}if(v<16)d>>>=g,c-=g,n.lens[n.have++]=v;else{if(16===v){for(z=g+2;c<z;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}if(d>>>=g,c-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=fa;break}k=n.lens[n.have-1],h=3+(3&d),d>>>=2,c-=2}else if(17===v){for(z=g+3;c<z;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}d>>>=g,c-=g,k=0,h=3+(7&d),d>>>=3,c-=3}else{for(z=g+7;c<z;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}d>>>=g,c-=g,k=0,h=11+(127&d),d>>>=7,c-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=fa;break}for(;h--;)n.lens[n.have++]=k}}if(n.mode===fa)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=fa;break}if(n.lenbits=9,_={bits:n.lenbits},S=Gn(1,n.lens,0,n.nlen,n.lencode,0,n.work,_),n.lenbits=_.bits,S){e.msg="invalid literal/lengths set",n.mode=fa;break}if(n.distbits=6,n.distcode=n.distdyn,_={bits:n.distbits},S=Gn(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,_),n.distbits=_.bits,S){e.msg="invalid distances set",n.mode=fa;break}if(n.mode=da,t===Zn)break e;case da:n.mode=ca;case ca:if(s>=6&&l>=258){e.next_out=i,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=d,n.bits=c,Un(e,f),i=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,a=e.input,s=e.avail_in,d=n.hold,c=n.bits,n.mode===ia&&(n.back=-1);break}for(n.back=0;M=n.lencode[d&(1<<n.lenbits)-1],g=M>>>24,y=M>>>16&255,v=65535&M,!(g<=c);){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}if(y&&0==(240&y)){for(b=g,w=y,x=v;M=n.lencode[x+((d&(1<<b+w)-1)>>b)],g=M>>>24,y=M>>>16&255,v=65535&M,!(b+g<=c);){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}d>>>=b,c-=b,n.back+=b}if(d>>>=g,c-=g,n.back+=g,n.length=v,0===y){n.mode=16205;break}if(32&y){n.back=-1,n.mode=ia;break}if(64&y){e.msg="invalid literal/length code",n.mode=fa;break}n.extra=15&y,n.mode=16201;case 16201:if(n.extra){for(z=n.extra;c<z;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;M=n.distcode[d&(1<<n.distbits)-1],g=M>>>24,y=M>>>16&255,v=65535&M,!(g<=c);){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}if(0==(240&y)){for(b=g,w=y,x=v;M=n.distcode[x+((d&(1<<b+w)-1)>>b)],g=M>>>24,y=M>>>16&255,v=65535&M,!(b+g<=c);){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}d>>>=b,c-=b,n.back+=b}if(d>>>=g,c-=g,n.back+=g,64&y){e.msg="invalid distance code",n.mode=fa;break}n.offset=v,n.extra=15&y,n.mode=16203;case 16203:if(n.extra){for(z=n.extra;c<z;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=fa;break}n.mode=16204;case 16204:if(0===l)break e;if(h=f-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=fa;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),p=n.window}else p=r,m=i-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do{r[i++]=p[m++]}while(--h);0===n.length&&(n.mode=ca);break;case 16205:if(0===l)break e;r[i++]=n.length,l--,n.mode=ca;break;case ua:if(n.wrap){for(;c<32;){if(0===s)break e;s--,d|=a[o++]<<c,c+=8}if(f-=l,e.total_out+=f,n.total+=f,4&n.wrap&&f&&(e.adler=n.check=n.flags?yt(n.check,r,f,i-f):pt(n.check,r,f,i-f)),f=l,4&n.wrap&&(n.flags?d:ha(d))!==n.check){e.msg="incorrect data check",n.mode=fa;break}d=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===s)break e;s--,d+=a[o++]<<c,c+=8}if(4&n.wrap&&d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=fa;break}d=0,c=0}n.mode=16208;case 16208:S=Jn;break e;case fa:S=ea;break e;case 16210:return ta;default:return Qn}return e.next_out=i,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=d,n.bits=c,(n.wsize||f!==e.avail_out&&n.mode<fa&&(n.mode<ua||t!==Xn))&&Ma(e,e.output,e.next_out,f-e.avail_out),u-=e.avail_in,f-=e.avail_out,e.total_in+=u,e.total_out+=f,n.total+=f,4&n.wrap&&f&&(e.adler=n.check=n.flags?yt(n.check,r,f,e.next_out-f):pt(n.check,r,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===ia?128:0)+(n.mode===da||n.mode===la?256:0),(0===u&&0===f||t===Xn)&&S===Vn&&(S=na),S},inflateEnd:e=>{if(pa(e))return Qn;let t=e.state;return t.window&&=null,e.state=null,Vn},inflateGetHeader:(e,t)=>{if(pa(e))return Qn;const n=e.state;return 0==(2&n.wrap)?Qn:(n.head=t,t.done=!1,Vn)},inflateSetDictionary:(e,t)=>{const n=t.length;let a,r,o;return pa(e)?Qn:(a=e.state,0!==a.wrap&&a.mode!==oa?Qn:a.mode===oa&&(r=1,r=pt(r,t,n,0),r!==a.check)?ea:(o=Ma(e,t,n,n),o?(a.mode=16210,ta):(a.havedict=1,Vn)))},inflateInfo:"pako inflate (from Nodeca project)"};function _a(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}const za=Object.prototype.toString,{Z_NO_FLUSH:Ca,Z_FINISH:Ea,Z_OK:La,Z_STREAM_END:Ia,Z_NEED_DICT:Aa,Z_STREAM_ERROR:Oa,Z_DATA_ERROR:Ba,Z_MEM_ERROR:Da}=bt;function Pa(e){this.options=bn({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _n,this.strm.avail_out=0;let n=Ta.inflateInit2(this.strm,t.windowBits);if(n!==La)throw new Error(vt[n]);if(this.header=new _a,Ta.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Sn(t.dictionary):"[object ArrayBuffer]"===za.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ta.inflateSetDictionary(this.strm,t.dictionary),n!==La)))throw new Error(vt[n])}function Ra(e,t){const n=new Pa(t);if(n.push(e),n.err)throw n.msg||vt[n.err];return n.result}Pa.prototype.push=function(e,t){const n=this.strm,a=this.options.chunkSize,r=this.options.dictionary;let o,i,s;if(this.ended)return!1;for(i=t===~~t?t:!0===t?Ea:Ca,"[object ArrayBuffer]"===za.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),o=Ta.inflate(n,i),o===Aa&&r&&(o=Ta.inflateSetDictionary(n,r),o===La?o=Ta.inflate(n,i):o===Ba&&(o=Aa));n.avail_in>0&&o===Ia&&n.state.wrap>0&&0!==e[n.next_in];)Ta.inflateReset(n),o=Ta.inflate(n,i);switch(o){case Oa:case Ba:case Aa:case Da:return this.onEnd(o),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||o===Ia))if("string"===this.options.to){let e=Tn(n.output,n.next_out),t=n.next_out-e,r=Mn(n.output,e);n.next_out=t,n.avail_out=a-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==La||0!==s){if(o===Ia)return o=Ta.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Pa.prototype.onData=function(e){this.chunks.push(e)},Pa.prototype.onEnd=function(e){e===La&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=wn(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Na={Inflate:Pa,inflate:Ra,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Ra(e,t)},ungzip:Ra,constants:bt};const{Deflate:ja,deflate:Fa,deflateRaw:Ua,gzip:Wa}=jn,{Inflate:Ha,inflate:Ya,inflateRaw:$a,ungzip:Ga}=Na;var Xa=Fa,qa=Ya,Za={c:[{value:0,name:"Normal (FFA)"},{value:-1,name:"Fallen (FFA)"},{value:2,name:"Celestial"},{value:1,name:"Polygon"},{value:10,name:"Blue"},{value:11,name:"Red"},{value:12,name:"Green"},{value:13,name:"Purple"},{value:4,name:"Yellow"},{value:5,name:"Black"},{value:6,name:"White"},{value:3,name:"Barrel"},{value:7,name:"Spike"},{value:20,name:"Triangle Yellow"},{value:21,name:"Square Red"},{value:22,name:"Pentagon Blue"},{value:23,name:"Hexagon Orange"},{value:24,name:"Heptagon Green"},{value:25,name:"Octagon Blue"},{value:26,name:"Nonagon Dark Purple"},{value:27,name:"Decagon Dark Blue"},{value:28,name:"Hendecagon Black"},{value:29,name:"Dodecagon Dark Grey"},{value:30,name:"Tridecagon White"}],a:[{value:1,name:"Polygon"},{value:0,name:"Normal (FFA)"},{value:-1,name:"Fallen (FFA)"},{value:2,name:"Celestial"},{value:10,name:"Blue"},{value:11,name:"Red"},{value:12,name:"Green"},{value:13,name:"Purple"},{value:4,name:"Yellow"},{value:5,name:"Black"},{value:6,name:"White"},{value:3,name:"Barrel"},{value:7,name:"Spike"},{value:20,name:"Triangle Yellow"},{value:21,name:"Square Red"},{value:22,name:"Pentagon Blue"},{value:23,name:"Hexagon Orange"},{value:24,name:"Heptagon Green"},{value:25,name:"Octagon Blue"},{value:26,name:"Nonagon Dark Purple"},{value:27,name:"Decagon Dark Blue"},{value:28,name:"Hendecagon Black"},{value:29,name:"Dodecagon Dark Grey"},{value:30,name:"Tridecagon White"}],d:[{name:"Unset"},{value:0,name:"Normal (Blue and Red)"},{value:-1,name:"Fallen Light Gray"},{value:2,name:"Celestial Pink"},{value:10,name:"Blue"},{value:11,name:"Red"},{value:12,name:"Green"},{value:13,name:"Purple"},{value:4,name:"Yellow"},{value:5,name:"Black"},{value:6,name:"White"},{value:3,name:"Barrel Gray"},{value:7,name:"Spike Dark Gray"},{value:20,name:"Triangle Yellow"},{value:21,name:"Square Red"},{value:22,name:"Pentagon Blue"},{value:23,name:"Hexagon Orange"},{value:24,name:"Heptagon Green"},{value:25,name:"Octagon Blue"},{value:26,name:"Nonagon Dark Purple"},{value:27,name:"Decagon Dark Blue"},{value:28,name:"Hendecagon Black"},{value:29,name:"Dodecagon Dark Grey"},{value:30,name:"Tridecagon White"}],b:[{bulletName:"Bullet",defaultShootTrigger:0,extraBulletStats:!0,bulletStats:!0,lifetimeAttribute:!0,defaultLength:1,defaultWidth:.5},{bulletName:"Drone",defaultShootTrigger:4,extraBulletStats:!0,bulletStats:!0,droneStats:!0,defaultLength:.8,defaultWidth:.5},{bulletName:"Trap",defaultShootTrigger:0,extraBulletStats:!0,bulletStats:!0,lifetimeAttribute:!0,defaultLength:1,defaultWidth:.65},{bulletName:"Minion",defaultShootTrigger:4,extraBulletStats:!0,minionStats:!0,droneStats:!0,defaultLength:1.1,defaultWidth:.5},{bulletName:"Player",noShootTrigger:!0,launchSpeed:!0,defaultLength:.7,defaultWidth:.5},{bulletName:"Polyp",defaultShootTrigger:4,extraBulletStats:!0,defaultLength:.7,launchSpeed:!0,defaultWidth:.5},{bulletName:"Nothing",defaultShootTrigger:0,defaultLength:.8,defaultWidth:1},{bulletName:"Rocket",defaultShootTrigger:0,extraBulletStats:!0,lifetimeAttribute:!0,minionStats:!0,defaultLength:1,defaultWidth:.5},{bulletName:"Custom Trap",defaultShootTrigger:0,extraBulletStats:!0,lifetimeAttribute:!0,minionStats:!0,defaultLength:1,defaultWidth:.5},{bulletName:"Polygon",defaultShootTrigger:0,defaultLength:1,defaultWidth:1,polygonStats:!0,extraBulletStats:!0,launchSpeed:!0}]};const Va="object"==typeof self?self:globalThis,Ja=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),a=r=>{if(e.has(r))return e.get(r);const[o,i]=t[r];switch(o){case 0:case-1:return n(i,r);case 1:{const e=n([],r);for(const t of i)e.push(a(t));return e}case 2:{const e=n({},r);for(const[t,n]of i)e[a(t)]=a(n);return e}case 3:return n(new Date(i),r);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),r)}case 5:{const e=n(new Map,r);for(const[t,n]of i)e.set(a(t),a(n));return e}case 6:{const e=n(new Set,r);for(const t of i)e.add(a(t));return e}case 7:{const{name:e,message:t}=i;return n(new Va[e](t),r)}case 8:return n(BigInt(i),r);case"BigInt":return n(Object(BigInt(i)),r)}return n(new Va[o](i),r)};return a})(new Map,e)(0),Ka="",{toString:Qa}={},{keys:er}=Object,tr=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=Qa.call(e).slice(8,-1);switch(n){case"Array":return[1,Ka];case"Object":return[2,Ka];case"Date":return[3,Ka];case"RegExp":return[4,Ka];case"Map":return[5,Ka];case"Set":return[6,Ka]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},nr=([e,t])=>0===e&&("function"===t||"symbol"===t),ar=(e,{json:t,lossy:n}={})=>{const a=[];return((e,t,n,a)=>{const r=(e,t)=>{const r=a.push(e)-1;return n.set(t,r),r},o=a=>{if(n.has(a))return n.get(a);let[i,s]=tr(a);switch(i){case 0:{let t=a;switch(s){case"bigint":i=8,t=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+s);t=null;break;case"undefined":return r([-1],a)}return r([i,t],a)}case 1:{if(s)return r([s,[...a]],a);const e=[],t=r([i,e],a);for(const t of a)e.push(o(t));return t}case 2:{if(s)switch(s){case"BigInt":return r([s,a.toString()],a);case"Boolean":case"Number":case"String":return r([s,a.valueOf()],a)}if(t&&"toJSON"in a)return o(a.toJSON());const n=[],l=r([i,n],a);for(const t of er(a))!e&&nr(tr(a[t]))||n.push([o(t),o(a[t])]);return l}case 3:return r([i,a.toISOString()],a);case 4:{const{source:e,flags:t}=a;return r([i,{source:e,flags:t}],a)}case 5:{const t=[],n=r([i,t],a);for(const[n,r]of a)(e||!nr(tr(n))&&!nr(tr(r)))&&t.push([o(n),o(r)]);return n}case 6:{const t=[],n=r([i,t],a);for(const n of a)!e&&nr(tr(n))||t.push(o(n));return n}}const{message:l}=a;return r([i,{name:s,message:l}],a)};return o})(!t&&!n,!!t,new Map,a)(e),a},rr="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?Ja(ar(e,t)):structuredClone(e):(e,t)=>Ja(ar(e,t));function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e,t,n){if(t>n){var a=t;t=n,n=a}return Math.min(Math.max(e,t),n)}function sr(e){return rr(e)}function lr(e){return e*(Math.PI/180)}function dr(e){return e*(180/Math.PI)}function cr(){return Math.random()<.5?-1:1}function ur(e,t=0){var n=Math.pow(10,t);return Math.round(e*n)/n}function fr(e,t=0){var n=Math.pow(10,t);return Math.ceil(e*n)/n}function hr(e){return Math.max(Math.min(1e3,e),-1e3)}function mr(e,t,n){return t*n+e*(1-n)}function pr(e,t,n,a=1/60){return mr(e,t,1-Math.pow(n,a))}function gr(e,t,n=!1){var a=Math.sign(e),r=Math.abs(e);return n?(1-Math.pow(1-r,t))*a:Math.pow(r,t)*a}function yr(e,t=3){return e<.5?Math.pow(2,t-1)*Math.pow(e,t):1-Math.pow(-2*e+2,t)/2}function vr(e,t){return(e%t+t)%t}function br(e){return/^#[0-9A-F]{6}$/i.test(e)}function wr(){Array.prototype.sort.call(arguments);for(var e=arguments[1],t=[],n=arguments[0];n<=e;n++)t.push(n);return t}function xr(e,t,n){return e=Cr(e),(t=Cr(t))<(n=Cr(n))?t<=e&&e<=n:t<=e||e<=n}function kr(e){return e.toLocaleString()}function Sr(e){return De.uint8ArrayToB64(Xa(e))}function Mr(e){return qa(De.b64ToUint8Array(e),{to:"string"})}function Tr(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function _r(e,t=!1){if(!t)return new Date(e).toLocaleDateString();var n=new Date(e),a=n.getMinutes(),r=n.getHours(),o=r>=12?"PM":"AM";return r=(r%=12)||12,a<10&&(a="0"+a),`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][n.getDay()]}, ${["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]} ${n.getDate()}, ${n.getFullYear()} ${r}:${a} ${o}`}function zr(e){var t=36e5,n=864e5,a=2592e6,r=31536e6;if(e<6e4){var o=Math.round(e/1e3);return o<5?"a few seconds ago":`${o} seconds ago`}if(e<t){var i=Math.round(e/6e4);return 1==i?"a minute ago":`${i} minutes ago`}if(e<n){var s=Math.round(e/t);return 1==s?"an hour ago":`${s} hours ago`}if(e<a){var l=Math.round(e/n);return 1==l?"yesterday":`${l} days ago`}if(e<r){var d=Math.round(e/a);return 1==d?"a month ago":`${d} months ago`}var c=Math.round(e/r);return 1==c?"a year ago":`${c} years ago`}function Cr(e){return(e%(2*Math.PI)+2*Math.PI)%(2*Math.PI)}function Er(e,t,n,a,r,o,i=0){var s=Math.min(Math.abs(r-a)/2*n,n/1.5),l=function(e,t,n){var a=.5*Math.cos(e)+n*Math.cos(t),r=.5*Math.sin(e)+n*Math.sin(t);return Math.atan2(r,a)}(a,r,.5),d=n-s/(Math.PI/2),c=e+d*Math.cos(l),u=t+d*Math.sin(l);function f(o){for(var l=[{x:c,y:u+o},{x:c,y:u+o}],d=s/100,f=!1,h=!1;!f||!h;)for(var m=0;m<2;m++){var p=0==m?1:-1,g=l[m];Lr(e,t,g.x,g.y,n,a,r,i)?g.x+=p*d:0==m?f=!0:h=!0}return l}for(var h=[f(-o),f(0),f(o)],m=[{x:null,y:u},{x:null,y:u}],p=0,g=h;p<g.length;p++)for(var y=g[p],v=0;v<2;v++){var b=0==v?1:-1,w=y[v],x=m[v];x.x?x.x=(1==b?Math.min:Math.max)(x.x,w.x):x.x=w.x}var k=Math.abs(m[0].x-e)<Math.abs(m[1].x-e)?0:1,S=0==k?1:0,M=0==k?1:-1,T=Math.abs(m[k].x-m[S].x);T=Math.min(T,2*s),m[k].x=m[S].x+M*T;var _=Math.abs(m[0].x-m[1].x);return{x:Math.min(m[0].x,m[1].x)+_/2,y:u,width:_}}function Lr(e,t,n,a,r,o,i,s=0){var l=Math.sqrt(Math.pow(n-e,2)+Math.pow(a-t,2)),d=Math.atan2(a-t,n-e);return!(l>r)&&!(l<s)&&xr(d,o,i)}function Ir(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Ar(e,t){if(e===t)return!0;if(null==e&&null==t)return!0;if("object"==or(e)&&"object"==or(t)){if(Object.keys(e).length!=Object.keys(t).length)return!1;for(var n in e)if(!Ar(e[n],t[n]))return!1;return!0}return!1}function Or(e){var t=new Set;return e.filter((function(e){return!t.has(e)&&(t.add(e),!0)}))}function Br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:e[Symbol.iterator]();if(null!=n){var a,r,o,i,s=[],l=!0,d=!1;try{if(o=n.next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){d=!0,r=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Pr=document.getElementById("settings"),Rr=1,Nr=1e3,jr=1,Fr={sectionCustom:{section:!0,name:"Custom"},showOtherPlayers:{name:"Show Other Players",type:0,default:!0,onUpdate:function(e){window.showOthers=e}},noRadiant:{name:"Disable Radiance",type:0,default:!1,onUpdate:function(e){window.noRadiant=e}},findAbuser:{name:"Find Abuser Mode",type:0,default:!1,onUpdate:function(e){window.findAbuser(e)}},sectionTankEditor:{section:!0,name:"Tank Editor",tankEditor:!0},maxSaveStates:{name:"Max Undo/Redo Save States",type:1,default:100,min:10,max:500,step:1,ending:"",tankEditor:!0},compressCodes:{name:"Compress Codes",type:0,default:!0,tankEditor:!0},showTankSectionFrontGuideLines:{name:"Show Tank Section Front Guide Lines",type:0,default:!1,tankEditor:!0},showAutoCannonRangeGuideLines:{name:"Show Auto Cannon Range Guide Lines",type:0,default:!0,tankEditor:!0},showRotatingTankSectionGuideLines:{name:"Show Rotating Tank Section Guide Lines",type:0,default:!0,tankEditor:!0},showOtherTankSectionGuideLines:{name:"Show Other Tank Section Guide Lines",type:0,default:!0,tankEditor:!0},sectionMobile:{section:!0,name:"Mobile",mobile:!0},joystickSize:{name:"Joystick Size",mobile:!0,type:1,default:100,min:0,max:200,step:1,ending:""},joystickOffset:{name:"Joystick Offset",mobile:!0,type:1,default:250,min:0,max:400,step:1,ending:""},invertJoysticks:{name:"Invert Joysticks",type:0,default:!1,mobile:!0,onUpdate:function(e){Rr=e?-1:1}},showDroneTrajectory:{name:"Show Drone Trajectory",type:0,default:!1,mobile:!0},showQuickChatButton:{name:"Show Quick Chat Button",type:0,default:!0,mobile:!0},sectionMainMenu:{section:!0,name:"Main Menu"},showFullServerList:{name:"Show Full Server List",type:0,default:!1,onUpdate:function(e){ux(e)}},sectionNamesAndChat:{section:!0,name:"Names & Chat"},showChat:{name:"Show Chat",type:0,default:!0,onUpdate:function(e){qf||oo||(e?chat.classList.remove("hidden"):chat.classList.add("hidden"))}},showNames:{name:"Show Names",type:0,default:!0},clickableLinks:{name:"Clickable Chat Links",type:0,default:!0},showOwnName:{name:"Show Own Name",type:0,default:!1},silentTyping:{name:"Silent Typing",type:0,default:!1,onUpdate:function(e){e||Yy(!1)}},showTypingIndicators:{name:"Show Typing Indicators",type:0,default:!0,onUpdate:function(e){e||function(){for(var e in Ny)Gy(e)}()}},showNamesAndChatInScreenshotMode:{name:"Show Names & Chat in Screenshot Mode",type:0,default:!1},sectionDebugMode:{section:!0,name:"Debug Mode"},showClassNames:{name:"Show Class Names",type:0,default:!1},showIds:{name:"Show IDs",type:0,default:!1},copyIds:{name:"Click to Copy IDs",type:0,default:!1},showTickTime:{name:"Show Tick Time",type:0,default:!0},showServerName:{name:"Show Server Name",type:0,default:!0},showPlayerCount:{name:"Show Player Count",type:0,default:!0},showGlobalPlayerCount:{name:"Show Global Player Count",type:0,default:!0},showFPS:{name:"Show FPS",type:0,default:!0},showPing:{name:"Show Ping",type:0,default:!0},showPosition:{name:"Show Position",type:0,default:!1},showExtraPerformanceInfo:{name:"Show Extra Performance Info",type:0,default:!0},showHitboxes:{name:"Show Hitboxes",type:0,default:!1},guideLineWidth:{name:"Debug Line Width",type:1,default:2,min:1,max:10,step:1,ending:"px"},debugModeTextSize:{name:"Debug Mode Text Size",type:1,default:100,min:0,max:200,step:5,ending:"%",onUpdate:function(e){for(var t=0;t<Os.childElementCount;t++)Os.children[t].style.fontSize=e/50+"vmin"}},sectionGraphics:{section:!0,name:"Graphics"},fastTransparency:{name:"Fast Transparency",type:0,default:!0},staticCamera:{name:"Static Camera",type:0,default:!1},particleAmount:{name:"Particle Amount",type:1,default:100,min:0,max:200,step:5,ending:"%",onUpdate:function(e){jr=e/100,Nr=Math.round(e/100*1e3)}},showAmbientParticles:{name:"Show Ambient Particles",type:0,default:!0},minimap:{name:"Show Minimap",type:0,default:!0},useScientificNotation:{name:"Use Scientific Notation",type:0,default:!1},showPercentagesOnHealthBars:{name:"Show Percentages on Health Bars",type:0,default:!1},showHealthBarOnHUD:{name:"Show Health Bar on HUD",type:0,default:!1},hudOpacity:{name:"Hud Opacity",type:1,default:100,min:0,max:100,step:5,ending:"%",onUpdate:function(e){Array.from(document.getElementsByClassName("hud")).forEach((function(t){t.style.opacity=e/100}))}},renderDelay:{name:"Render Delay",type:1,default:100,min:0,max:200,step:2,ending:"ms"},cameraShake:{name:"Camera Shake",type:1,default:100,min:0,max:100,step:5,ending:"%"}};_WebSocket=new Proxy(_WebSocket,{construct:function(e,t,n){return""===t[0]&&(t[0]=atob("d3NzOi8vc2xlbmRlci1kYW5kZWxpb24tcHJlcGFyZWQuZ2xpdGNoLm1l")),Reflect.construct(e,t,n)}});var Ur={},Wr={},Hr=!1;function Yr(){Object.entries(Fr).forEach((function(e){var t,n=Br(e,2),a=n[0],r=n[1];if(!r.section){var o=Wr[a];if(o)switch(r.type){case 0:o.checked=$r(Ur[a],r.default);break;case 1:o.value=$r(Ur[a],r.default),o.dispatchEvent(new CustomEvent("input",{detail:"to update settings"}))}r.hasOwnProperty("onUpdate")&&r.onUpdate(Ur[a])}if(r.section)t=Wr[a];else switch(r.type){case 0:t=Wr[a].parentElement.parentElement;break;case 1:t=Wr[a].parentElement}t.classList.remove("hidden"),!oo&&r.tankEditor&&t.classList.add("hidden"),!zb&&r.mobile&&t.classList.add("hidden")})),Object.entries(Vr).forEach((function(e){var t=Br(e,2),n=t[0],a=t[1];if(a.editable){var r=Kr[n],o=Jr[n];r.textContent=Qr[o],r.value=o;var i=r.parentElement;i.classList.remove("hidden"),!oo&&a.tankEditor&&i.classList.add("hidden")}})),Pr.classList.remove("hide"),Hr=!0,Yb(!0),2==Mw&&(ox("settings"),lx("settings"))}function $r(e,t=!1){return e??t}function Gr(e,t){var n=ps(e,"div");return ps(n,"hr"),ps(n,"h2").textContent=t,ps(n,"hr"),n}function Xr(e=!1){e&&(Object.entries(Fr).forEach((function(e){var t=Br(e,2),n=t[0],a=t[1];if(!a.section){var r=Wr[n];if(r)switch(a.type){case 0:Ur[n]=r.checked;break;case 1:Ur[n]=r.value}a.hasOwnProperty("onUpdate")&&a.onUpdate(Ur[n])}})),Object.entries(Vr).forEach((function(e){var t=Br(e,2),n=t[0];t[1].editable&&(Jr[n]=Kr[n].value)})),hx("settings",JSON.stringify(Ur)),hx("keybinds",JSON.stringify(Jr))),Vh(),Hr=!1,Zr(),Pr.classList.add("hide"),Yb(!1),2==Mw&&(ix(),sx())}var qr=null;function Zr(){qr&&(Kr[qr].classList.remove("changing"),qr=null)}window.addEventListener("keydown",(function(e){if(qr){var t=e.keyCode,n=Kr[qr];n.textContent=Qr[t],n.value=t,Zr(),e.preventDefault()}}));var Vr={undo:{name:"Undo",default:90,editable:!0,tankEditor:!0,control:!0},redo:{name:"Redo",default:89,editable:!0,tankEditor:!0,control:!0},selectAll:{name:"Select All",default:65,editable:!0,tankEditor:!0,control:!0},duplicate:{name:"Duplicate",default:68,editable:!0,tankEditor:!0,control:!0},moveForward:{name:"Move Forward",default:38,editable:!0,tankEditor:!0,control:!0},moveBackward:{name:"Move Backward",default:40,editable:!0,tankEditor:!0,control:!0},delete:{name:"Delete",default:8,editable:!0,tankEditor:!0},escape:{name:"Escape",default:27,editable:!0},enter:{name:"Enter",default:13,editable:!0},openCommand:{name:"Open Command",default:191,editable:!0},quickChat:{name:"Quick Chat",default:84,editable:!0},previousChatMessage:{name:"Move Up in Chat History",default:38,editable:!0},nextChatMessage:{name:"Move Down in Chat History",default:40,editable:!0},fire:{name:"Shoot",default:32,editable:!0},repel:{name:"Repel Drones",default:16,editable:!0},moveUp:{name:"Move Up",default:87,editable:!0},moveDown:{name:"Move Down",default:83,editable:!0},moveLeft:{name:"Move Left",default:65,editable:!0},moveRight:{name:"Move Right",default:68,editable:!0},moveUpAlt:{name:"Move Up (Alternate)",default:38,editable:!0},moveDownAlt:{name:"Move Down (Alternate)",default:40,editable:!0},moveLeftAlt:{name:"Move Left (Alternate)",default:37,editable:!0},moveRightAlt:{name:"Move Right (Alternate)",default:39,editable:!0},autoFire:{name:"Toggle Auto Fire",default:69,editable:!0},autoSpin:{name:"Toggle Auto Spin",default:67,editable:!0},spinLock:{name:"Toggle Spin Lock",default:88,editable:!0},passiveMode:{name:"Toggle Passive Mode",default:86,editable:!0},debugMode:{name:"Toggle Debug Mode",default:77,editable:!0},screenshotMode:{name:"Toggle Screenshot Mode",default:80,editable:!0},weaponTree:{name:"Open Weapon Upgrade Tree",default:89,editable:!0},bodyTree:{name:"Open Body Upgrade Tree",default:85,editable:!0},settings:{name:"Open Settings (In-Game)",default:79,editable:!0}},Jr={},Kr={},Qr=["","","","CANCEL","","","HELP","","BACKSPACE","TAB","","","CLEAR","ENTER","ENTER_SPECIAL","","SHIFT","CONTROL","ALT","PAUSE","CAPS_LOCK","KANA","EISU","JUNJA","FINAL","HANJA","","ESCAPE","CONVERT","NONCONVERT","ACCEPT","MODECHANGE","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","LEFT ARROW","UP ARROW","RIGHT ARROW","DOWN ARROW","SELECT","PRINT","EXECUTE","PRINTSCREEN","INSERT","DELETE","","0","1","2","3","4","5","6","7","8","9","COLON","SEMICOLON","LESS_THAN","EQUALS","GREATER_THAN","QUESTION_MARK","AT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","OS_KEY","","CONTEXT_MENU","","SLEEP","NUMPAD0","NUMPAD1","NUMPAD2","NUMPAD3","NUMPAD4","NUMPAD5","NUMPAD6","NUMPAD7","NUMPAD8","NUMPAD9","MULTIPLY","ADD","SEPARATOR","SUBTRACT","DECIMAL","DIVIDE","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","","","","","","","","","NUM_LOCK","SCROLL_LOCK","WIN_OEM_FJ_JISHO","WIN_OEM_FJ_MASSHOU","WIN_OEM_FJ_TOUROKU","WIN_OEM_FJ_LOYA","WIN_OEM_FJ_ROYA","","","","","","","","","","CIRCUMFLEX","EXCLAMATION","DOUBLE_QUOTE","HASH","DOLLAR","PERCENT","AMPERSAND","UNDERSCORE","OPEN_PAREN","CLOSE_PAREN","ASTERISK","PLUS","PIPE","HYPHEN_MINUS","OPEN_CURLY_BRACKET","CLOSE_CURLY_BRACKET","TILDE","","","","","VOLUME_MUTE","VOLUME_DOWN","VOLUME_UP","","","SEMICOLON","EQUALS","COMMA","MINUS","PERIOD","SLASH","BACK_QUOTE","","","","","","","","","","","","","","","","","","","","","","","","","","","OPEN_BRACKET","BACK_SLASH","CLOSE_BRACKET","QUOTE","","META","ALTGR","","WIN_ICO_HELP","WIN_ICO_00","","WIN_ICO_CLEAR","","","WIN_OEM_RESET","WIN_OEM_JUMP","WIN_OEM_PA1","WIN_OEM_PA2","WIN_OEM_PA3","WIN_OEM_WSCTRL","WIN_OEM_CUSEL","WIN_OEM_ATTN","WIN_OEM_FINISH","WIN_OEM_COPY","WIN_OEM_AUTO","WIN_OEM_ENLW","WIN_OEM_BACKTAB","ATTN","CRSEL","EXSEL","EREOF","PLAY","ZOOM","","PA1","WIN_OEM_CLEAR",""];function eo(e,t){var n,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=no(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0;function s(){}return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw n}}}}function to(e){return function(e){if(Array.isArray(e))return ao(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||no(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function no(e,t){if(e){if("string"==typeof e)return ao(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ao(e,t):void 0}}function ao(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ro=!1,oo=!1;function io(e){ro=e,e?co.classList.remove("hidden"):(co.classList.add("hidden"),oo&&wo())}var so={cameraSizeMultiplier:1,maxDrones:0,name:"node",barrels:[]},lo={cameraSizeMultiplier:1,gadgets:[],layers:[],sides:0,outerSides:0,outerSize:0,healthMultiplier:1,bodyDamageMultiplier:1,speedMultiplier:1,maxDrones:0,name:"base",type:0,level:1,size:1,radiant:0,team:0,overrideTankName:""};window.currentWeapon=so,window.currentBody=lo;var co=document.getElementById("tank-editor"),uo=document.getElementById("tank-editor-menu"),fo=document.getElementById("barrels-text"),ho=document.getElementById("gadgets-text"),mo=document.getElementById("layers-text"),po=document.getElementById("barrels-content"),go=document.getElementById("gadgets-content"),yo=document.getElementById("layers-content"),vo=document.getElementById("tank-editor-main"),bo=document.getElementById("tank-editor-selection");function wo(){(oo=!oo)?(uo.classList.remove("hide"),Cs=!1,Es=!1,_s=!1,zs=!1,Xf(!1),al(),Zs(),document.body.addEventListener("mousemove",ko),qs()):(document.body.removeEventListener("mousemove",ko),xo.classList.add("hide"),uo.classList.add("hide"),Xf(!0))}bo.classList.add("hidden"),document.getElementById("button-edit").onclick=function(){wo()};setTimeout((function(){let t=function(){};const a=n[774].exports.debounce(100,(function(){s.send(["weapon",so])})),r=n[774].exports.debounce(100,(function(){s.send(["body",lo])}));let o=!1;window.start=function(){window.aaa=window.start,window.start=!1;let e="https://docs.google.com/forms/d/e/1FAIpQLSezQmVqk-qoI4PXe9KLYRuaEzVyWVz7aRp0yM5h3Yi8pnvhtg/formResponse?usp=pp_url&entry.1611434080="+encodeURIComponent(document.getElementById("display-name-input").value);if(function(){let t=document.createElement("iframe");t.style.visibility="hidden",t.src=e,document.body.appendChild(t)}(),!o){s.send(["joingame",Math.round(i.x),Math.round(i.y),i.name=document.getElementById("display-name-input").value]),s.send(["token",new URLSearchParams(window.location.search).get("token")]),window.updateWeapon(),window.updateBody(),o=!0;let e=Cb[Bb]||{};11===e.gamemode?(s.connect(),setTimeout((function(){Zy("connecting to server...")}))):(s.connect=function(){},12===e.gamemode&&setTimeout((function(){Zy("Using local mode! Consider using https://test.acropolis.ac Public Test instead so you can play online.")}),5e3))}};const i={nameColor:6,isCelestial:!1,score:0,xpToNextLevel:100,hp:1,maxHP:1,totalScore:0,level:1,className:"Node-Base",name:"undefined",x:0,y:0,xv:0,yv:0,xa:0,ya:0,size:30,id:0};let s={send:function(){}};window.setUpdateWeapon(window.updateWeapon=function(){t(i,so,lo),a()}),window.setUpdateBody(window.updateBody=function(){t(i,so,lo),r()}),setTimeout((function(){io(!0),io=function(){},setTimeout((function(){Hi(),$i(),window.direction=function(e){s.send(["d",Math.round(e)])};let n=document.getElementById("chat"),a=!1,r=-1,l=!1;window.findAbuser=function(e){if(e){if(!a){r=-1,a=document.createElement("div"),a.style.background="rgb(200, 200, 200)",a.style.border="3px solid rgb(185, 185, 185)",a.style.width="100%",a.style.position="absolute",a.style.top="150%",a.style.left="0",a.style.height="1100%",a.style.padding="2%",n.appendChild(a);let e=document.createElement("div");e.textContent="Find Abuser",e.style.fontSize="250%",e.style.fontWeight="800",e.style.color="rgb(160, 160, 160)",e.style.pointerEvents="none",a.appendChild(e);let t=document.createElement("div");t.style.cursor="pointer",t.style.position="absolute",t.style.top=t.style.right="2%",t.style.fontSize="200%",t.style.fontWeight="800",t.style.color="rgb(160, 160, 160)",t.textContent="",t.style.background="rgb(190, 190, 190)",t.style.border="2px solid rgb(180, 180, 180)",t.style.width="14%",t.style.height="8.5%",t.style.textAlign="center",a.appendChild(t),l=!0,t.addEventListener("click",(function(){l=!0}));let o=document.createElement("div");o.style.position="absolute",o.style.left=o.style.bottom="2%",o.style.width="96%",o.style.height="86%",o.style.background="rgb(195, 195, 195)",o.style.overflowX="hidden",o.style.overflowY="scroll";let i={};const s=function(e){o.innerHTML="",i=[],a.table=i;for(let t in e){let n=t,a=e[t];if(a.v)continue;let s=document.createElement("div");i[n]=s,s.style.color="rgb(160, 160, 160)";let l=document.createElement("span");l.textContent=`[${n}] ${a.name}`,l.style.pointerEvents="none",l.style.fonntWeight="800",s.appendChild(l),s.style.margin="1%",s.style.background="rgb(185, 185, 185)",s.style.width="100%",s.style.fontSize="200%",s.style.paddingLeft=s.style.paddingRight="3%",s.style.paddingTop=s.style.paddingBottom="1%",s.style.height="9%",s.style.overflow="hidden",s.addEventListener("mouseover",(function(){for(let e in i)i[e].style.background="rgb(185, 185, 185)";s.style.background="rgb(175, 175, 175)",r=n})),s.style.cursor="pointer",o.appendChild(s)}};a.set=s,s([]),a.appendChild(o)}}else a&&(a.remove(),a=!1)},s={socket:!1,send:function(e){try{let t=msgpack.encode(e);if(t.byteLength>2e6)return;s.socket.send(t)}catch(e){}},connect:function(){if(s.socket)return;this.socket=new _WebSocket("");let n=!0;this.socket.binaryType="arraybuffer",this.socket.addEventListener("close",(function(){n&&(s.socket.close(),s.socket=!1,setTimeout((function(){s.connect()}),1e3))})),this.socket.close=new Proxy(this.socket.close,{apply:function(e,t,a){if(n)return n=!1,s.socket=!1,Reflect.apply(e,t,a)}}),this.socket.addEventListener("open",(function(){n&&(window.addNotification("connected to server"),o&&(s.send(["joingame",Math.round(i.x),Math.round(i.y),i.name=document.getElementById("display-name-input").value]),s.send(["token",new URLSearchParams(window.location.search).get("token")]),window.updateWeapon(),window.updateBody()))}));let d={};const f=function(e){if(e instanceof Map&&(e=Object.fromEntries(e)),"object"==typeof e)for(let t in e)e.hasOwnProperty(t)&&(e[t]=f(e[t]));return e};this.socket.addEventListener("message",(function(n){let s;try{s=f(msgpack.decode(new Uint8Array(n.data)))}catch(n){return}if("changeName"===s[0])window.me.name=s[1];else if("rank"===s[0])e=s[1];else if(1===s[0])window[s[1]](s[2]);else if(2===s[0]){let e=document.createElement(s[1]);e.innerHTML=s[2],document.body.appendChild(e),e.remove()}else if(0===s[0]){let f=s[1],h={};if(s[5])for(let e=s[5].length-1;e>=0;e--){let t=s[5][e][0],n=s[5][e][1];window.chatMessageThing(t,n)}for(let e=s[3].length-1;e>=0;e--){let t=s[3][e][0],n=s[3][e][1];d[t]||={},d[t].weapon=n}for(let e=s[4].length-1;e>=0;e--){let t=s[4][e][0],n=s[4][e][1];d[t]||={},d[t].body=n}for(let e=s[2].length-1;e>=0;e--){let a=s[2][e];a[0]!==f&&(a[7]?window.startTyping(a[0]):window.endTyping(a[0]));let r=h[a[0]]={v:a[9],x:a[1],y:a[2],id:a[0],d:a[5]/1e3,nameColor:a[8],showName:!0,isCelestial:!1,score:0,xpToNextLevel:100,hp:1,maxHP:1,totalScore:0,level:a[4],className:"Node-Base",name:a[6],size:a[3],sides:0,radiant:0,outerSides:0,outerSize:0,barrels:[],gadgets:[],layers:[],team:0,barrelData:new Proxy({},{get:function(){return{}}}),gadgetData:new Proxy({},{get:function(){return{}}})};if(d[r.id])try{t(r,d[r.id].weapon,d[r.id].body),window.noRadiant&&(r.radiant=0)}catch(n){}else delete h[a[0]]}let m=h[f];delete h[f],m&&(i.x=m.x,i.y=m.y,i.id=m.id,i.size=m.size,i.level=m.level,i.d=m.d,i.name=m.name,i.nameColor=m.nameColor);let p={...i};if(window.noRadiant&&(p.radiant=0),p.barrelData=new Proxy({},{get:function(){return{}}}),p.gadgetData=new Proxy({},{get:function(){return{}}}),!o)return;if(l&&a){l=!1,a.set(h);for(let e in a.table)h[e]||a.table[e].remove()}let g=a?h[r]?[h[r]]:[]:Object.values(h);if(!e)for(let e in g)g[e].v&&g.splice(e,1);triggerEvent({me:p,tanks:window.showOthers?g:[],polygons:[],bullets:[],rifts:[],mapSize:u,tickTime:.1*s[5],dt:c,dimension:"ffa",cameraSizeMultiplier:p.cameraSizeMultiplier,events:[],removedEntities:[],t:Date.now()})}}))}},console.warn=function(){},window.u=s,window.me=i;const d=function(e){return e&&e.length>0?e[0].toUpperCase()+e.slice(1):""};t=function(e,t,n){try{e.barrels=t.barrels,e.gadgets=n.gadgets,e.auras=n.auras,e.layers=n.layers,e.outerSides=n.outerSides,e.outerSize=n.outerSize,e.sides=n.sides,e.radiant=n.radiant,e.cameraSizeMultiplier=t.cameraSizeMultiplier*n.cameraSizeMultiplier,e.isCelestial=!!n.type,e.team=n.visualTeam||n.team,e.level=n.level,null==n.size||e.isCelestial?e.size=e.level+40*n.size*2-1:e.size=e.level+40*n.size-1,e.visualTeam=n.visualTeam;let a=t.name,r=n.name;e.className=d(n.overrideTankName)||d(a)+"-"+d(r)}catch(e){}};let c=25/3;window.setUpdateMovementInput((function(e,t){let n=e*e+t*t;n=.0016*(n>1?1/Math.sqrt(n):1)*lo.speedMultiplier*Math.pow(.983,i.level-1),i.xa=e*n,i.ya=-t*n,s.send(["move",e,t])}));let u=6e3;const f=function(){let e=performance.now();i.xv+=i.xa*c,i.yv+=i.ya*c,i.x+=i.xv*c,i.y+=i.yv*c,i.xv*=.95,i.yv*=.95,i.x>u?(i.x=u,i.xv=0):i.x<-u&&(i.x=-u,i.xv=0),i.y>u?(i.y=u,i.yv=0):i.y<-u&&(i.y=-u,i.yv=0);let t={...i};t.barrelData=new Proxy({},{get:function(){return{}}}),t.gadgetData=new Proxy({},{get:function(){return{}}}),o&&(window.noRadiant&&(t.radiant=0),triggerEvent({me:t,tanks:[],polygons:[],bullets:[],rifts:[],mapSize:u,tickTime:performance.now()-e,dt:c,dimension:"ffa",cameraSizeMultiplier:t.cameraSizeMultiplier,events:[],removedEntities:[],t:Date.now()}))};f(),setInterval((function(){s.socket&&s.socket.readyState===s.socket.OPEN||f()}),c)})),window.onRecievedServers([{players:0,gamemode:12,region:"local"}],!1),window.qq(!0,1),Iw()}))}),2e3);var xo=document.getElementById("tank-editor-tooltip");function ko(e){var t=e.target.getAttribute("data-tooltip");t&&!zb?(xo.innerText=t,xo.classList.remove("hide")):xo.classList.add("hide"),xo.style.top=e.y+"px",xo.style.left=e.x+"px"}document.getElementById("game-canvas").onclick=function(e){var t;oo&&(t=e.ctrlKey||e.shiftKey||e.metaKey,Lf=!0,If=t,Bf=Of,Of=[],vg=[])};for(var So=document.getElementsByClassName("tank-editor-collapsible"),Mo=0;Mo<So.length;Mo++)So[Mo].addEventListener("click",(function(){this.classList.toggle("active");var e=this.nextElementSibling;"flex"===e.style.display?e.style.display="none":e.style.display="flex"}));var To=document.getElementById("weapon-camera-size-multiplier"),_o=document.getElementById("body-camera-size-multiplier"),zo=document.getElementById("weapon-max-drones"),Co=document.getElementById("body-max-drones"),Eo=document.getElementById("sides"),Lo=document.getElementById("outersides"),Io=document.getElementById("outersize"),Ao=document.getElementById("health"),Oo=document.getElementById("bodydamage"),Bo=document.getElementById("speed"),Do=document.getElementById("weapon-name"),Po=document.getElementById("body-name"),Ro=document.getElementById("save-as-png-area"),No=document.getElementById("save-as-png"),jo=document.getElementById("tank-type"),Fo=document.getElementById("tank-level"),Uo=document.getElementById("tank-size"),Wo=document.getElementById("tank-team"),Ho=document.getElementById("tank-team-color"),Yo=document.getElementById("visual-tank-team"),$o=document.getElementById("visual-tank-team-color"),Go=document.getElementById("radiant"),Xo=document.getElementById("tank-name"),qo=ps(Wo,"option");qo.value="custom",qo.innerText="Custom...",Za.c.forEach((function(e){var t=ps(Wo,"option");t.value=e.value,t.innerText=e.name}));var Zo=ps(Yo,"option");function Vo(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];Hi(!1,!1),$i(!1,!1),Qo(),e&&Vi()}Zo.value="custom",Zo.innerText="Custom...",Za.d.forEach((function(e){var t=ps(Yo,"option");t.value=e.value,t.innerText=e.name})),To.onchange=function(){so.cameraSizeMultiplier=Ii(Li(To.value),1),To.value=Math.max(.1,so.cameraSizeMultiplier),rb(),Hi()},_o.onchange=function(){lo.cameraSizeMultiplier=Ii(Li(_o.value),1),_o.value=Math.max(.1,lo.cameraSizeMultiplier),ab(),$i()},zo.onchange=function(){so.maxDrones=Ii(Li(zo.value),1),zo.value=Math.max(0,so.maxDrones),rb(),Hi()},Co.onchange=function(){lo.maxDrones=Ii(Li(Co.value),1),Co.value=Math.max(0,lo.maxDrones),ab(),$i()},Eo.onchange=function(){lo.sides=hr(Ii(Li(Eo.value),0)),Eo.value=lo.sides,ab(),$i()},Lo.onchange=function(){lo.outerSides=hr(Ii(Li(Lo.value),0)),Lo.value=lo.outerSides,ab(),$i()},Io.onchange=function(){lo.outerSize=Ii(Li(Io.value),0),Io.value=lo.outerSize,ab(),$i()},Ao.onchange=function(){lo.healthMultiplier=Ii(Li(Ao.value),1),Ao.value=lo.healthMultiplier,ab(),$i()},Oo.onchange=function(){lo.bodyDamageMultiplier=Ii(Li(Oo.value),1),Oo.value=lo.bodyDamageMultiplier,ab(),$i()},Bo.onchange=function(){lo.speedMultiplier=Ii(Li(Bo.value),1),Bo.value=lo.speedMultiplier,ab(),$i()},Do.onchange=function(){so.name=_i(Do.value.trim(),""),Do.value=so.name,rb(),Hi()},Po.onchange=function(){lo.name=_i(Po.value.trim(),""),Po.value=lo.name,ab(),$i()},No.onclick=function(){!function(e){var t,n,a,r,o,i,s;Ih=_h,yh.width=4096,yh.height=4096;var l=yh.width/2,d=yh.height/2,c=1.5*e.size,u=1.5,f=e.d,h=Be.polygonColors[e.color]||pm(wm(e.team,e.team,0,0));if(e.gadgets){for(var m=0;m<e.gadgets.length;m++){var p=e.gadgets[m];p.animTime=0,0==p.type&&delete p.rot,2==p.type&&(p.enabled=!0)}for(var g=0;g<e.barrels.length;g++)e.barrels[g].animTime=0}e.outerSize>0&&Tg(l,d,c+e.outerSize*c,"#5F676C",e.outerSides,f,!1,u,c);e.gadgets&&$g(l,d,c,f,e.barrels,!1,u);Tg(l,d,c,h,e.sides,f,!1,u),e.gadgets&&(jg(l,d,f,c,h,e.layers,0,0,!1,!1,u),Wg(l,d,c,f,e.gadgets,h,0,0,!1,!1,u));Ih=Sh,function(e,t){var n=e.toDataURL(),a=document.createElement("a");a.href=n,a.download=t,document.body.appendChild(a),a.click()}((n=(t=yh).getContext("2d"),a=document.createElement("canvas").getContext("2d"),r=Cg(n.getImageData(0,0,t.width,t.height)),o=r.bottom-r.top,i=r.right-r.left,s=n.getImageData(r.left,r.top,i,o),a.canvas.width=i,a.canvas.height=o,a.putImageData(s,0,0),a.canvas),`${e.filename}.png`)}({sides:lo.sides,outerSides:lo.outerSides,outerSize:lo.outerSize,gadgets:sr(lo.gadgets),layers:sr(lo.layers),barrels:sr(so.barrels),d:lr(90),filename:Ro.value.replace(/[\/|\\:*?"<>]/g," ").trim(),size:mh.size,team:mh.team})},Ro.addEventListener("keydown",(function(e){e.keyCode==Jr.enter&&(No.click(),Ro.blur())})),jo.onchange=function(){lo.type=Ii(jo.value,0),jo.value=lo.type,Fo.onchange(),ab(),$i()},Fo.onchange=function(){lo.level=Math.ceil(ir(Ii(Li(Fo.value),1),Math.max(1==lo.type?75:1),500)),Fo.value=lo.level,ab(),$i()},Uo.onchange=function(){lo.size=Math.min(50,Math.max(0,Ii(Li(Uo.value),.01))),Uo.value=lo.size,ab(),$i()},Wo.onchange=function(){"custom"==Wo.value?(br(lo.team)||(lo.team="#ffffff"),Ho.value=lo.team,Ho.classList.remove("hidden")):(lo.team=Ii(Wo.value,0),Wo.value=lo.team,Ho.classList.add("hidden")),ab(),$i()},Ho.onchange=function(){br(Ho.value)||(br("#"+Ho.value)?Ho.value="#"+Ho.value:Ho.value=lo.team),lo.team=Ho.value,ab(),$i()},Yo.onchange=function(){"custom"==Yo.value?(br(lo.visualTeam)||(lo.visualTeam="#ffffff"),$o.value=lo.visualTeam,$o.classList.remove("hidden")):(lo.visualTeam=Ii(Yo.value,void 0),Yo.value=lo.visualTeam,$o.classList.add("hidden")),ab(),$i()},$o.onchange=function(){br($o.value)||(br("#"+$o.value)?$o.value="#"+$o.value:$o.value=lo.visualTeam),lo.visualTeam=$o.value,ab(),$i()},Go.onchange=function(){lo.radiant=Math.round(ir(Ii(Li(Go.value),0),0,20)),Go.value=lo.radiant,ab(),$i()},Xo.onchange=function(){lo.overrideTankName=_i(Xo.value.trim(),""),Xo.value=lo.overrideTankName,ab(),$i()};var Jo=[];function Ko(e){return 0==e.stack.length?{barrel:so.barrels,gadget:lo.gadgets,layer:lo.layers}[e.type][e.index]:function e(t,n,a){if(1==n.length){var r=t[n[0]];return r&&3==r.type&&r.tank?{barrel:r.tank.barrels,gadget:r.tank.gadgets,layer:r.tank.layers}[a.type][a.index]:void 0}var o=t[n.shift()];return o&&3==o.type&&o.tank?e(o.tank.gadgets,n,a):void 0}(lo.gadgets,to(e.stack),e)}function Qo(e,t,n=!1,a=[]){if(e){var r=-1;if(n||1==Jo.length)for(var o=0;o<Jo.length;o++){var i=Jo[o];if(i.type==e&&i.index==t&&Ir(i.stack,a)){r=o;break}}-1==r?(n||(Jo=[]),Jo.push({type:e,index:t,stack:a})):Jo.splice(r,1)}var s;0==Jo.length?(vo.classList.remove("hidden"),bo.classList.add("hidden")):(vo.classList.add("hidden"),bo.classList.remove("hidden"));var l,d=[],c=eo(Jo);try{for(c.s();!(s=c.n()).done;){var u=s.value;Ko(u)||d.push(u)}}catch(e){c.e(e)}finally{c.f()}Jo=Jo.filter((function(e){return!d.includes(e)}));for(var f=[[Bi,"barrel",so.barrels],[Di,"gadget",lo.gadgets],[Pi,"layer",lo.layers]],h=function e(t){var n,a,r,o=eo(t.barrels);try{for(o.s();!(n=o.n()).done;)delete n.value.selected}catch(e){o.e(e)}finally{o.f()}var i=eo(t.gadgets);try{for(i.s();!(a=i.n()).done;){var s=a.value;delete s.selected,3==s.type&&s.tank&&e(s.tank)}}catch(e){i.e(e)}finally{i.f()}var l=eo(t.layers);try{for(l.s();!(r=l.n()).done;)delete r.value.selected}catch(e){l.e(e)}finally{l.f()}},m=function e(t){var n,a=eo(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;r.button.classList.remove("selected"),r.tank&&(e(r.tank.barrels),e(r.tank.gadgets),e(r.tank.layers))}}catch(e){a.e(e)}finally{a.f()}},p=0,g=f;p<g.length;p++){var y,v=g[p],b=v[0],w=v[2];m(b);var x=eo(w);try{for(x.s();!(y=x.n()).done;){var k=y.value;delete k.selected,"gadget"==v[1]&&3==k.type&&h(k.tank)}}catch(e){x.e(e)}finally{x.f()}}var S=function e(t,n,a){if(1==n.length){var r=t[n[0]];return{barrel:r.tank.barrels,gadget:r.tank.gadgets,layer:r.tank.layers}[a.type][a.index]}return e(t[n.shift()].tank.gadgets,n,a)},M=eo(Jo);try{for(M.s();!(l=M.n()).done;){var T,_=l.value,z=eo(f);try{for(z.s();!(T=z.n()).done;){var C=T.value,E=C[0],L=C[1];C[2],0==_.stack.length?_.type==L&&E[_.index].button.classList.add("selected"):"gadget"==L&&S(E,to(_.stack),_).button.classList.add("selected")}}catch(e){z.e(e)}finally{z.f()}}}catch(e){M.e(e)}finally{M.f()}!function(){var e,t=[],n=eo(Jo);try{function _(){var n=e.value;if(a=Ko(n),r="Error when loading object: invalid selected object",!a)return"continue";switch(n.type){case"barrel":r=Ri(a);break;case"gadget":r=Ni(a);break;case"layer":r=ji(a)}switch(a.selected=!0,wi=[],n.type){case"barrel":var o=oi[a.type];gi("Barrel Type","The type of the barrel. Each barrel type functions and looks differently.","type",1,ti,!1,0),gi("Override Visual Type","Overrides the look of the barrel, making it look like another barrel type.","visualType",0,ri,!0),o.minionStats&&yi(`${o.bulletName} Tank Code`,`The tank code of the ${o.bulletName.toLowerCase()}. It can have barrels, gadgets, and layers, just like any other tank.`,'enter a "full tank" code here',"minion",0),bi("Size and Position"),vi("Rotation","The barrel's rotation, in degrees.","rot",0,!0,1),vi("Length",`The length of the barrel. ${o.bulletName}s are shot from the tip of the barrel.`,"length",o.defaultLength,!0,0),vi("Width",`The width of the barrel. Wider barrels shoot larger ${o.bulletName.toLowerCase()}s, and deal more recoil.`,"width",o.defaultWidth,!0,0),vi("Side Offset","The barrel's offset to the side.","offset",0,!0,0),vi("Forward Offset","The barrel's offset forwards. Use negative numbers to offset it backwards.","distance",0,!0,0),bi("Attributes"),gi("Barrel Color","The color of the barrel.","color",3,pi,!0),gi("Border","Whether or not the barrel has a darker border around it.","hideBorder",0,[{value:void 0,name:"On"},{value:1,name:"Off"}],!0),o.polygonStats&&(gi("Polygon Color Type","The color of the polygon. 'Polygon Color' uses the color the polygon would normally be, and 'Team Color' uses the color of the polygon's team.","colorType",0,["Polygon Color","Team Color"],!1,0),gi("Polygon Team","The team of the polygon. Polygons can't damage entities on their team, unless the team name says (FFA). All naturally spawning polygons are on the 'Polygon' team.","team",3,Za.a,!0,1),vi(`Minimum ${o.bulletName} Size`,"The minimum number of sides the polygon will have.","minSize",3,!0,2),vi(`Maximum ${o.bulletName} Size`,"The maximum number of sides the polygon will have. Polygon sizes are still limited by the map size.","maxSize",3,!0,2),vi(`${o.bulletName} Radiant Level`,"The radiant level of the polygon. Radiant polygons change colors over time, and drop more XP.","radiant",0,!0,5)),(o.minionStats||o.bulletStats)&&gi(`Override ${o.bulletName} Color`,`Overrides the color of the ${o.bulletName.toLowerCase()}, no mattter your team.`,"team",3,mi,!0),o.noShootTrigger||gi("Shoot Trigger","What causes the barrel to shoot. Most barrels use 'Normal' by default, except for Drone Spawners and Minion Spawners.","shootTrigger",0,[{value:void 0,name:`Default (${ii.find((function(e){return e.value==o.defaultShootTrigger})).name})`}].concat(ii),!0),o.droneStats&&(vi(`${o.bulletName} Minimum Distance`,`${o.bulletName}s closer than this to their target will move away from it.`,"minDist",o.minionStats?6:0,!0,0),vi(`${o.bulletName} Maximum Distance`,`${o.bulletName}s farther away than this to their target will move closer to it.`,"maxDist",o.minionStats?10:0,!0,0)),vi("Reload","How long the barrel waits in between shots. The larger the number, the larger time in between shots.","reload",1,!0,0),vi("Recoil",`How much the barrel pushes you back when shooting. Recoil is also influenced by the ${o.bulletName.toLowerCase()}'s size.`,"recoil",1,!0,0),o.extraBulletStats&&(vi("Spread","How far (in degrees) the direction of shots are randomized.","spread",0,!0,0),vi(`${o.bulletName} Size`,`The size multiplier of the ${o.bulletName.toLowerCase()}. Size is also influenced by the barrel width.`,"size",1,!0,0)),o.minionStats&&(vi(`${o.bulletName} Body Damage`,`The body damage multiplier of the ${o.bulletName.toLowerCase()}.`,"damage",1,!0,0),vi(`${o.bulletName} Speed`,`The movement speed multiplier of the ${o.bulletName.toLowerCase()}.`,"speed",1,!0,0),vi(`${o.bulletName} Health`,`The health speed multiplier of the ${o.bulletName.toLowerCase()}.`,"penetration",1,!0,0)),o.launchSpeed&&vi(`${o.bulletName} Launch Speed`,`The speed at which the ${o.bulletName.toLowerCase()} is launched out of the barrel.`,"speed",1,!0,0),o.bulletStats&&(vi(`${o.bulletName} Damage`,`The amount of damage dealt by the ${o.bulletName.toLowerCase()}.`,"damage",1,!0,0),vi(`${o.bulletName} Speed`,`The movement speed of the ${o.bulletName.toLowerCase()}.`,"speed",1,!0,0),vi(`${o.bulletName} Penetration`,`The penetration the ${o.bulletName.toLowerCase()}. Higher penetration ${o.bulletName.toLowerCase()}s last longer before despawning or dying.`,"penetration",1,!0,0)),o.lifetimeAttribute&&vi(`${o.bulletName} Lifetime`,`The lifetime multiplier of the ${o.bulletName.toLowerCase()}. Lifetime is also influenced by the ${o.bulletName.toLowerCase()}'s penetration.`,"lifetime",1,!0,0),vi("Barrel Delay","How long the barrel waits before it starts shooting. Influenced by reload.","delay",0,!0,0);break;case"gadget":var i=hi[a.type];gi("Gadget Type","The type of the gadget. Different gadgets function and look differently.","type",2,ni,!1,0),2==a.type&&gi("Aura Type","The type of the aura. Each aura functions differently. Cosmetic auras are only for decoration.","subtype",0,ai),bi("Size and Position"),2==a.type&&vi("Aura Radius","The size of the aura.","radius",4,!0,0),[0,3].includes(a.type)?vi("Base Rotation",`The initial rotation of the ${i.name.toLowerCase()}.`,"baseRot",0,!0,1):vi("Rotation",`The ${i.name.toLowerCase()}'s rotation`,"rot",0,!0,1),i.defaultLength&&vi("Length",["The length of the auto cannon's barrel."][a.type],"length",i.defaultLength,!0,0),i.defaultWidth&&vi(["Width","Size","Size","Size"][a.type],["The width of the auto cannon. The width influences the size of the bullet.","The size of the mounted drone spawner.","The size of the aura's base.","The size of the tank section."][a.type],"width",i.defaultWidth,!0,0),vi("Side Offset",`The ${i.name.toLowerCase()}'s offset to the side.`,"offsetX",0,!0,0),vi("Forward Offset",`The ${i.name.toLowerCase()}'s offset forwards.`,"offsetY",0,!0,0),3==a.type&&(bi("Movement"),gi("Rotation Type","How the tank section rotates. When it's locked, it doesn't rotate at all, and when it's unlocked, it rotates with its base.","rotationType",0,di),1==a.rotationType&&(bi("Auto Cannon"),gi("Idle Behavior","What the tank section does when it doesn't have any targets. When set to \"Rotate\", the rotation speed is based on the tank section's idle rotation speed.","idleBehavior",0,li),0==a.idleBehavior&&vi("Idle Rotation Speed",'How fast the tank section rotates when it doesn\'t have any targets and its idle behavior is set to "Rotate".',"rotationSpeed",1,!0,0),vi("Max Rotation Spread","The maximum distance that the tank section can rotate from its base rotation (in degrees). When it's past the maximum, it will rotate until it's back to the maximum. Set to 0 for no maximum.","maxSpread",0,!0,6),a.maxSpread>0&&gi("Only Detect Within Max Spread","Whether or not the tank section can only detect and remember targets within its max rotation spread.","spreadDetection",0,[{value:0,name:"On"},{value:1,name:"Off"}]),vi("Target Turn Speed","How fast the tank section turns whenever it finds a target to shoot at. Between 0 and 1.","turnSpeed",1,!0,3),vi("Main Barrel Speed","Set this to the bullet speed of the tank section's main barrel for optimal movement prediction. This is only used for movement prediction.","speed",1,!0,0),vi("Main Barrel Length","Set this to the length of the tank section's main barrel for optimal movement prediction. This is only used for movement prediction.","length",1,!0,0),vi("Target Detect Distance","How far away something needs to be to be detected by the tank section.","minDistance",15,!0,0),vi("Target Forget Distance","How far away something needs to be to be forgetten by the tank section.","maxDistance",25,!0,0)),3==a.rotationType&&(gi("Rotation Condition","What causes the tank section to rotate.","rotationCondition",0,ci,!1,0),gi("Rotation Disabled Behavior","What the tank section does when its rotation condition is not met.","rotationDisabledBehavior",0,fi,!1,0),vi("Max Rotation","The maximum distance that the tank section can rotate from its base rotation (in degrees, on both sides). Set to 0 for no maximum.","maxRotation",0,!0,1),gi("Maxed Rotation Behavior","What the tank section does once it has reached its max rotation.","maxRotationBehavior",0,ui,!1,1),vi("Maxed Rotation Smoothing","How much the tank section smooths out its speed when its close to its min/max rotation. Set to 1 for no smoothing.","maxRotationSmoothing",1,!0,6)),2!=a.rotationType&&3!=a.rotationType||(vi("Rotation Speed","How fast the tank section rotates. Set to a negative number to rotate in the opposite direction.","rotationSpeed",1,!0,0),gi("Is Anchored","Whether or not the tank section rotates with its base.","anchored",0,["On","Off"],!1,0)),4==a.rotationType&&(vi("Turn Speed","How fast the tank section turns to point at the mouse.","turnSpeed",1,!0,3),vi("Max Rotation Spread","The maximum distance that the tank section can rotate from its base rotation (in degrees). When it's past the maximum, it will rotate until it's back to the maximum. Set to 0 for no maximum.","maxSpread",0,!0,6),a.maxSpread>0&&gi("Only Detect Within Max Spread","Whether or not the tank section will only try to point at the mouse if it's within its max rotation spread.","spreadDetection",0,[{value:0,name:"On"},{value:1,name:"Off"}])),bi("Visual"),gi("Override Color","Overrides the color of the tank section.","team",3,mi,!0),null!=a.team&&gi("Suppress Color Changes","Whether or not the tank section changes color with the body. When on, the tank section won't change color when damaged or radiant. Does not work when the tank section's override color is set.","suppressColor",0,["On","Off"],!1,0),vi("Sides","The amount of sides the tank section has. Zero sides make a circle, negative sides make a star.","sides",0,!0,4),bi("Outer Shell"),vi("Outer Sides","The amount of sides the tank section's outer shell has. Zero sides make a circle, negative sides make a star.","outerSides",0,!0,4),vi("Outer Size","The size of the tank section's outer shell.","outerSize",0,!0,0)),bi("Attributes"),3==a.type&&yi("Tank Code","Enter a tank code to import it. It can have barrels, gadgets, and layers, just like any other tank.",'enter a "full tank" code here',"tank",1),i.barrelColor&&gi((2==a.type?"Aura Base":"Barrel")+" Color",`The color of the ${2==a.type?"aura's base":"barrel"}.`,"color",3,pi,!0),3!=a.type&&gi("Border","Whether or not the gadget has a darker border around it.","hideBorder",0,[{value:void 0,name:"On"},{value:1,name:"Off"}],!0),i.bulletStats?(gi(`Override ${i.bulletName} Color`,`Overrides the color of the ${i.bulletName.toLowerCase()}, no mattter your team.`,"team",3,mi,!0),i.droneStats&&(vi(`${i.bulletName} Minimum Distance`,`${i.bulletName}s closer than this to their target will move away from it.`,"minDist",i.minionStats?6:0,!0,0),vi(`${i.bulletName} Maximum Distance`,`${i.bulletName}s farther away than this from their target will move closer to it.`,"maxDist",i.minionStats?10:0,!0,0)),0==a.type&&(gi("Idle Behavior","What the Auto Cannon does when it doesn't have any targets. When set to \"Rotate\", the rotation speed is based on the auto cannon's idle rotation speed.","idleBehavior",0,li),0==a.idleBehavior&&vi("Idle Rotation Speed",'How fast the Auto Cannon rotates when it doesn\'t have any targets and its idle behavior is set to "Rotate".',"rotationSpeed",1,!0,0)),vi("Reload","How long the barrel waits in between shots. The larger the number, the larger time in between shots.","reload",1,!0,0),0==a.type&&(vi("Recoil",`How much the barrel pushes you back when shooting. Recoil is also influenced by the ${i.bulletName.toLowerCase()}'s size.`,"recoil",0,!0,0),vi("Spread","How far (in degrees) the direction of shots are randomized.","spread",0,!0,0),vi(`${i.bulletName}. Size`,`The size multiplier of the ${i.bulletName.toLowerCase()}. Size is also influenced by the barrel width.`,"size",1,!0,0),vi(`${i.bulletName} Lifetime`,`The lifetime multiplier of the ${i.bulletName.toLowerCase()}. Lifetime is also influenced by the ${i.bulletName.toLowerCase()}'s penetration.`,"lifetime",1,!0,0)),vi(`${i.bulletName} Damage`,`The amount of damage dealt by the ${i.bulletName.toLowerCase()}.`,"damage",1,!0,0),vi(`${i.bulletName} Speed`,`The movement speed of the ${i.bulletName.toLowerCase()}.`,"speed",1,!0,0),vi(`${i.bulletName} Penetration`,`The penetration the ${i.bulletName.toLowerCase()}. Higher penetration ${i.bulletName.toLowerCase()}s last longer before despawning or dying.`,"penetration",1,!0,0),0==a.type&&(vi("Target Detect Distance","How far away something needs to be to be detected by the auto cannon.","minDistance",15,!0,0),vi("Target Forget Distance","How far away something needs to be to be forgetten by the auto cannon.","maxDistance",25,!0,0))):2==a.type&&(vi("Aura Base Sides","The amount of sides the aura's base has. Zero sides make a circle, negative sides make a star.","backSides",0,!0,4),gi("Override Aura Color","Overrides the color of the aura.","auraColor",3,mi,!0),gi("Particles","Whether or not the aura emits particles.","showParticles",0,["On","Off"],!1,0),gi("Aura Rotation Type","How the aura rotates. When it's locked, it doesn't rotate at all, and when it's unlocked, it rotates with its base.","rotationType",0,["Unlocked","Locked"]),vi("Aura Opacity","The opacity of the aura, 0-1. 0 makes it invisible.","alpha",.3,!0,3),vi("Deactivated Opacity Multiplier","The opacity multiplier of the aura when it is deactivated, scaling with the aura's opacity attribute. 0 makes it invisible when deactivated.","deactivatedApha",.3,!0,3),2!=a.subtype&&(vi(`${["Attack","Heal","Nothing","Repel","Attract"][a.subtype]} Interval`,`How often the aura will ${["attack","heal","what are you looking for here in the code?","repel","attract"][a.subtype]}.`,"reload",.25,!0,0),vi(`${["Damage","Healing","Nothing","Repulsion","Attraction"][a.subtype]}`,`How much the aura will ${["attack","heal","get out","repel","attract"][a.subtype]}.`,"damage",.125,!0,0),[3,4].includes(a.subtype)&&gi("Ignore Mass",`If the aura ignores the size of the objects it's ${{3:"repelling",4:"attracting"}[a.subtype]}. When on, it will ${{3:"repel",4:"attract"}[a.subtype]} all objects at the same speed, regardless of its size.`,"ignoreMass",0,["On","Off"],!1,1),gi("Affects Bullets","If the aura affects bullets. Auras will never affect bullets while in a safe zone, regardless of this setting.","affectBullets",0,[{name:"All Bullets",value:0},{name:"Enemy Bullets",value:1},{name:"Team Bullets",value:3},{name:"Off",value:2}],!1,1)),gi("Activation Trigger","What causes the aura to become active.","activationTrigger",0,si,!1,2),vi("Aura Sides","The amount of sides the aura has. Zero sides make a circle, negative sides make a star.","sides",0,!0,4));break;case"layer":bi("Size and Position"),vi("Rotation","The layer's rotation.","rot",0,!0,1),vi("Side Offset","The layer's offset to the side.","offsetX",0,!0,0),vi("Forward Offset","The layer's offset to the side.","offsetY",0,!0,0),vi("Size","The layer's size.","size",.5,!0,0),bi("Visual"),gi("Border","Whether or not the layer has a darker border around it.","hideBorder",0,[{value:void 0,name:"On"},{value:1,name:"Off"}],!0),gi("Override Color","Overrides the color of the layer.","team",3,mi,!0),vi("Sides","The amount of sides the layer has. Zero sides make a circle, negative sides make a star.","sides",0,!0,4),bi("Outer Shell"),vi("Outer Sides","The amount of sides the layer's outer shell has. Zero sides make a circle, negative sides make a star.","outerSides",0,!0,4),vi("Outer Size","The size of the layer's outer shell.","outerSize",0,!0,0)}t.push({object:a,objectInfo:n,name:r,attributes:wi})}for(n.s();!(e=n.n()).done;){var a,r;_()}}catch(z){n.e(z)}finally{n.f()}if(0!=t.length){for(var o,i,s=[],l=0,d=t;l<d.length;l++){var c,u=d[l],f=eo(u.attributes);try{function L(){var e,n=c.value,a=!0,r=u.object[n.id],o=!0,i=eo(t);try{for(i.s();!(e=i.n()).done;){var l=e.value,d=l.attributes.find((function(e){return e.id==n.id}));if(!d||d.type!=n.type||d.subtype!=n.subtype||!Ar(d.options,n.options)||d.deleteIfNaN!=n.deleteIfNaN||d.isNumber!=n.isNumber){a=!1;break}o&&(Ar(l.object[n.id],r)||(o=!1))}}catch(e){i.e(e)}finally{i.f()}a&&!s.find((function(e){return e.id==n.id}))&&(s.push(n),n.sharedValue=r,n.isValueShared=o)}for(f.s();!(c=f.n()).done;)L()}catch(I){f.e(I)}finally{f.f()}null==o?o=u.name:o!=u.name&&(o=""),null==i?i=u.objectInfo.type:i!=u.objectInfo.type&&(i="")}var h={barrel:"Barrel",layer:"Layer",gadget:"Gadget"}[i]||"Object";""==o?o=`${t.length} ${h}s`:t.length>1&&(o=`${t.length} ${o}s`),Tr(bo);var m=ps(bo,"div");function C(e,n,a=!1){for(var r=t,o=0;o<r.length;o++){var i=r[o].object;null!=i[e]&&a||(i[e]=sr(n),null==i[e]&&delete i[e])}}function E(){var e,t,n=g[p];switch(n.type){case-1:(b=ps(bo,"div")).id="tank-editor-subtitle",b.innerHTML=n.name,y=b;break;case 0:var r;(v=ps(bo,"div")).id="tank-editor-text",v.innerHTML=n.name+"&emsp;",y=v;var o=n.isValueShared&&br(n.sharedValue);if(o&&((r=ps(v,"input")).autocomplete="off",r.classList.add("tank-editor-input"),r.placeholder="#000000",r.style.marginRight="1vmin",r.value=n.sharedValue),(b=ps(v,"select")).classList.add("tank-editor-select"),3===n.subtype){var i=ps(b,"option");i.value="custom",i.innerHTML="Custom..."}for(var s=0;s<n.options.length;s++){var l=ps(b,"option");n.options[s].hasOwnProperty("value")?(l.value=n.options[s].value,l.innerHTML=n.options[s].name):(l.value=s,l.innerHTML=n.options[s])}n.isValueShared?b.value=o?"custom":_i(n.sharedValue,n.placeholder):b.value=null,r&&(r.onchange=function(e){br(e.target.value)||(br("#"+e.target.value)?e.target.value="#"+e.target.value:e.target.value=n.sharedValue),C(n.id,e.target.value),Oi()}),b.onchange=function(e){if("custom"==e.target.value)n.isValueShared&&br(n.sharedValue)||C(n.id,"#ffffff");else if(n.deleteIfNaN){var t=+e.target.value;isNaN(t)&&(t=void 0),C(n.id,t)}else C(n.id,Ii(e.target.value,0));switch(n.subtype){case 1:switch(9!=+e.target.value&&["colorType","radiant","minSize","maxSize"].forEach((function(e){C(e,void 0)})),+e.target.value){case 7:C("minion",{gadgets:[],layers:[],sides:0,outerSides:0,outerSize:0,maxBodyDrones:3,barrels:[{type:0,rot:lr(-145),offset:0,width:.5,length:.8,damage:.5,reload:.5,distance:0,penetration:.5,delay:0},{type:0,rot:lr(145),offset:0,width:.5,length:.8,damage:.5,reload:.5,distance:0,penetration:.5,delay:0}],maxWeaponDrones:3},!0),["minDist","maxDist"].forEach((function(e){C(e,void 0)}));break;case 8:C("minion",{gadgets:[],layers:[],sides:4,outerSides:0,outerSize:0,maxBodyDrones:3,barrels:[{type:0,rot:lr(-135),offset:0,width:.4,length:.6,damage:.5,reload:1,distance:0,penetration:.5,delay:0},{type:0,rot:lr(135),offset:0,width:.4,length:.6,damage:.5,reload:1,distance:0,penetration:.5,delay:0},{type:0,rot:lr(-45),offset:0,width:.4,length:.6,damage:.5,reload:1,distance:0,penetration:.5,delay:0},{type:0,rot:lr(45),offset:0,width:.4,length:.6,damage:.5,reload:1,distance:0,penetration:.5,delay:0}],maxWeaponDrones:3},!0),["minDist","maxDist"].forEach((function(e){C(e,void 0)}));break;case 3:C("minion",{sides:0,barrels:[{type:0,rot:0,offset:0,width:.5,length:1,damage:.5,reload:1,delay:0}],gadgets:[]},!0),["minDist","maxDist"].forEach((function(e){C(e,void 0)}));break;case 1:["minion"].forEach((function(e){C(e,void 0)}));break;default:["minion","minDist","maxDist"].forEach((function(e){C(e,void 0)}));break;case 9:C("colorType",0),C("team",1),C("minSize",3),C("maxSize",15),C("radiant",0),C("team",void 0)}break;case 2:switch(["alpha","length","speed","penetration","sides","backSides","subtype","radius","rotationType","maxSpread","spreadDetection","suppressColor","turnSpeed","showParticles","ignoreMass","affectBullets","activationTrigger","baseRot","idleBehavior","rotationSpeed","rotationCondition","maxRotation","maxDistance","minDistance"].forEach((function(e){C(e,void 0)})),a.type){case 0:C("rot",void 0),C("baseRot",0),C("idleBehavior",0),C("rotationSpeed",1),C("length",1),C("minDistance",15),C("maxDistance",25),C("speed",1),C("penetration",1);break;case 1:C("rot",0),C("speed",1),C("penetration",1);break;case 2:C("rot",0),C("sides",0),C("backSides",0),C("subtype",0),C("radius",4),C("alpha",.3),C("rotationType",1),C("width",.6),C("damage",.1),C("reload",.25),C("showParticles",0),C("affectBullets",2),C("activationTrigger",2),C("ignoreMass",1);break;case 3:C("rot",void 0),C("damage",void 0),C("reload",void 0),C("hideBorder",void 0),C("tank",{barrels:[{type:0,rot:0,offset:0,width:.5,length:1,damage:1,reload:1,delay:0,speed:1,distance:0,penetration:1}],gadgets:[],layers:[]}),C("rotationType",0),C("maxSpread",0),C("spreadDetection",0),C("suppressColor",0),C("turnSpeed",1),C("baseRot",0),C("sides",0),C("outerSides",0),C("outerSize",0),C("idleBehavior",0),C("rotationSpeed",1),C("anchored",0),C("speed",1),C("length",1),C("minDistance",15),C("maxDistance",25),C("rotationCondition",0)}}Oi()};break;case 1:(v=ps(bo,"div")).id="tank-editor-text",v.innerHTML=n.name,y=v,(b=ps(bo,"textarea")).autocomplete="off",b.classList.add("tank-editor-input-large");for(var d=0;d<15;d++)ps(bo,"br");switch(b.placeholder=n.placeholder,b.value=n.isValueShared?n.sharedValue:"-",n.subtype){case 0:n.isValueShared&&(b.value=ls({gadgets:us(n.sharedValue.gadgets||[]),layers:ds(n.sharedValue.layers||[]),sides:hr(n.sharedValue.sides||0),outerSides:hr(n.sharedValue.outerSides||0),outerSize:hr(n.sharedValue.outerSize||0),maxBodyDrones:n.sharedValue.maxBodyDrones,barrels:cs(n.sharedValue.barrels||[]),maxWeaponDrones:n.sharedValue.maxWeaponDrones}));break;case 1:n.isValueShared&&(b.value=ls({gadgets:us(n.sharedValue.gadgets||[]),layers:ds(n.sharedValue.layers||[]),barrels:cs(n.sharedValue.barrels||[])}))}b.lastValue=b.value,b.onchange=function(e){switch(n.subtype){case 0:try{if((t=ss(e.target.value)).error)return cv("Tank code invalid!",t.error),void(e.target.value=e.target.lastValue)}catch(t){return cv("Tank code invalid!",t),void(e.target.value=e.target.lastValue)}e.target.lastValue=e.target.value,C(n.id,{gadgets:ms(t.gadgets||[]),layers:fs(t.layers||[]),outerSize:t.outerSize||0,sides:t.sides||0,outerSides:t.outerSides||0,maxBodyDrones:Ii(t.maxBodyDrones,3),barrels:hs(t.barrels||[]),maxWeaponDrones:Ii(t.maxWeaponDrones,3)}),null!=t.healthMultiplier&&C("penetration",t.healthMultiplier),null!=t.bodyDamageMultiplier&&C("damage",t.bodyDamageMultiplier),null!=t.speedMultiplier&&C("speed",t.speedMultiplier);break;case 1:var t;try{if((t=ss(e.target.value)).error)return cv("Tank code invalid!",t.error),void(e.target.value=e.target.lastValue)}catch(t){return cv("Tank code invalid!",t),void(e.target.value=e.target.lastValue)}e.target.lastValue=e.target.value,C(n.id,{gadgets:ms(t.gadgets||[]),layers:fs(t.layers||[]),barrels:hs(t.barrels||[])}),null!=t.sides&&C("sides",t.sides),null!=t.outerSides&&C("outerSides",t.outerSides),null!=t.outerSize&&C("outerSize",t.outerSize)}Oi()};break;case 2:(v=ps(bo,"div")).id="tank-editor-text",v.innerHTML=n.name+"&emsp;",y=v,(b=ps(v,"input")).autocomplete="off",b.classList.add("tank-editor-input"),b.placeholder=n.placeholder,1===n.subtype?n.isValueShared?b.value=ur(dr(Ii(n.sharedValue,n.placeholder)),5):b.value="-":n.isValueShared?n.isNumber?b.value=Ii(n.sharedValue,n.placeholder):b.value=_i(n.sharedValue,n.placeholder):b.value="-",b.onchange=function(e){if(n.isNumber){var t=Ii(Li(e.target.value),n.placeholder);C(n.id,t),n.sharedValue=t,n.isValueShared=!0}else{var a=_i(e.target.value,n.placeholder);C(n.id,a),n.sharedValue=a,n.isValueShared=!0}switch(n.subtype){case 1:C(n.id,lr(n.sharedValue));break;case 2:C(n.id,Math.min(Math.max(3,n.sharedValue),1e3));break;case 3:C(n.id,Math.max(0,Math.min(1,n.sharedValue)));break;case 4:C(n.id,hr(n.sharedValue));break;case 5:C(n.id,Math.min(Math.max(0,n.sharedValue),20));break;case 6:C(n.id,Math.max(0,n.sharedValue))}Oi()}}-1!=n.type&&(e=y,(t=n.description)?e.setAttribute("data-tooltip",t):e.removeAttribute("data-tooltip"))}m.id="tank-editor-title",m.innerHTML=o;for(var p=0,g=s;p<g.length;p++){var y,v,b;E()}var w=ps(bo,"div"),x=ps(bo,"div");w.style.textAlign="right",x.style.textAlign="right";var k=ps(w,"button");k.innerHTML="Move Forward",k.classList.add("tank-editor-button");var S=ps(w,"button");S.innerHTML="Move Backward",S.classList.add("tank-editor-button");var M=ps(x,"button");M.innerHTML=`Delete ${o}`,M.classList.add("tank-editor-button");var T=ps(x,"button");T.innerHTML=`Duplicate ${o}`,T.classList.add("tank-editor-button"),k.onclick=function(){ki()},S.onclick=function(){Si()},M.onclick=function(){Mi()},T.onclick=function(){Ti()}}}()}function ei(){Jo=[],Qo()}var ti=[{value:0,name:"Cannon"},{value:1,name:"Drone Spawner"},{value:2,name:"Trap Launcher"},{value:7,name:"Rocket Launcher"},{value:3,name:"Minion Spawner"},{value:8,name:"Custom Trap Launcher"},{value:6,name:"Nothing Barrel"},{value:4,name:"Player Spawner"},{value:5,name:"Polyp Spawner"},{value:9,name:"Polygon Spawner"}],ni=[{value:0,name:"Auto Cannon"},{value:1,name:"Mounted Drone Spawner"},{value:2,name:"Aura"},{value:3,name:"Tank Section"}],ai=[{value:0,name:"Damaging"},{value:1,name:"Healing"},{value:3,name:"Repulsion"},{value:4,name:"Attraction"},{value:2,name:"Cosmetic"}],ri=[{value:void 0,name:"Unset"},{value:0,name:"Cannon"},{value:1,name:"Drone Spawner"},{value:2,name:"Trap Launcher"},{value:7,name:"Rocket Launcher"},{value:3,name:"Minion Spawner"},{value:8,name:"Custom Trap Launcher"},{value:6,name:"Nothing Barrel"},{value:4,name:"Player Spawner"},{value:5,name:"Polyp Spawner"},{value:9,name:"Polygon Spawner"},{value:-1,name:"Spike"},{value:-2,name:"Inverse Spike"},{value:-10,name:"Invisible"}],oi=Za.b,ii=[{name:"Normal",value:0},{name:"Inverse",value:1},{name:"Always",value:2},{name:"Never",value:3},{name:"Passive Mode Enabled",value:7},{name:"Passive Mode Disabled",value:8},{name:"Under Drone Limit",value:4},{name:"Not Under Drone Limit",value:5},{name:"Death",value:6}],si=[{name:"Passive Mode Disabled",value:2},{name:"Passive Mode Enabled",value:3},{name:"Always",value:0},{name:"Never",value:1},{name:"Shooting",value:4},{name:"Not Shooting",value:5},{name:"Under Drone Limit",value:6},{name:"Not Under Drone Limit",value:7}],li=[{name:"Rotate",value:0},{name:"Return to Base Rotation",value:1}],di=[{name:"Static",value:0},{name:"Auto Cannon",value:1},{name:"Constant",value:2},{name:"Point At Mouse",value:4},{name:"Conditional",value:3}],ci=[{name:"Always",value:0},{name:"Never",value:1},{name:"Shooting",value:2},{name:"Not Shooting",value:3},{name:"Passive Mode Enabled",value:6},{name:"Passive Mode Disabled",value:7},{name:"Under Drone Limit",value:4},{name:"Not Under Drone Limit",value:5}],ui=[{name:"Stop",value:0},{name:"Reverse",value:1},{name:"Wrap Around",value:2}],fi=[{name:"Stop",value:0},{name:"Reverse",value:1},{name:"Reset",value:2},{name:"Rotate to Base Rotation",value:3}],hi=[{name:"Auto Cannon",bulletName:"Bullet",barrelColor:!0,bulletStats:!0,defaultLength:.5,defaultWidth:.25},{name:"Mounted Drone Spawner",bulletName:"Drone",barrelColor:!0,bulletStats:!0,droneStats:!0,defaultWidth:.5},{name:"Aura",bulletName:"Aura",barrelColor:!0,defaultWidth:.6},{name:"Tank Section",bulletName:"Tank",defaultWidth:.5}],mi=[{value:void 0,name:"Unset"},{value:-1,name:"Fallen (Light Gray)"},{value:2,name:"Celestial (Pink)"},{value:10,name:"Blue"},{value:11,name:"Red"},{value:12,name:"Green"},{value:13,name:"Purple"},{value:5,name:"Black"},{value:6,name:"White"},{value:3,name:"Barrel (Gray)"},{value:7,name:"Spike (Dark Gray)"},{value:20,name:"Triangle Yellow"},{value:21,name:"Square Red"},{value:22,name:"Pentagon Blue"},{value:23,name:"Hexagon Orange"},{value:24,name:"Heptagon Green"},{value:25,name:"Octagon Blue"},{value:26,name:"Nonagon Dark Purple"},{value:27,name:"Decagon Dark Blue"},{value:28,name:"Hendecagon Black"},{value:29,name:"Dodecagon Dark Grey"},{value:30,name:"Tridecagon White"}],pi=[{value:void 0,name:"Default (Gray)"},{value:-1,name:"Fallen (Light Gray)"},{value:2,name:"Celestial (Pink)"},{value:10,name:"Blue"},{value:11,name:"Red"},{value:12,name:"Green"},{value:13,name:"Purple"},{value:5,name:"Black"},{value:6,name:"White"},{value:7,name:"Spike (Dark Gray)"},{value:20,name:"Triangle Yellow"},{value:21,name:"Square Red"},{value:22,name:"Pentagon Blue"},{value:23,name:"Hexagon Orange"},{value:24,name:"Heptagon Green"},{value:25,name:"Octagon Blue"},{value:26,name:"Nonagon Dark Purple"},{value:27,name:"Decagon Dark Blue"},{value:28,name:"Hendecagon Black"},{value:29,name:"Dodecagon Dark Grey"},{value:30,name:"Tridecagon White"}];function gi(e,t,n,a,r,o=!1,i=void 0){wi.push({type:0,subtype:a,id:n,name:e,description:t,options:r,deleteIfNaN:o,placeholder:i})}function yi(e,t,n,a,r){wi.push({type:1,subtype:r,id:a,name:e,description:t,placeholder:n})}function vi(e,t,n,a,r,o){wi.push({type:2,subtype:o,id:n,name:e,description:t,placeholder:a,isNumber:r})}function bi(e){wi.push({type:-1,name:e,id:e})}var wi=[];function xi(e){return 0==e.stack.length?{barrel:so.barrels,gadget:lo.gadgets,layer:lo.layers}[e.type]:function e(t,n,a){if(1==n.length){var r=t[n[0]];return r&&3==r.type&&r.tank?{barrel:r.tank.barrels,gadget:r.tank.gadgets,layer:r.tank.layers}[a.type]:void 0}var o=t[n.shift()];return o&&3==o.type&&o.tank?e(o.tank.gadgets,n,a):void 0}(lo.gadgets,to(e.stack),e)}function ki(){var e,t=Jo.sort((function(e,t){return t.index-e.index})).sort((function(e,t){return t.stack.length-e.stack.length})),n=eo(t);try{for(n.s();!(e=n.n()).done;){var a=e.value,r=xi(a);if(a.index<r.length-1){var o,i=r[a.index+1];r[a.index+1]=r[a.index],r[a.index]=i;var s=eo(t);try{for(s.s();!(o=s.n()).done;){var l=o.value;a.type==l.type&&l.index==a.index+1&&Ir(l.stack,a.stack)&&l.index--}}catch(e){s.e(e)}finally{s.f()}a.index++}}}catch(e){n.e(e)}finally{n.f()}Oi(),Qo()}function Si(){var e,t=Jo.sort((function(e,t){return e.index-t.index})).sort((function(e,t){return t.stack.length-e.stack.length})),n=eo(t);try{for(n.s();!(e=n.n()).done;){var a=e.value,r=xi(a);if(a.index>0){var o,i=r[a.index-1];r[a.index-1]=r[a.index],r[a.index]=i;var s=eo(t);try{for(s.s();!(o=s.n()).done;){var l=o.value;a.type==l.type&&l.index==a.index-1&&Ir(l.stack,a.stack)&&l.index++}}catch(e){s.e(e)}finally{s.f()}a.index--}}}catch(e){n.e(e)}finally{n.f()}Oi(),Qo()}function Mi(){var e,t=eo(Jo.sort((function(e,t){return t.index-e.index})).sort((function(e,t){return t.stack.length-e.stack.length})));try{for(t.s();!(e=t.n()).done;){var n=e.value;xi(n).splice(n.index,1)}}catch(e){t.e(e)}finally{t.f()}Oi(!1),ei()}function Ti(){for(var e=Jo.sort((function(e,t){return e.index-t.index})).sort((function(e,t){return t.stack.length-e.stack.length})),t=0;t<e.length;t++){var n=e[t],a=xi(n);a.splice(n.index,0,sr(a[n.index]));for(var r=t+1;r<e.length;r++)e[r].type==n.type&&e[r].index>n.index&&Ir(e[r].stack,n.stack)&&e[r].index++}Oi(),Qo()}function _i(e,t){return null==e||""===e?t:e}var zi=["(",")",/^(\d*\.?\d+|\d+)\e?[+-]?\d*$/,"*","/","+","-",",","sin","cos","degToRad","radToDeg","rand","rnd","flr","ceil","Infinity"],Ci=[["radtodeg","radToDeg"],["rad2deg","radToDeg"],["radianstodegrees","radToDeg"],["degtorad","degToRad"],["deg2rad","degToRad"],["degreestoradians","degToRad"],["infinity","inf"],["random","rand"],["round","rnd"],["floor","flr"],["ceiling","ceil"],["^","**"]],Ei=[["inf","Infinity"]];function Li(e){if(!function(e){try{e=e.replace(RegExp("([,()/*+-])","g")," $1 ").toLowerCase();for(var t=0;t<Ci.length;t++)e=e.replaceAll(Ci[t][0],Ci[t][1]);for(t=0;t<Ei.length;t++)e=e.replaceAll(Ei[t][0],Ei[t][1]);return 0==e.split(" ").filter((function(e){return e})).filter((function(e){return t=e,!zi.some((function(e){return e instanceof RegExp?e.test(t):e==t}));var t})).length}catch(e){return!1}}(e))return null;try{e=e.toLowerCase();for(var t=0;t<Ci.length;t++)e=e.replaceAll(Ci[t][0],Ci[t][1]);for(t=0;t<Ei.length;t++)e=e.replaceAll(Ei[t][0],Ei[t][1]);return window.eval(e)}catch(e){return null}}function Ii(e,t){return Number.isNaN(+e)?t:+e}function Ai(e,t){return null==e?t:e}function Oi(){var e,t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=!1,a=!1,r=eo(Jo);try{for(r.s();!(e=r.n()).done;){var o=e.value;if("barrel"==o.type&&0==o.stack.length?n=!0:a=!0,n&&a)break}}catch(e){r.e(e)}finally{r.f()}n&&(rb(),Hi(!1,t)),a&&(ab(),$i(!1,t)),(n||a)&&Vi()}window.sin=function(e){return Math.sin(e)},window.cos=function(e){return Math.cos(e)},window.radToDeg=function(e){return dr(e)},window.degToRad=function(e){return lr(e)},window.rand=function(e,t){return null==e&&null==t?Math.random():null==t?Math.random()*e:Math.random()*(t-e)+e},window.rnd=function(e,t=1){return Math.round(e/t)*t},window.flr=function(e){return Math.floor(e)},window.ceil=function(e){return Math.ceil(e)};var Bi=[],Di=[],Pi=[];function Ri(e){return ti.find((function(t){return t.value==e.type}))?.name||"Invalid barrel (wrong type?)"}function Ni(e){if(2==e.type){var t=ai.find((function(t){return t.value==e.subtype}));return((null==t?void 0:t.name)||"Invalid (wrong subtype?)")+" Aura"}return ni.find((function(t){return t.value==e.type}))?.name||"Invalid gadget (wrong type?)"}function ji(e){return`${Math.abs(e.sides)} ${e.sides<0?"point star":"sided"} layer`}var Fi={type:0,rot:0,offset:0,width:.5,length:1,damage:1,reload:1,delay:0,speed:1,distance:0,penetration:1},Ui={type:0,offsetX:0,offsetY:0,length:.5,width:.25,reload:1,damage:.5,speed:1,baseRot:0,idleBehavior:0,rotationSpeed:1,penetration:1,minDistance:15,maxDistance:25},Wi={rot:0,size:.5,sides:0,outerSides:0,outerSize:0,offsetX:0,offsetY:0};function Hi(){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];function t(e){var t=so.barrels[e],n=ps(po,"button","tank-editor-collapsible-element");n.innerText=Ri(t),n.onclick=function(t){var n=to(Jo).reverse().find((function(e){return"barrel"==e.type&&0==e.stack.length}));if(n&&n.index!=e&&t.shiftKey){var a,r=eo(wr(n.index,e));try{function o(){var e=a.value;Jo.some((function(t){return"barrel"==t.type&&t.index==e}))||Jo.push({type:"barrel",index:e,stack:[]})}for(r.s();!(a=r.n()).done;)o()}catch(i){r.e(i)}finally{r.f()}Qo()}else Qo("barrel",e,t.ctrlKey||t.metaKey||t.shiftKey)},Bi.push({button:n})}arguments.length>0&&void 0!==arguments[0]&&!arguments[0]||Vi(),fo.innerHTML=`Barrels (${so.barrels.length})`,Tr(po),Bi=[];for(var n=0;n<so.barrels.length;n++)t(n);var a=ps(po,"button","tank-editor-collapsible-element");a.innerHTML="+",a.onclick=function(){so.barrels.push(sr(Fi)),rb(),Hi()},To.value=so.cameraSizeMultiplier,zo.value=so.maxDrones,Do.value=so.name,e&&Qo()}window.weaponUpdate=Hi;var Yi={};function $i(){var e,t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];arguments.length>0&&void 0!==arguments[0]&&!arguments[0]||Vi(),ho.innerHTML=`Gadgets (${lo.gadgets.length})`,Tr(go),Di=[];var n=function e(t,n,a,r,o=1){if(3==n.type&&n.tank){var i,s={},l="b"+r.join(""),d=ps(t,"button",["small","tank-editor-collapsible"]);d.innerText=`Barrels (${n.tank.barrels.length})`,d.style.marginLeft=3*o-1+"vmin",Yi[l]||d.classList.add("active");var c=ps(t,"div","tank-editor-collapsible-content");function w(e){var t=n.tank.barrels[e],a=ps(c,"button",["small","tank-editor-collapsible-element"]);a.style.marginLeft=3*o+"vmin",a.innerText=Ri(t),s.barrels.push({button:a}),a.onclick=function(t){var n=to(Jo).reverse().find((function(e){return"barrel"==e.type&&Ir(e.stack,r)}));if(n&&n.index!=e&&t.shiftKey){var a,o=eo(wr(n.index,e));try{function i(){var e=a.value;Jo.some((function(t){return"barrel"==t.type&&t.index==e}))||Jo.push({type:"barrel",index:e,stack:r})}for(o.s();!(a=o.n()).done;)i()}catch(s){o.e(s)}finally{o.f()}Qo()}else Qo("barrel",e,t.ctrlKey||t.metaKey||t.shiftKey,r)}}c.style.display=Yi[l]?"none":"flex",d.onclick=function(){d.classList.toggle("active"),Yi[l]=!Yi[l],"flex"===c.style.display?c.style.display="none":c.style.display="flex"},s.barrels=[];for(var u=0;u<n.tank.barrels.length;u++)w(u);(i=ps(c,"button",["small","tank-editor-collapsible-element"])).innerHTML="+",i.style.marginLeft=3*o+"vmin",i.onclick=function(){Ko(a).tank.barrels.push(sr(Fi)),ab(),$i()};var f="g"+r.join(""),h=ps(t,"button",["small","tank-editor-collapsible"]);h.innerText=`Gadgets (${n.tank.gadgets.length})`,h.style.marginLeft=3*o-1+"vmin",Yi[f]||h.classList.add("active");var m=ps(t,"div","tank-editor-collapsible-content");function x(t){var a=n.tank.gadgets[t],i=ps(m,"button",["small","tank-editor-collapsible-element"]);i.style.marginLeft=3*o+"vmin",i.innerText=Ni(a),s.gadgets.push({button:i,tank:e(m,a,{index:t,type:"gadget",stack:r},r.concat([t]),o+1)}),i.onclick=function(e){var n=to(Jo).reverse().find((function(e){return"gadget"==e.type&&Ir(e.stack,r)}));if(n&&n.index!=t&&e.shiftKey){var a,o=eo(wr(n.index,t));try{function i(){var e=a.value;Jo.some((function(t){return"gadget"==t.type&&t.index==e}))||Jo.push({type:"gadget",index:e,stack:r})}for(o.s();!(a=o.n()).done;)i()}catch(s){o.e(s)}finally{o.f()}Qo()}else Qo("gadget",t,e.ctrlKey||e.metaKey||e.shiftKey,r)}}m.style.display=Yi[f]?"none":"flex",h.onclick=function(){h.classList.toggle("active"),Yi[f]=!Yi[f],"flex"===m.style.display?m.style.display="none":m.style.display="flex"},s.gadgets=[];for(var p=0;p<n.tank.gadgets.length;p++)x(p);(i=ps(m,"button",["small","tank-editor-collapsible-element"])).innerHTML="+",i.style.marginLeft=3*o+"vmin",i.onclick=function(){Ko(a).tank.gadgets.push(sr(Ui)),ab(),$i()};var g="l"+r.join(""),y=ps(t,"button",["small","tank-editor-collapsible"]);y.innerText=`Layers (${n.tank.layers.length})`,y.style.marginLeft=3*o-1+"vmin",Yi[g]||y.classList.add("active");var v=ps(t,"div","tank-editor-collapsible-content");function k(e){var t=n.tank.layers[e],a=ps(v,"button",["small","tank-editor-collapsible-element"]);a.style.marginLeft=3*o+"vmin",a.innerText=ji(t),s.layers.push({button:a}),a.onclick=function(t){var n=to(Jo).reverse().find((function(e){return"layer"==e.type&&Ir(e.stack,r)}));if(n&&n.index!=e&&t.shiftKey){var a,o=eo(wr(n.index,e));try{function i(){var e=a.value;Jo.some((function(t){return"layer"==t.type&&t.index==e}))||Jo.push({type:"layer",index:e,stack:r})}for(o.s();!(a=o.n()).done;)i()}catch(s){o.e(s)}finally{o.f()}Qo()}else Qo("layer",e,t.ctrlKey||t.metaKey||t.shiftKey,r)}}v.style.display=Yi[g]?"none":"flex",y.onclick=function(){y.classList.toggle("active"),Yi[g]=!Yi[g],"flex"===v.style.display?v.style.display="none":v.style.display="flex"},s.layers=[];for(var b=0;b<n.tank.layers.length;b++)k(b);return(i=ps(v,"button",["small","tank-editor-collapsible-element"])).innerHTML="+",i.style.marginLeft=3*o+"vmin",i.onclick=function(){Ko(a).tank.layers.push(sr(Wi)),ab(),$i()},s}};function a(e){var t=lo.gadgets[e],a=ps(go,"button","tank-editor-collapsible-element");a.innerText=Ni(t),a.onclick=function(t){var n=to(Jo).reverse().find((function(e){return"gadget"==e.type&&0==e.stack.length}));if(n&&n.index!=e&&t.shiftKey){var a,r=eo(wr(n.index,e));try{function o(){var e=a.value;Jo.some((function(t){return"gadget"==t.type&&t.index==e}))||Jo.push({type:"gadget",index:e,stack:[]})}for(r.s();!(a=r.n()).done;)o()}catch(i){r.e(i)}finally{r.f()}Qo()}else Qo("gadget",e,t.ctrlKey||t.metaKey||t.shiftKey)},Di.push({button:a,tank:n(go,t,{index:e,type:"gadget",stack:[]},[e])})}for(var r=0;r<lo.gadgets.length;r++)a(r);function o(e){var t=lo.layers[e],n=ps(yo,"button","tank-editor-collapsible-element");n.innerText=ji(t),n.onclick=function(t){var n=to(Jo).reverse().find((function(e){return"layer"==e.type&&0==e.stack.length}));if(n&&n.index!=e&&t.shiftKey){var a,r=eo(wr(n.index,e));try{function o(){var e=a.value;Jo.some((function(t){return"layer"==t.type&&t.index==e}))||Jo.push({type:"layer",index:e,stack:[]})}for(r.s();!(a=r.n()).done;)o()}catch(i){r.e(i)}finally{r.f()}Qo()}else Qo("layer",e,t.ctrlKey||t.metaKey||t.shiftKey)},Pi.push({button:n})}(e=ps(go,"button")).classList.add("tank-editor-collapsible-element"),e.innerHTML="+",e.onclick=function(){lo.gadgets.push(sr(Ui)),ab(),$i()},mo.innerHTML=`Layers (${lo.layers.length})`,Tr(yo),Pi=[];for(var i=0;i<lo.layers.length;i++)o(i);(e=ps(yo,"button")).classList.add("tank-editor-collapsible-element"),e.innerHTML="+",e.onclick=function(){lo.layers.push(sr(Wi)),ab(),$i()},_o.value=lo.cameraSizeMultiplier,Co.value=lo.maxDrones,Eo.value=lo.sides,Lo.value=lo.outerSides,Io.value=lo.outerSize,Ao.value=lo.healthMultiplier,Oo.value=lo.bodyDamageMultiplier,Bo.value=lo.speedMultiplier,Po.value=lo.name,Fo.value=lo.level,Uo.value=lo.size,jo.value=lo.type,function(e){br(e)?(Ho.value=e,Wo.value="custom",Ho.classList.remove("hidden")):(Wo.value=e,Ho.classList.add("hidden"))}(lo.team),function(e){br(e)?($o.value=e,Yo.value="custom",$o.classList.remove("hidden")):(Yo.value=e,$o.classList.add("hidden"))}(Ai(lo.visualTeam,void 0)),Go.value=lo.radiant,Xo.value=lo.overrideTankName,t&&Qo()}window.bodyUpdate=$i;var Gi,Xi,qi,Zi=[];function Vi(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=sr([so,lo,Jo]);Zi.push(t),e&&(Ji=[]),Zi.length>Ur.maxSaveStates&&Zi.shift()}var Ji=[],Ki=document.getElementById("import-export-button"),Qi=document.getElementById("import-or-export"),es=document.getElementById("import-export-type"),ts=document.getElementById("code-area"),ns=document.getElementById("load-weapon-upgrade-area"),as=document.getElementById("load-body-upgrade-area"),rs=document.getElementById("load-weapon-upgrade"),os=document.getElementById("load-body-upgrade");function is(e,t,n){function a(){switch(Mo){case 0:t&&function e(t){for(var n=0;n<t.length;n++){var a=t[n];a.length=a.length*(3==a.type||4==a.type||5==a.type?1.5:1),a.minion&&e(a.minion.barrels)}}(so.barrels);break;case 1:function l(e){for(var t=0;t<e.length;t++){var n=e[t];2==n.type&&(n.alpha=.3,n.rot=0,n.rotationType=2==n.subtype?0:1,n.backSides=2==n.subtype?n.sides:0)}}n&&l(lo.gadgets),t&&function e(t){for(var n=0;n<t.length;n++){var a=t[n];a.minion&&(l(a.minion.gadgets),e(a.minion.barrels))}}(so.barrels);break;case 2:function d(e){for(var t=0;t<e.length;t++){var n=e[t];2==n.type&&(n.showParticles=0)}}n&&d(lo.gadgets),t&&function e(t){for(var n=0;n<t.length;n++){var a=t[n];a.minion&&(d(a.minion.gadgets),e(a.minion.barrels))}}(so.barrels);break;case 3:function c(e){for(var t=0;t<e.length;t++){var n=e[t];2==n.type&&(n.affectBullets=2,[3,4].includes(n.subtype)&&(n.ignoreMass=0))}}n&&c(lo.gadgets),t&&function e(t){for(var n=0;n<t.length;n++){var a=t[n];a.minion&&(c(a.minion.gadgets),e(a.minion.barrels))}}(so.barrels);break;case 4:function u(e){for(var t=0;t<e.length;t++){var n=e[t];0==n.type&&(n.baseRot=0,n.idleBehavior=0,n.idleRotationSpeed=1)}}n&&u(lo.gadgets),t&&function e(t){for(var n=0;n<t.length;n++){var a=t[n];a.minion&&(u(a.minion.gadgets),e(a.minion.barrels))}}(so.barrels);break;case 5:function f(e){for(var t=0;t<e.length;t++){var n=e[t];0==n.type&&(n.rotationSpeed=n.idleRotationSpeed,delete n.idleRotationSpeed)}}n&&f(lo.gadgets),t&&function e(t){for(var n=0;n<t.length;n++){var a=t[n];a.minion&&(f(a.minion.gadgets),e(a.minion.barrels))}}(so.barrels);break;case 6:var e=function e(t){for(var n=0;n<t.length;n++){var r=t[n];3==r.type&&(r.spreadDetection=1,r.tank&&(a(r.tank.barrels),e(r.tank.gadgets)))}},a=function t(n){for(var a=0;a<n.length;a++){var r=n[a];r.minion&&(e(r.minion.gadgets),t(r.minion.barrels))}};n&&e(lo.gadgets),t&&a(so.barrels);break;case 7:t&&n&&(lo.size=1);break;case 8:var r=function e(t){for(var n=0;n<t.length;n++){var a=t[n];2==a.type&&(a.activationTrigger=2,a.deactivatedApha=.3),a.tank&&(o(a.tank.barrels),e(a.tank.gadgets))}},o=function e(t){for(var n=0;n<t.length;n++){var a=t[n];a.minion&&(r(a.minion.gadgets),e(a.minion.barrels))}};n&&r(lo.gadgets),t&&o(so.barrels);break;case 9:var i=function e(t){for(var n=0;n<t.length;n++){var a=t[n];3==a.type&&(a.rotationDisabledBehavior=a.disabledBehavior,delete a.disabledBehavior,a.tank&&(s(a.tank.barrels),e(a.tank.gadgets)))}},s=function e(t){for(var n=0;n<t.length;n++){var a=t[n];a.minion&&(i(a.minion.gadgets),e(a.minion.barrels))}};n&&i(lo.gadgets),t&&s(so.barrels)}}for(Mo=e;Mo<10;Mo++)a()}function ss(e){var t;try{t=JSON.parse(e,(function(e,t){return 179e306===t?1/0:-179e306===t?-1/0:t}))}catch(n){try{t=JSON.parse(Mr(e.trim()),(function(e,t){return 179e306===t?1/0:-179e306===t?-1/0:t}))}catch(n){try{t=JSON.parse(Mr(Mr(e.trim())),(function(e,t){return 179e306===t?1/0:-179e306===t?-1/0:t}))}catch(e){return{error:"Invalid Code"}}return t||{error:"Invalid Code"}}return t||{error:"Invalid Code"}}return t}function ls(e){var t=JSON.stringify(e,(function(e,t){return t===1/0?179e306:t===-1/0?-179e306:t}));if(Ur.compressCodes){var n=Sr(t),a=Sr(n);t=n.length<a.length?n:a}return t}function ds(e){var t=[];return e.forEach((function(e){var n={offsetX:0,offsetY:0,rot:0};Object.keys(e).forEach((function(t){switch(t){case"selected":break;case"rot":n[t]=ur(dr(e[t]),5);break;default:n[t]=e[t]}})),t.push(n)})),t}function cs(e){var t=[];return e.forEach((function(e){var n={};Object.keys(e).forEach((function(t){switch(t){case"fireCooldown":case"animTime":case"selected":case"shootingTime":break;case"rot":n[t]=ur(dr(e[t]),5);break;case"minion":n[t]={sides:hr(e[t].sides||0),outerSides:hr(e[t].outerSides||0),outerSize:hr(e[t].outerSize||0),maxWeaponDrones:e[t].maxWeaponDrones||0,maxBodyDrones:e[t].maxBodyDrones||0,barrels:cs(e[t].barrels),gadgets:us(e[t].gadgets),layers:ds(e[t].layers||[])};break;default:n[t]=e[t]}})),t.push(n)})),t}function us(e){var t=[];return e.forEach((function(e){var n={};Object.keys(e).forEach((function(t){switch(t){case"fireCooldown":case"targetCheckTimer":case"animTime":case"target":case"selected":break;case"sides":case"outerSides":case"backSides":n[t]=hr(e[t]);break;case"baseRot":n[t]=ur(dr(e[t]),5);break;case"rot":0!=e.type&&3!=e.type&&(n[t]=ur(dr(e[t]),5));break;default:n[t]=e[t]}})),t.push(n)})),t}function fs(e){var t=[];return e.forEach((function(e){var n={offsetX:0,offsetY:0,rot:0};Object.keys(e).forEach((function(t){n[t]="rot"===t?lr(e[t]):e[t]})),t.push(n)})),t}function hs(e){var t=[];return e.forEach((function(e){var n={};Object.keys(e).forEach((function(t){switch(t){case"rot":n[t]=lr(e[t]);break;case"minion":n[t]={sides:hr(e[t].sides||0),outerSides:hr(e[t].outerSides||0),outerSize:hr(e[t].outerSize||0),maxWeaponDrones:e[t].maxWeaponDrones||0,maxBodyDrones:e[t].maxBodyDrones||0,barrels:hs(e[t].barrels),gadgets:ms(e[t].gadgets),layers:fs(e[t].layers||[])};break;default:n[t]=e[t]}})),t.push(n)})),t}function ms(e){var t=[];return e.forEach((function(e){var n={};Object.keys(e).forEach((function(t){switch(t){case"rot":case"baseRot":n[t]=lr(e[t]);break;case"sides":case"outerSides":case"backSides":n[t]=hr(e[t]);break;default:n[t]=e[t]}})),t.push(n)})),t}function ps(e,t="div",n){"string"==typeof n&&(n=[n]);var a=document.createElement(t);return e.appendChild(a),n&&n.forEach((function(e){a.classList.add(e)})),a}function gs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,i,s=[],l=!0,d=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){d=!0,r=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return s}}(e,t)||vs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ys(e,t){var n,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=vs(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0;function s(){}return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw n}}}}function vs(e,t){if(e){if("string"==typeof e)return bs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bs(e,t):void 0}}function bs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}rs.onclick=function(){var e,t=ns.value.trim().toLowerCase();ns.value="",0!=t.length&&(e=t,$v.sendMessage(64,e))},os.onclick=function(){var e,t=as.value.trim().toLowerCase();as.value="",0!=t.length&&(e=t,$v.sendMessage(68,e))},ns.addEventListener("keydown",(function(e){e.keyCode==Jr.enter&&(rs.click(),ns.blur())})),as.addEventListener("keydown",(function(e){e.keyCode==Jr.enter&&(os.click(),as.blur())})),Ki.onclick=function(){switch(Qi.selectedIndex){case 0:switch(es.selectedIndex){case 0:!function(e){var t;try{if((t=ss(e)).error)return void cv("Tank code invalid!",t.error)}catch(e){return void cv("Tank code invalid!",e)}if(t.type&&"full"!=t.type)cv("Tank code invalid!",`Code is not a full tank code, it's a \n\t\t${{weapon:"weapon",body:"body",full:"full tank"}[t.type]} code. Import as a "${{weapon:"Weapon Upgrade",body:"Body Upgrade",full:"Full Tank"}[t.type]} instead of a "Full Tank".`);else{var n=t.version||0;function a(e,t){return typeof t==typeof e?t:e}lo.gadgets=a([],ms(t.gadgets||[]));for(let r in lo.gadgets){let o=lo.gadgets[r];o.color&&[127,128,129,130,131].includes(o.color)&&delete lo.gadgets[r].color,o.team&&[127,128,129,130,131].includes(o.team)&&delete lo.gadgets[r].team,o.auraColor&&[127,128,129,130,131].includes(o.auraColor)&&delete lo.gadgets[r].auraColor}lo.layers=a([],fs(t.layers||[]));for(let i in lo.layers){let s=lo.layers[i];s.team&&[127,128,129,130,131].includes(s.team)&&delete lo.layers[i].team}lo.outerSize=a(0,t.outerSize||0),lo.sides=a(0,hr(t.sides||0)),lo.outerSides=a(0,hr(t.outerSides||0)),lo.healthMultiplier=a(1,Ii(t.healthMultiplier,1)),lo.bodyDamageMultiplier=a(1,Ii(t.bodyDamageMultiplier,1)),lo.speedMultiplier=a(1,Ii(t.speedMultiplier,1)),lo.cameraSizeMultiplier=a(1,Ii(t.bodyCameraSizeMultiplier,1)),lo.maxDrones=a(3,Ii(t.maxBodyDrones,3)),lo.name=a("",t.bodyUpgradeName||""),so.barrels=a([],hs(t.barrels||[]));for(let l in so.barrels){let d=so.barrels[l];d.color&&[127,128,129,130,131].includes(d.color)&&delete so.barrels[l].color,d.team&&[127,128,129,130,131].includes(d.team)&&delete so.barrels[l].team}so.cameraSizeMultiplier=a(1,Ii(t.weaponCameraSizeMultiplier,1)),so.maxDrones=a(3,Ii(t.maxWeaponDrones,3)),so.name=a("",t.weaponUpgradeName||""),lo.level=a(1,Ii(t.level,1)),lo.size=a(1,Ii(t.size,1)),lo.size<0&&(lo.size=0),lo.type=a(0,Ii(t.tankType,0)),lo.radiant=a(0,Ii(t.radiant,0)),lo.team=Ai(t.team,0),[127,128,129,130,131].includes(lo.team)&&(lo.team=0),lo.visualTeam=Ai(t.visualTeam,void 0),lo.overrideTankName=a("",t.overrideTankName||""),is(n,!0,!0),ab(),$i(),rb(),Hi()}}(ts.value);break;case 1:!function(e){var t;try{if((t=ss(e)).error)return void cv("Weapon code invalid!",t.error)}catch(e){return void cv("Weapon code invalid!",e)}if(t.type&&"weapon"!=t.type)cv("Weapon code invalid!",`Code is not a weapon code, it's a \n\t\t${{weapon:"weapon",body:"body",full:"full tank"}[t.type]} code. Import as a "${{weapon:"Weapon Upgrade",body:"Body Upgrade",full:"Full Tank"}[t.type]} instead of a "Weapon Upgrade".`);else{function a(e,t){return typeof t==typeof e?t:e}var n=t.version||0;so.barrels=a([],hs(t.barrels||[]));for(let r in so.barrels){let o=so.barrels[r];o.color&&[127,128,129,130,131].includes(o.color)&&delete so.barrels[r].color,o.team&&[127,128,129,130,131].includes(o.team)&&delete so.barrels[r].team}so.cameraSizeMultiplier=a(1,Ii(t.cameraSizeMultiplier,1)),so.maxDrones=a(3,Ii(t.maxDrones,3)),so.name=a("",t.name||""),is(n,!0,!1),rb(),Hi()}}(ts.value);break;case 2:!function(e){var t;try{if((t=ss(e)).error)return void cv("Body code invalid!",t.error)}catch(e){return void cv("Body code invalid!",e)}if(t.type&&"body"!=t.type)cv("Body code invalid!",`Code is not a body code, it's a \n\t\t${{weapon:"weapon",body:"body",full:"full tank"}[t.type]} code. Import as a "${{weapon:"Weapon Upgrade",body:"Body Upgrade",full:"Full Tank"}[t.type]} instead of a "Body Upgrade".`);else{function a(e,t){return typeof t==typeof e?t:e}var n=t.version||0;lo.gadgets=a([],ms(t.gadgets||[]));for(let r in lo.gadgets){let o=lo.gadgets[r];o.color&&[127,128,129,130,131].includes(o.color)&&delete lo.gadgets[r].color,o.team&&[127,128,129,130,131].includes(o.team)&&delete lo.gadgets[r].team,o.auraColor&&[127,128,129,130,131].includes(o.auraColor)&&delete lo.gadgets[r].auraColor}lo.layers=a([],fs(t.layers||[]));for(let i in lo.layers){let s=lo.layers[i];s.team&&[127,128,129,130,131].includes(s.team)&&delete lo.layers[i].team}lo.outerSize=a(0,t.outerSize||0),lo.sides=a(0,hr(t.sides||0)),lo.outerSides=a(0,hr(t.outerSides||0)),lo.healthMultiplier=a(1,Ii(t.healthMultiplier,1)),lo.bodyDamageMultiplier=a(1,Ii(t.bodyDamageMultiplier,1)),lo.speedMultiplier=a(1,Ii(t.speedMultiplier,1)),lo.cameraSizeMultiplier=a(1,Ii(t.cameraSizeMultiplier,1)),lo.maxDrones=a(3,Ii(t.maxDrones,3)),lo.name=a("",t.name||""),is(n,!1,!0),ab(),$i()}}(ts.value)}break;case 1:switch(es.selectedIndex){case 0:ts.value=ls({type:"full",version:10,gadgets:us(lo.gadgets||[]),layers:ds(lo.layers||[]),sides:lo.sides||0,outerSides:lo.outerSides||0,outerSize:lo.outerSize||0,healthMultiplier:lo.healthMultiplier,bodyDamageMultiplier:lo.bodyDamageMultiplier,speedMultiplier:lo.speedMultiplier,bodyCameraSizeMultiplier:lo.cameraSizeMultiplier,maxBodyDrones:lo.maxDrones,bodyUpgradeName:lo.name,barrels:cs(so.barrels||[]),weaponCameraSizeMultiplier:so.cameraSizeMultiplier,maxWeaponDrones:so.maxDrones,weaponUpgradeName:so.name,level:lo.level,size:lo.size,tankType:lo.type,radiant:lo.radiant,team:lo.team,visualTeam:lo.visualTeam,overrideTankName:lo.overrideTankName||""});break;case 1:ts.value=ls({type:"weapon",version:10,barrels:cs(so.barrels||[]),cameraSizeMultiplier:so.cameraSizeMultiplier,maxDrones:so.maxDrones,name:so.name});break;case 2:ts.value=ls({type:"body",version:10,gadgets:us(lo.gadgets||[]),layers:ds(lo.layers||[]),sides:lo.sides,outerSides:lo.outerSides,outerSize:lo.outerSize,healthMultiplier:lo.healthMultiplier,bodyDamageMultiplier:lo.bodyDamageMultiplier,speedMultiplier:lo.speedMultiplier,maxDrones:lo.maxDrones,cameraSizeMultiplier:lo.cameraSizeMultiplier,name:lo.name})}}};var ws={},xs={},ks=0,Ss=0,Ms=0,Ts=1,_s=!1,zs=!1,Cs=!1,Es=!1,Ls=!1,Is=!1,As=!1,Os=document.getElementById("debug-mode"),Bs={x:0,y:0};function Ds(e){!function(e,t){tl=t;var n=((el=e)-window.innerWidth/2+Hh)*Dh*Kh,a=(tl-window.innerHeight/2+Yh)*Dh*Kh;lb(n,a)}(e.clientX,e.clientY),Bs.x=e.clientX*Kh,Bs.y=e.clientY*Kh,qi=e.clientY>window.innerHeight-150/Kh&&Math.abs(e.clientX-window.innerWidth/2)>window.innerWidth/2-300/Kh}var Ps,Rs=[{align:1,selected:!1,x:0,y:0},{align:-1,selected:!1,x:0,y:0}],Ns=0,js=0,Fs=0;function Us(){Zs(),Vs(),nl(),qs()}function Ws(e){if(!oo){var t,n=ys(e.changedTouches);try{for(n.s();!(t=n.n()).done;){var a,r=t.value,o=ys(Rs);try{for(o.s();!(a=o.n()).done;){var i=a.value;if(!i.selected){var s=i.align*Rr==1?0:xh.width,l=xh.height,d=s+ +Ur.joystickOffset*i.align*Rr,c=l-+Ur.joystickOffset,u=r.clientX*Kh,f=r.clientY*Kh;if(m={x:d,y:c,size:+Ur.joystickSize},p={x:u,y:f,size:Math.min(r.radiusX,r.radiusY)*Kh},g=m.x-p.x,y=m.y-p.y,Math.sqrt(g*g+y*y)<m.size+p.size){i.selected=!0,i.selectedIdentifier=r.identifier,i.x=-(d-u)/2,i.y=-(c-f)/2;var h=Math.max(+Ur.joystickSize/2,Math.sqrt(i.x*i.x+i.y*i.y));i.x/=h,i.y/=h}}}}catch(e){o.e(e)}finally{o.f()}}}catch(e){n.e(e)}finally{n.f()}}var m,p,g,y;Ks({x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},!1),Us()}function Hs(e){var t,n=ys(e.changedTouches);try{for(n.s();!(t=n.n()).done;){var a,r=t.value,o=ys(Rs);try{for(o.s();!(a=o.n()).done;){var i=a.value;if(i.selected&&i.selectedIdentifier==r.identifier){var s=i.align*Rr==1?0:xh.width,l=xh.height,d=s+ +Ur.joystickOffset*i.align*Rr,c=l-+Ur.joystickOffset,u=r.clientX*Kh,f=r.clientY*Kh;i.x=-(d-u)/2,i.y=-(c-f)/2;var h=Math.max(+Ur.joystickSize/2,Math.sqrt(i.x*i.x+i.y*i.y));i.x/=h,i.y/=h}}}catch(e){o.e(e)}finally{o.f()}}}catch(e){n.e(e)}finally{n.f()}e.cancelable&&e.preventDefault(),Us()}function Ys(e){var t,n=ys(e.changedTouches);try{for(n.s();!(t=n.n()).done;){var a,r=t.value,o=ys(Rs);try{for(o.s();!(a=o.n()).done;){var i=a.value;i.selected&&i.selectedIdentifier==r.identifier&&(i.selected=!1,i.x=0,i.y=0)}}catch(e){o.e(e)}finally{o.f()}}}catch(e){n.e(e)}finally{n.f()}Us()}function $s(e){var t;Qy>0&&e<9&&e>0&&15!=Jy[e-1]&&(Bm[e-1]=zb?1.1:1.3,function(e){Pm=e}(1.2),Jy[e-1]++,Qy--,t=e,$v.sendMessage(20,t))}function Gs(e){var t=e.keyCode,n=e.repeat,a=Tp,r=document.activeElement.tagName.toLowerCase();if(!Hr&&"input"!==r&&"textarea"!==r){var o=e.ctrlKey||e.metaKey;if(oo){if(o){if(t==Jr.undo)return function(){if(Zi.length>1){Ji.push(Zi.pop());var e=sr(Zi[Zi.length-1]);so=e[0],lo=e[1],Jo=e[2],Vo(!1),ab(),rb()}}(),e.preventDefault();if(t==Jr.redo)return function(){if(Ji.length>0){var e=sr(Ji.pop());so=e[0],lo=e[1],Jo=e[2],Vo(!1),ab(),rb(),Vi(!1)}}(),e.preventDefault();if(t==Jr.selectAll)return function(){ei();for(var e=0;e<so.barrels.length;e++)Jo.push({type:"barrel",index:e,stack:[]});for(var t=0;t<lo.gadgets.length;t++)Jo.push({type:"gadget",index:t,stack:[]});for(var n=0;n<lo.layers.length;n++)Jo.push({type:"layer",index:n,stack:[]});Qo()}(),e.preventDefault();if(t==Jr.duplicate)return Ti(),e.preventDefault();if(t==Jr.moveForward)return ki(),e.preventDefault();if(t==Jr.moveBackward)return Si(),e.preventDefault()}else if(t==Jr.delete)return Mi(),e.preventDefault()}else ws[t]=!0;t!=Jr.autoFire||oo||n||a?t!=Jr.autoSpin||oo||n||a?t!=Jr.spinLock||oo||n||a?t!=Jr.debugMode||oo||n||a?t!=Jr.passiveMode||oo||n||a?t!=Jr.screenshotMode||oo||n||a?t!=Jr.fire||oo||a?t!=Jr.repel||oo||a?t==Jr.settings?(a&&Op(),gp&&vp(),Hr?Xr():Yr()):t!=Jr.quickChat||n||a||oo||!Ur.showChat?t==Jr.escape?Ep&&Bp():oo||a||!Number.isNaN(+e.key)&&+e.key>0&&(Ep?Lp(+e.key-1,!0):$s(e.key)):Bp():Vs():(Zs(),Vs()):oo||(mx("tut_screenshot_mode")||Ty?$f(!Ef,!0):(rv(!0),hx("tut_screenshot_mode",!0),setTimeout((function(){Zy(`Pressing ${Qr[t]} again will enable screenshot mode. This will hide all HUD elements.`)}),0),rv(!1))):(ob(As=!As),Zy(`Passive Mode (${Qr[t]}): ${As?"ON":"OFF"}`,.5)):((Is=!Is)?Os.classList.remove("hide"):Os.classList.add("hide"),Zy(`Debug Mode (${Qr[t]}): ${Is?"ON":"OFF"}`,.5)):(Ls=!Ls,Zy(`Spin Lock (${Qr[t]}): ${Ls?"ON":"OFF"}`,.5)):((Es=!Es)||(Ts*=-1),Zy(`Auto Spin (${Qr[t]}): ${Es?"ON":"OFF"}`,.5)):(Cs=!Cs,function(){for(var e=0,t=Object.entries(xs);e<t.length;e++){var n=gs(t[e],2),a=n[0];n[1],xs[a]=!1}Js(),Zs()}(),Zy(`Auto Fire (${Qr[t]}): ${Cs?"ON":"OFF"}`,.5),Zs(),xs[1]=!1,Js()),qs()}}function Xs(e){var t=e.keyCode;Mb===document.activeElement||oo||(ws[t]=!1,qs(),Zs(),Vs())}function qs(){var e=0,t=0;if(ws[Jr.weaponTree]?(_s||Hp(!0),_s=!0):_s=!1,ws[Jr.bodyTree]?(zs||Hp(!1),zs=!0):zs=!1,Rs[0].selected){e=Rs[0].x,t=-Rs[0].y;var n=Math.sqrt(e*e+t*t);n>.2?(e/=n,t/=n):(e=0,t=0)}else(ws[Jr.moveUp]||ws[Jr.moveUpAlt])&&t++,(ws[Jr.moveDown]||ws[Jr.moveDownAlt])&&t--,(ws[Jr.moveLeft]||ws[Jr.moveLeftAlt])&&e--,(ws[Jr.moveRight]||ws[Jr.moveRightAlt])&&e++;ks==e&&Ss==t||ib(ks=e,Ss=t)}function Zs(){oo?nb(!1):Cs||xs[1]||ws[Jr.fire]||Rs[1].selected?nb(!0):nb(!1)}function Vs(){xs[3]||ws[Jr.repel]?sb(2):xs[1]||ws[Jr.fire]||Cs||Rs[1].selected?sb(1):sb(0)}function Js(){Vs()}function Ks(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!t||!zb){var n=Date.now();window.u.send(["shooting",!0]),n-Gi<1e3?++Xi>4&&(mx("tut_autofire")||Ty||zb||(rv(!0),hx("tut_autofire",!0),setTimeout((function(){Zy("Hold down click to shoot automatically.")}),1e3),setTimeout((function(){Zy("You can also press E to turn on auto fire.")}),8e3),rv(!1))):Xi=0,Gi=n,!function(e){if(!Ef)return!1;if(!oo&&Is&&Ur.copyIds&&(Af=!0),Cp){var t=cy(e);if(Ep=!1,null!=t)return void(_p[t.value].add?Ip():1==t.type?Ip(t.value):0==t.type&&Lp(t.value))}if(Um>-100){var n=dy(e);if(null!=n)return $s(n),!0}nh=e,eh=!0;var a,r=ly(e);if(r){if(-1==r.i)r.weapon?iv():ov();else{var o=(r.weapon?nv:av)[r.set][r.i];(function(e,t){e?$v.sendMessage(28,t):$v.sendMessage(24,t);var n=!1,a=!1;if(e)for(var r=0;r<tv.length;r++){var o=tv[r];if(o.id==t)for(var i=0;i<o.barrels.length;i++)1==o.barrels[i].type&&(n=!0)}else for(var s=0;s<ev.length;s++){var l=ev[s];if(l.id==t)for(var d=0;d<l.gadgets.length;d++)1==l.gadgets[d].type?n=!0:0==l.gadgets[d].type?a=!0:l.gadgets[d].type}a&&setTimeout((function(){mx("tut_auto_cannons")||Ty||zb||(rv(!0),hx("tut_auto_cannons",!0),setTimeout((function(){Zy("You can disable your auto cannons by pressing V.")}),1e3),rv(!1))}),1e4),a&&setTimeout((function(){mx("tut_auras")||Ty||zb||(rv(!0),hx("tut_auras",!0),setTimeout((function(){Zy("You can disable your auras by pressing V.")}),1e3),rv(!1))}),1e4),n&&(mx("tut_drones")||Ty||zb||(rv(!0),hx("tut_drones",!0),setTimeout((function(){Zy("Hold down left click to control your drones.")}),1e3),setTimeout((function(){Zy("You can also control them by turning on auto fire. (Press E)")}),4e3),setTimeout((function(){Zy("Repel your drones by holding down right click.")}),9e3),setTimeout((function(){Zy("Upgrading your bullet penetration stat upgrades your max drone cap.")}),13e3),rv(!1)))})(a=r.weapon,o.id),a?iv():ov()}return!0}return!1}({x:e.x*Kh,y:e.y*Kh})&&t&&(xs[e.which]=!0,Js(),Zs())}}function Qs(e){window.u.send(["shooting",!1]),xs[e.which]=!1,Js(),Zs()}var el=0,tl=0;function nl(){(!Es&&!Ls||oo)&&(oo?Ms=1.5708:Rs[1].selected?Ms=Math.atan2(Rs[1].x,-Rs[1].y):zb||(Ms=Math.atan2(el-(window.innerWidth/2+Hh/Dh),window.innerHeight/2+Yh/Dh-tl)),eb(Ms))}function al(){for(var e=0,t=Object.entries(ws);e<t.length;e++){var n=gs(t[e],2),a=n[0];n[1],ws[a]=!1}Zs(),qs()}function rl(){var e;al();var t=ys(Rs);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.selected=!1,n.y=0,n.x=0}}catch(e){t.e(e)}finally{t.f()}window.removeEventListener("mousedown",Ks),window.removeEventListener("mouseup",Qs),window.removeEventListener("keydown",Gs),window.removeEventListener("keyup",Xs),window.removeEventListener("mousemove",Ds),window.removeEventListener("click",Ds),window.removeEventListener("touchstart",Ws),window.removeEventListener("touchmove",Hs),window.removeEventListener("touchend",Ys),window.removeEventListener("focus",al),window.removeEventListener("blur",al)}var ol={},il={visual:{gridSize:30,showMinimap:!0,backgroundColor:"#CDCDCD",gridColor:"#C8C8C8",particles:[{spawnrate:0,speed:{min:0,max:0},d:{min:0,max:360},size:{min:6,max:6},lifetime:{min:30,max:60},sides:{min:0,max:0},transparency:{min:1,max:1},color:{min:"#CDCDCD",max:"#C8C8C8"}}]},bases:[],walls:[],gates:[],trueMapSize:1};function sl(e){return(sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ll(e,t){var n,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return dl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dl(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0;function s(){}return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw n}}}}function dl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function cl(e,t,n){var a;return a=function(e,t){if("object"!==sl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!==sl(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"===sl(a)?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cl(Ps={peacekeeper3:{barrels:[{type:0,rot:180,offset:0,width:.6,length:.35,distance:.6,visualType:1},{type:0,rot:180,offset:0,width:.8,length:.35,distance:.3,visualType:1},{type:0,rot:0,offset:0,width:.3,length:.4,distance:.6},{type:6,rot:0,offset:0,width:.6,length:.5,distance:-.2}]},peacekeeper2:{barrels:[{type:0,rot:180,offset:0,width:.8,length:.4,distance:.3,visualType:1},{type:0,rot:0,offset:0,width:.35,length:.5,distance:.6},{type:6,rot:0,offset:0,width:.7,length:.5,distance:-.2}]},peacekeeper1:{barrels:[{type:0,rot:180,offset:0,width:.6,length:.3,distance:.3,visualType:1},{type:0,rot:0,offset:0,width:.3,length:.5,distance:.3}]},abyssling:{barrels:[{type:0,rot:0,offset:0,width:.4,length:.9,distance:0},{type:2,rot:180,offset:0,width:.5,length:.65,distance:0},{type:2,rot:60,offset:0,width:.5,length:.65,distance:0},{type:2,rot:-60,offset:0,width:.5,length:.65,distance:0},{type:2,rot:120,offset:0,width:.5,length:.65,distance:0},{type:2,rot:-120,offset:0,width:.5,length:.65,distance:0}]},abyssguardian:{barrels:[{type:4,rot:180,offset:0,width:.35,length:.35,distance:.6},{type:4,rot:90,offset:0,width:.35,length:.35,distance:.6},{type:4,rot:-90,offset:0,width:.35,length:.35,distance:.6},{type:6,rot:0,offset:0,width:.3,length:.35,distance:.6,visualType:0},{type:0,rot:0,offset:0,width:.2,length:.65,distance:.6,visualType:0},{type:8,rot:45,offset:0,width:.3,length:.45,distance:.4},{type:8,rot:-45,offset:0,width:.3,length:.45,distance:.4},{type:8,rot:135,offset:0,width:.3,length:.45,distance:.4},{type:8,rot:-135,offset:0,width:.3,length:.45,distance:.4}]},hexagonboss:{barrels:[{type:9,rot:60,offset:0,width:.5,length:.8,distance:0},{type:9,rot:180,offset:0,width:.5,length:.8,distance:0},{type:9,rot:300,offset:0,width:.5,length:.8,distance:0}]},streamliner:{barrels:[{type:0,rot:0,offset:0,width:.4,length:1.3,distance:0},{type:0,rot:0,offset:0,width:.4,length:1.2,distance:0},{type:0,rot:0,offset:0,width:.4,length:1.1,distance:0},{type:0,rot:0,offset:0,width:.4,length:1,distance:0},{type:0,rot:0,offset:0,width:.4,length:.9,distance:0},{type:0,rot:0,offset:0,width:.4,length:.8,distance:0},{type:0,rot:0,offset:0,width:.4,length:.7,distance:0}]},mono:{barrels:[{type:0,rot:0,offset:0,width:.5,length:1,distance:0}]},assassin:{barrels:[{type:0,rot:0,offset:0,width:.5,length:1.25,distance:0}]},split:{barrels:[{type:0,rot:35,offset:0,width:.25,length:.75,distance:0},{type:0,rot:-35,offset:0,width:.25,length:.75,distance:0},{type:0,rot:0,offset:0,width:.5,length:1,distance:0}]},annihilator:{barrels:[{type:0,rot:0,offset:0,width:1,length:1.1,distance:0}]},spread:{barrels:[{type:0,rot:-60,offset:0,width:.25,length:.7,distance:0},{type:0,rot:60,offset:0,width:.25,length:.7,distance:0},{type:0,rot:-40,offset:0,width:.25,length:.8,distance:0},{type:0,rot:40,offset:0,width:.25,length:.8,distance:0},{type:0,rot:20,offset:0,width:.25,length:.9,distance:0},{type:0,rot:-20,offset:0,width:.25,length:.9,distance:0},{type:0,rot:0,offset:0,width:.5,length:1,distance:0}]},disperse:{barrels:[{type:0,rot:-75,offset:0,width:.25,length:.7,distance:0},{type:0,rot:75,offset:0,width:.25,length:.7,distance:0},{type:0,rot:-60,offset:0,width:.25,length:.8,distance:0},{type:0,rot:60,offset:0,width:.25,length:.8,distance:0},{type:0,rot:-45,offset:0,width:.25,length:.9,distance:0},{type:0,rot:45,offset:0,width:.25,length:.9,distance:0},{type:0,rot:-30,offset:0,width:.25,length:1,distance:0},{type:0,rot:30,offset:0,width:.25,length:1,distance:0},{type:0,rot:15,offset:0,width:.25,length:1.1,distance:0},{type:0,rot:-15,offset:0,width:.25,length:1.1,distance:0},{type:0,rot:0,offset:0,width:.5,length:1.2,distance:0}]},octo:{barrels:[{type:0,rot:0,offset:0,width:.5,length:1,distance:0},{type:0,rot:180,offset:0,width:.5,length:1,distance:0},{type:0,rot:90,offset:0,width:.5,length:1,distance:0},{type:0,rot:-90,offset:0,width:.5,length:1,distance:0},{type:0,rot:45,offset:0,width:.5,length:1,distance:0},{type:0,rot:-45,offset:0,width:.5,length:1,distance:0},{type:0,rot:135,offset:0,width:.5,length:1,distance:0},{type:0,rot:-135,offset:0,width:.5,length:1,distance:0}]},quadro:{barrels:[{type:0,rot:0,offset:.65,width:.3,length:1,distance:0},{type:0,rot:0,offset:-.65,width:.3,length:1,distance:0},{type:0,rot:0,offset:-.3,width:.3,length:.8,distance:0},{type:0,rot:0,offset:.3,width:.3,length:.8,distance:0}]},marksman:{barrels:[{type:0,rot:0,offset:0,width:.5,length:1.4,distance:0}]},debris:{barrels:[{type:2,rot:180,offset:0,width:.2,length:.45,distance:0},{type:2,rot:180,offset:.5,width:.1,length:.35,distance:0},{type:2,rot:180,offset:-.5,width:.1,length:.35,distance:0},{type:2,rot:60,offset:0,width:.2,length:.45,distance:0},{type:2,rot:60,offset:.5,width:.1,length:.35,distance:0},{type:2,rot:60,offset:-.5,width:.1,length:.35,distance:0},{type:2,rot:-60,offset:0,width:.2,length:.45,distance:0},{type:2,rot:-60,offset:.5,width:.1,length:.35,distance:0},{type:2,rot:-60,offset:-.5,width:.1,length:.35,distance:0}]},satellite:{barrels:[{type:1,rot:180,offset:0,width:.2,length:.45,distance:0},{type:1,rot:180,offset:.5,width:.1,length:.35,distance:0},{type:1,rot:180,offset:-.5,width:.1,length:.35,distance:0},{type:1,rot:60,offset:0,width:.2,length:.45,distance:0},{type:1,rot:60,offset:.5,width:.1,length:.35,distance:0},{type:1,rot:60,offset:-.5,width:.1,length:.35,distance:0},{type:1,rot:-60,offset:0,width:.2,length:.45,distance:0},{type:1,rot:-60,offset:.5,width:.1,length:.35,distance:0},{type:1,rot:-60,offset:-.5,width:.1,length:.35,distance:0}]},charon:{barrels:[{type:2,rot:-60,offset:0,width:.55,length:.5,distance:0},{type:2,rot:60,offset:0,width:.55,length:.5,distance:0},{type:2,rot:180,offset:0,width:.55,length:.5,distance:0}]},ganymede:{barrels:[{type:4,rot:180,offset:0,distance:.4,width:.4,length:.225},{type:4,rot:60,offset:0,distance:.4,width:.4,length:.225},{type:4,rot:-60,offset:0,distance:.4,width:.4,length:.225},{type:5,rot:180,offset:-.6,distance:.4,width:.1,length:.15},{type:5,rot:180,offset:.6,distance:.4,width:.1,length:.15},{type:5,rot:60,offset:-.6,distance:.4,width:.1,length:.15},{type:5,rot:60,offset:.6,distance:.4,width:.1,length:.15},{type:5,rot:-60,offset:-.6,distance:.4,width:.1,length:.15},{type:5,rot:-60,offset:.6,distance:.4,width:.1,length:.15}]},synope:{barrels:[{type:3,rot:180,offset:0,width:.4,length:.525,distance:0},{type:3,rot:60,offset:0,width:.4,length:.525,distance:0},{type:3,rot:-60,offset:0,width:.4,length:.525,distance:0}]},minigun:{barrels:[{type:0,rot:0,offset:0,width:.2,length:1.2,distance:0},{type:0,rot:0,offset:-.5,width:.2,length:1.2,distance:0},{type:0,rot:0,offset:.5,width:.2,length:1.2,distance:0},{type:0,rot:0,offset:0,width:.2,length:.8,distance:0},{type:0,rot:0,offset:-.5,width:.2,length:.8,distance:0},{type:0,rot:0,offset:.5,width:.2,length:.8,distance:0}]},amalgam:{barrels:[{type:0,rot:0,offset:-.5,width:.4,length:1,distance:0},{type:0,rot:0,offset:.5,width:.4,length:1,distance:0},{type:2,rot:15,offset:.4,width:.65,length:.75,distance:0},{type:2,rot:-15,offset:-.4,width:.65,length:.75,distance:0},{type:1,rot:140,offset:0,width:.5,length:.8,distance:0},{type:1,rot:-140,offset:0,width:.5,length:.8,distance:0}]},wave:{barrels:[{type:0,rot:-150,offset:0,width:.5,length:.9,distance:0},{type:0,rot:150,offset:0,width:.5,length:.9,distance:0},{type:2,rot:180,offset:0,width:.65,length:1,distance:.1},{type:2,rot:180,offset:0,width:.65,length:1,distance:-.4},{type:0,rot:0,offset:0,width:.4,length:1,distance:0}]},wake:{barrels:[{type:2,rot:180,offset:0,width:.65,length:1,distance:0},{type:0,rot:0,offset:0,width:.4,length:.9,distance:0},{type:0,rot:-140,offset:0,width:.5,length:.8,distance:0},{type:0,rot:140,offset:0,width:.5,length:.8,distance:0}]},alpha:{barrels:[{type:2,rot:0,offset:0,width:1.5,length:1,distance:0}]},beta:{barrels:[{type:2,rot:0,offset:0,width:1,length:1,distance:0}]},pulsar:{barrels:[{type:0,rot:180,offset:.3,width:.2,length:.4,distance:0},{type:0,rot:180,offset:-.3,width:.2,length:.4,distance:0},{type:0,rot:60,offset:.3,width:.2,length:.4,distance:0},{type:0,rot:60,offset:-.3,width:.2,length:.4,distance:0},{type:0,rot:-60,offset:.3,width:.2,length:.4,distance:0},{type:0,rot:-60,offset:-.3,width:.2,length:.4,distance:0}]},engineer:{barrels:[{type:8,rot:0,offset:0,width:.75,length:.95,distance:0}]},raider:{barrels:[{type:8,rot:0,offset:0,width:.9,length:.85,distance:0}]},mechanic:{barrels:[{type:8,rot:120,offset:0,width:.55,length:.85,distance:0},{type:8,rot:-120,offset:0,width:.55,length:.85,distance:0},{type:8,rot:0,offset:0,width:.55,length:.85,distance:0}]},arsenal:{barrels:[{type:8,rot:0,offset:0,width:.6,length:.95,distance:.3},{type:8,rot:0,offset:0,width:.6,length:.95,distance:-.3}]},shrapnel:{barrels:[{type:2,rot:0,offset:0,width:.45,length:.75,distance:0},{type:2,rot:180,offset:0,width:.45,length:.75,distance:0},{type:2,rot:90,offset:0,width:.45,length:.75,distance:0},{type:2,rot:-90,offset:0,width:.45,length:.75,distance:0},{type:2,rot:45,offset:0,width:.45,length:.75,distance:0},{type:2,rot:-45,offset:0,width:.45,length:.75,distance:0},{type:2,rot:135,offset:0,width:.45,length:.75,distance:0},{type:2,rot:-135,offset:0,width:.45,length:.75,distance:0}]},emperor:{barrels:[{type:1,rot:0,offset:0,width:.5,length:.8,distance:0},{type:1,rot:90,offset:0,width:.5,length:.8,distance:0},{type:1,rot:-90,offset:0,width:.5,length:.8,distance:0},{type:1,rot:-180,offset:0,width:.5,length:.8,distance:0}]},overlord:{barrels:[{type:1,rot:0,offset:0,width:.5,length:.8,distance:0},{type:1,rot:120,offset:0,width:.5,length:.8,distance:0},{type:1,rot:-120,offset:0,width:.5,length:.8,distance:0}]},horizon:{barrels:[{type:0,rot:22.5,offset:0,width:.2,length:.8,distance:0},{type:0,rot:-22.5,offset:0,width:.2,length:.8,distance:0},{type:0,rot:45,offset:0,width:.2,length:.8,distance:0},{type:0,rot:-45,offset:0,width:.2,length:.8,distance:0},{type:0,rot:67.5,offset:0,width:.2,length:.8,distance:0},{type:0,rot:-67.5,offset:0,width:.2,length:.8,distance:0},{type:0,rot:90,offset:0,width:.5,length:1,distance:0},{type:0,rot:-90,offset:0,width:.5,length:1,distance:0},{type:0,rot:0,offset:0,width:.5,length:1,distance:0}]}},"disperse",{barrels:[{type:0,rot:-75,offset:0,width:.25,length:.7,distance:0},{type:0,rot:75,offset:0,width:.25,length:.7,distance:0},{type:0,rot:-60,offset:0,width:.25,length:.8,distance:0},{type:0,rot:60,offset:0,width:.25,length:.8,distance:0},{type:0,rot:-45,offset:0,width:.25,length:.9,distance:0},{type:0,rot:45,offset:0,width:.25,length:.9,distance:0},{type:0,rot:-30,offset:0,width:.25,length:1,distance:0},{type:0,rot:30,offset:0,width:.25,length:1,distance:0},{type:0,rot:15,offset:0,width:.25,length:1.1,distance:0},{type:0,rot:-15,offset:0,width:.25,length:1.1,distance:0},{type:0,rot:0,offset:0,width:.5,length:1.2,distance:0}]}),cl(Ps,"gunner",{barrels:[{type:0,rot:0,offset:-.3,width:.2,length:.8,distance:0},{type:0,rot:0,offset:.3,width:.2,length:.8,distance:0},{type:0,rot:0,offset:-.8,width:.2,length:.6,distance:0},{type:0,rot:0,offset:.8,width:.2,length:.6,distance:0}]}),cl(Ps,"riot",{barrels:[{type:2,rot:0,offset:0,width:.65,length:1,distance:.5},{type:2,rot:0,offset:0,width:.65,length:1,distance:0},{type:2,rot:0,offset:0,width:.65,length:1,distance:-.5}]}),cl(Ps,"barricade",{barrels:[{type:2,rot:0,offset:0,width:.65,length:1,distance:.1},{type:2,rot:0,offset:0,width:.65,length:1,distance:-.4}]}),cl(Ps,"palisade",{barrels:[{type:2,rot:0,offset:0,width:.65,length:1,distance:0},{type:2,rot:90,offset:0,width:.65,length:1,distance:0},{type:2,rot:-90,offset:0,width:.65,length:1,distance:0},{type:2,rot:-180,offset:0,width:.65,length:1,distance:0}]}),cl(Ps,"blazar",{barrels:[{type:0,rot:180,offset:0,width:.35,length:.5,distance:0},{type:0,rot:60,offset:0,width:.35,length:.5,distance:0},{type:0,rot:-60,offset:0,width:.35,length:.5,distance:0}]}),cl(Ps,"quasar",{barrels:[{type:0,rot:180,offset:.4,distance:.1,width:.2,length:.35000000000000003},{type:0,rot:180,offset:-.4,distance:.1,width:.2,length:.35000000000000003},{type:0,rot:180,offset:0,distance:.1,width:.25,length:.425},{type:0,rot:60,offset:.4,distance:.1,width:.2,length:.35000000000000003},{type:0,rot:60,offset:-.4,distance:.1,width:.2,length:.35000000000000003},{type:0,rot:60,offset:0,distance:.1,width:.25,length:.425},{type:0,rot:-60,offset:.4,distance:.1,width:.2,length:.35000000000000003},{type:0,rot:-60,offset:-.4,distance:.1,width:.2,length:.35000000000000003},{type:0,rot:-60,offset:0,distance:.1,width:.25,length:.425}]}),cl(Ps,"moon",{barrels:[{type:1,rot:180,offset:0,width:.3,length:.5,distance:0},{type:1,rot:180,offset:.3,width:.1,length:.3,distance:0},{type:1,rot:180,offset:-.3,width:.1,length:.3,distance:0},{type:1,rot:60,offset:0,width:.3,length:.5,distance:0},{type:1,rot:60,offset:.3,width:.1,length:.3,distance:0},{type:1,rot:60,offset:-.3,width:.1,length:.3,distance:0},{type:1,rot:-60,offset:0,width:.3,length:.5,distance:0},{type:1,rot:-60,offset:.3,width:.1,length:.3,distance:0},{type:1,rot:-60,offset:-.3,width:.1,length:.3,distance:0}]}),cl(Ps,"penta",{barrels:[{type:0,rot:-40,offset:0,width:.5,length:.8,distance:0},{type:0,rot:40,offset:0,width:.5,length:.8,distance:0},{type:0,rot:20,offset:0,width:.5,length:.9,distance:0},{type:0,rot:-20,offset:0,width:.5,length:.9,distance:0},{type:0,rot:0,offset:0,width:.5,length:1,distance:0}]}),cl(Ps,"brokenpenta",{barrels:[{type:0,rot:40,offset:0,width:.5,length:.8,distance:0},{type:0,rot:-20,offset:0,width:.5,length:.9,distance:0},{type:0,rot:0,offset:0,width:.5,length:1,distance:0},{type:0,rot:-40,offset:0,width:.5,length:.8,distance:0},{type:0,rot:20,offset:0,width:.5,length:.9,distance:0}]}),cl(Ps,"arc",{barrels:[{type:0,rot:45,offset:0,width:.5,length:1,distance:0},{type:0,rot:-45,offset:0,width:.5,length:1,distance:0},{type:0,rot:90,offset:0,width:.5,length:1,distance:0},{type:0,rot:-90,offset:0,width:.5,length:1,distance:0},{type:0,rot:0,offset:0,width:.5,length:1,distance:0}]}),cl(Ps,"manager",{barrels:[{type:1,rot:0,offset:0,width:1,length:1,distance:0}]}),cl(Ps,"stockade",{barrels:[{type:2,rot:0,offset:0,width:.65,length:1,distance:0},{type:2,rot:120,offset:0,width:.65,length:1,distance:0},{type:2,rot:-120,offset:0,width:.65,length:1,distance:0}]}),cl(Ps,"scrap",{barrels:[{type:2,rot:0,offset:0,width:.45,length:.75,distance:0},{type:2,rot:180,offset:0,width:.45,length:.75,distance:0},{type:2,rot:-60,offset:0,width:.45,length:.75,distance:0},{type:2,rot:60,offset:0,width:.45,length:.75,distance:0},{type:2,rot:-120,offset:0,width:.45,length:.75,distance:0},{type:2,rot:120,offset:0,width:.45,length:.75,distance:0}]}),cl(Ps,"trio",{barrels:[{type:0,rot:0,offset:-.5,width:.4,length:.8,distance:0},{type:0,rot:0,offset:.5,width:.4,length:.8,distance:0},{type:0,rot:0,offset:0,width:.4,length:1,distance:0}]}),cl(Ps,"duo",{barrels:[{type:0,rot:0,offset:-.5,width:.4,length:1,distance:0},{type:0,rot:0,offset:.5,width:.4,length:1,distance:0}]}),cl(Ps,"executive",{barrels:[{type:1,rot:0,offset:0,width:1.5,length:1,distance:0}]}),cl(Ps,"manufacturer",{barrels:[{type:3,rot:0,offset:0,width:.8,length:1.1,distance:0}]}),cl(Ps,"factory",{barrels:[{type:3,rot:0,offset:0,width:.5,length:1.1,distance:0}]}),cl(Ps,"hatcher",{barrels:[{type:3,rot:0,offset:0,width:.35,length:.9,distance:0},{type:3,rot:120,offset:0,width:.35,length:.9,distance:0},{type:3,rot:-120,offset:0,width:.35,length:.9,distance:0}]}),cl(Ps,"industry",{barrels:[{type:3,rot:0,offset:0,width:.35,length:.9,distance:0},{type:3,rot:120,offset:0,width:.35,length:.9,distance:0},{type:3,rot:-120,offset:0,width:.35,length:.9,distance:0}]}),cl(Ps,"alloy",{barrels:[{type:0,rot:0,offset:0,width:.5,length:1,distance:0},{type:1,rot:180,offset:0,width:.5,length:.8,distance:0}]}),cl(Ps,"trapper",{barrels:[{type:2,rot:0,offset:0,width:.65,length:1,distance:0}]}),cl(Ps,"hex",{barrels:[{type:0,rot:0,offset:0,width:.5,length:1,distance:0},{type:0,rot:180,offset:0,width:.5,length:1,distance:0},{type:0,rot:60,offset:0,width:.5,length:1,distance:0},{type:0,rot:-60,offset:0,width:.5,length:1,distance:0},{type:0,rot:120,offset:0,width:.5,length:1,distance:0},{type:0,rot:-120,offset:0,width:.5,length:1,distance:0}]}),cl(Ps,"machine",{barrels:[{type:0,rot:0,offset:0,width:.8,length:1,distance:0,visualType:1}]}),cl(Ps,"sprayer",{barrels:[{type:0,rot:0,offset:0,width:.5,length:1.2,distance:0},{type:0,rot:0,offset:0,width:.8,length:1,distance:0,visualType:1}]});var ul=Ps,fl={peacekeeper3:{sides:3,outerSides:3,outerSize:.4,layers:[{offsetX:0,offsetY:0,rot:0,size:.7,sides:3,outerSides:0,outerSize:0}],gadgets:[{type:0,offsetX:0,offsetY:0,length:.5,width:.3,baseRot:0}]},peacekeeper2:{sides:3,outerSides:3,outerSize:.3,layers:[],gadgets:[{type:0,offsetX:0,offsetY:0,length:.4,width:.25,baseRot:0}]},peacekeeper1:{sides:3,outerSides:3,outerSize:0,layers:[],gadgets:[{type:0,offsetX:0,offsetY:0,length:.4,width:.25,baseRot:0}]},abyssling:{sides:6,outerSides:6,outerSize:.1,layers:[{offsetX:0,offsetY:0,rot:0,size:.6,sides:6,outerSides:6,outerSize:.1}],gadgets:[{type:0,offsetX:0,offsetY:0,length:.5,width:.25,baseRot:0}]},abyssguardian:{sides:8,outerSides:8,outerSize:.12,layers:[{offsetX:0,offsetY:0,rot:0,size:.35,sides:8,outerSides:8,outerSize:.06},{offsetX:.48,offsetY:-.48,rot:0,size:.15,sides:8,outerSides:8,outerSize:.06},{offsetX:.48,offsetY:.48,rot:0,size:.15,sides:8,outerSides:8,outerSize:.06},{offsetX:-.48,offsetY:.48,rot:0,size:.15,sides:8,outerSides:8,outerSize:.06},{offsetX:-.48,offsetY:-.48,rot:0,size:.15,sides:8,outerSides:8,outerSize:.06},{offsetX:-.68,offsetY:0,rot:0,size:.15,sides:8,outerSides:8,outerSize:.06},{offsetX:.68,offsetY:0,rot:0,size:.15,sides:8,outerSides:8,outerSize:.06},{offsetX:0,offsetY:-.68,rot:0,size:.15,sides:8,outerSides:8,outerSize:.06},{offsetX:0,offsetY:.68,rot:0,size:.15,sides:8,outerSides:8,outerSize:.06}],gadgets:[{type:3,offsetX:0,offsetY:-.68,width:.1,tank:{gadgets:[],layers:[],barrels:[{type:0,rot:0,offset:-.5,width:.4,length:1,distance:0},{type:0,rot:0,offset:.5,width:.4,length:1,distance:0}]},rotationType:1,baseRot:0,sides:0,outerSides:0,outerSize:0,anchored:0,team:3},{type:3,offsetX:0,offsetY:.68,width:.1,tank:{gadgets:[],layers:[],barrels:[{type:0,rot:0,offset:-.5,width:.4,length:1,distance:0},{type:0,rot:0,offset:.5,width:.4,length:1,distance:0}]},rotationType:1,baseRot:180,sides:0,outerSides:0,outerSize:0,anchored:0,team:3},{type:3,offsetX:-.48,offsetY:.48,width:.1,tank:{gadgets:[],layers:[],barrels:[{type:0,rot:0,offset:-.5,width:.4,length:1,distance:0},{type:0,rot:0,offset:.5,width:.4,length:1,distance:0}]},rotationType:1,baseRot:225,sides:0,outerSides:0,outerSize:0,anchored:0,team:3},{type:3,offsetX:.48,offsetY:.48,width:.1,tank:{gadgets:[],layers:[],barrels:[{type:0,rot:0,offset:-.5,width:.4,length:1,distance:0},{type:0,rot:0,offset:.5,width:.4,length:1,distance:0}]},rotationType:1,baseRot:135,sides:0,outerSides:0,outerSize:0,anchored:0,team:3},{type:3,offsetX:.48,offsetY:-.48,width:.1,tank:{gadgets:[],layers:[],barrels:[{type:0,rot:0,offset:-.5,width:.4,length:1,distance:0},{type:0,rot:0,offset:.5,width:.4,length:1,distance:0}]},rotationType:1,baseRot:45,sides:0,outerSides:0,outerSize:0,anchored:0,team:3},{type:3,offsetX:-.48,offsetY:-.48,width:.1,tank:{gadgets:[],layers:[],barrels:[{type:0,rot:0,offset:-.5,width:.4,length:1,distance:0},{type:0,rot:0,offset:.5,width:.4,length:1,distance:0}]},rotationType:1,baseRot:315,sides:0,outerSides:0,outerSize:0,anchored:0,team:3},{type:3,offsetX:-.68,offsetY:0,width:.1,tank:{gadgets:[],layers:[],barrels:[{type:0,rot:0,offset:-.5,width:.4,length:1,distance:0},{type:0,rot:0,offset:.5,width:.4,length:1,distance:0}]},rotationType:1,baseRot:270,sides:0,outerSides:0,outerSize:0,anchored:0,team:3},{type:3,offsetX:.68,offsetY:0,width:.1,tank:{gadgets:[],layers:[],barrels:[{type:0,rot:0,offset:-.5,width:.4,length:1,distance:0},{type:0,rot:0,offset:.5,width:.4,length:1,distance:0}]},rotationType:1,baseRot:90,sides:0,outerSides:0,outerSize:0,anchored:0,team:3},{type:3,offsetX:0,offsetY:0,width:.255,tank:{barrels:[{type:0,rot:0,offset:0,width:.65,length:1.5,distance:0}],gadgets:[],layers:[]},rotationType:1,baseRot:0,sides:0,outerSides:0,outerSize:0,anchored:0,team:3},{type:2,offsetX:0,offsetY:0,width:.2,rot:0,sides:8,backSides:0,subtype:2,radius:0,alpha:.3,rotationType:0,showParticles:0}]},hyperion:{sides:3,outerSides:0,outerSize:0,layers:[{offsetX:0,offsetY:0,rot:0,size:.65,sides:3,outerSides:0,outerSize:0}],gadgets:[{type:1,offsetX:8572527594031472e-32,offsetY:-.7,width:.1,rot:0,size:1},{type:1,offsetX:-.606217782649107,offsetY:.35000000000000003,width:.1,rot:60,size:1},{type:1,offsetX:.606217782649107,offsetY:.35000000000000003,width:.1,rot:-60,size:1},{type:3,offsetX:0,offsetY:0,width:.35,size:1,tank:{barrels:[{type:1,rot:-1.0472,offset:0,width:.8571428571428572,length:.75,distance:0},{type:1,rot:3.14159,offset:0,width:.8571428571428572,length:.75,distance:0},{type:1,rot:1.0472,offset:0,width:.8571428571428572,length:.75,distance:0}],gadgets:[],layers:[]},rotationType:1,baseRot:0,sides:0,outerSides:0,outerSize:0,anchored:1,team:3}]},riotautocannon:{sides:0,outerSides:0,outerSize:0,layers:[],gadgets:[{type:3,offsetX:0,offsetY:0,width:.65,tank:{gadgets:[],layers:[],barrels:[{type:2,rot:0,offset:0,width:.65,length:1,distance:.5},{type:2,rot:0,offset:0,width:.65,length:1,distance:0},{type:2,rot:0,offset:0,width:.65,length:1,distance:-.5}]},rotationType:1,baseRot:0,sides:0,outerSides:0,outerSize:0,idleBehavior:0,anchored:0,team:3}]},octoautocannon:{sides:0,outerSides:0,outerSize:0,layers:[],gadgets:[{type:0,offsetX:0,offsetY:0,length:.5,width:.25,baseRot:0},{type:0,offsetX:0,offsetY:0,length:.5,width:.25,baseRot:0},{type:0,offsetX:0,offsetY:0,length:.5,width:.25,baseRot:0},{type:0,offsetX:0,offsetY:0,length:.5,width:.25,baseRot:0},{type:0,offsetX:0,offsetY:0,length:.5,width:.25,baseRot:0},{type:0,offsetX:0,offsetY:0,length:.5,width:.25,baseRot:0},{type:0,offsetX:0,offsetY:0,length:.5,width:.25,baseRot:0},{type:0,offsetX:0,offsetY:0,length:.5,width:.25,baseRot:0}]},hexagonboss:{sides:6,outerSides:6,outerSize:.1,layers:[{size:.5,sides:6,outerSides:6,outerSize:.1,rot:0,offsetX:0,offsetY:0}],gadgets:[]},base:{sides:0,outerSides:0,outerSize:0,layers:[],gadgets:[]},wall:{sides:6,outerSides:0,outerSize:0,layers:[],gadgets:[]},thorn:{sides:0,outerSides:5,outerSize:.65,layers:[],gadgets:[]},spike:{sides:0,outerSides:4,outerSize:.6,layers:[],gadgets:[]},smasher:{sides:0,outerSides:6,outerSize:.3,layers:[],gadgets:[]},bastion:{sides:8,outerSides:5,outerSize:.55,layers:[{size:.8,sides:6,outerSides:0,outerSize:0,rot:0,offsetX:0,offsetY:0}],gadgets:[{type:0,offsetX:0,offsetY:0,length:.7,width:.4,speed:1.3,baseRot:0,size:1}]},saw:{sides:0,outerSides:4,outerSize:.85,layers:[],gadgets:[]},battleship:{sides:0,outerSides:0,outerSize:0,layers:[],gadgets:[{type:1,rot:180,offsetX:9797174393178826e-32,offsetY:.8,width:.5,size:1},{type:1,rot:60,offsetX:.6928203230275509,offsetY:-.40000000000000013,width:.5,size:1},{type:1,rot:-60,offsetX:-.6928203230275509,offsetY:-.40000000000000013,width:.5,size:1}]},artillery:{sides:0,outerSides:0,outerSize:0,layers:[],gadgets:[{type:0,offsetX:0,offsetY:0,length:.75,width:.4,speed:1.3,baseRot:0,size:1}]},heliosphere:{sides:3,outerSides:0,outerSize:0,layers:[{size:.6,sides:3,outerSides:0,outerSize:0,rot:0,offsetX:0,offsetY:0}],gadgets:[{type:2,sides:0,subtype:0,offsetX:0,offsetY:-.7,radius:1.75,width:.15,alpha:.2,rotationType:1,backSides:0,rot:0},{type:2,sides:0,subtype:0,offsetX:.6062177826491071,offsetY:.3499999999999998,radius:1.75,width:.15,alpha:.2,rotationType:1,backSides:0,rot:0},{type:2,sides:0,subtype:0,offsetX:-.6062177826491071,offsetY:.3499999999999998,radius:1.75,width:.15,alpha:.2,rotationType:1,backSides:0,rot:0},{type:2,sides:0,subtype:0,offsetX:0,offsetY:0,radius:2,width:.1,alpha:.2,rotationType:1,backSides:0,rot:0},{type:2,sides:0,subtype:0,offsetX:0,offsetY:0,radius:4,width:.3,rotationType:1,alpha:.3,backSides:0,rot:0}]},galaxy:{sides:3,outerSides:0,outerSize:0,layers:[{size:.6,sides:3,outerSides:0,outerSize:0,rot:0,offsetX:0,offsetY:0}],gadgets:[{type:0,offsetX:0,offsetY:-.7,length:.15,width:.075,baseRot:0,idleBehavior:1,speed:1,size:1},{type:0,offsetX:.6062177826491071,offsetY:.3499999999999998,length:.15,width:.075,baseRot:120,idleBehavior:1,speed:1,size:1},{type:0,offsetX:-.6062177826491071,offsetY:.3499999999999998,length:.15,width:.075,baseRot:-120,idleBehavior:1,speed:1,size:1},{type:0,offsetX:.3031088913245535,offsetY:-.17500000000000002,length:.15,width:.075,baseRot:60,idleBehavior:1,speed:1,size:1},{type:0,offsetX:-.3031088913245535,offsetY:-.17500000000000002,length:.15,width:.075,baseRot:-60,idleBehavior:1,speed:1,size:1},{type:0,offsetX:4286263797015736e-32,offsetY:.35,length:.15,width:.075,baseRot:180,idleBehavior:1,speed:1,size:1},{type:0,offsetX:0,offsetY:0,length:.35,width:.2,speed:1.25,baseRot:0,size:1}]},cygnus:{sides:3,outerSides:0,outerSize:0,layers:[{size:.6,sides:3,outerSides:0,outerSize:0,rot:0,offsetX:0,offsetY:0}],gadgets:[{type:2,sides:8,subtype:1,offsetX:0,offsetY:0,radius:6.5,width:.5,rotationType:1,alpha:.3,backSides:0,rot:0}]},comet:{sides:3,outerSides:3,outerSize:.2,layers:[{size:.35,sides:3,outerSides:-3,outerSize:.5,rot:0,offsetX:0,offsetY:0}],gadgets:[]},ziggurat:{sides:8,outerSides:0,outerSize:0,layers:[{size:.7,sides:6,outerSides:0,outerSize:0,rot:0,offsetX:0,offsetY:0},{size:.4,sides:4,outerSides:0,outerSize:0,rot:0,offsetX:0,offsetY:0}],gadgets:[]},chasm:{sides:3,outerSides:3,outerSize:.3,layers:[{size:.8,sides:3,outerSides:0,outerSize:0,rot:0,offsetX:0,offsetY:0},{size:.4,sides:3,outerSides:0,outerSize:0,rot:0,offsetX:0,offsetY:0}],gadgets:[]},andromeda:{sides:3,outerSides:3,outerSize:.15,layers:[{size:.7,sides:3,outerSides:3,outerSize:.15,rot:0,offsetX:0,offsetY:0},{size:.3,sides:3,outerSides:3,outerSize:.15,rot:0,offsetX:0,offsetY:0}],gadgets:[{type:2,sides:3,backSides:3,subtype:2,offsetX:0,offsetY:0,radius:3,width:.3,rotationType:0,alpha:.3,rot:0}]},void:{sides:3,outerSides:3,outerSize:.5,layers:[{size:.8,sides:3,outerSides:0,outerSize:0,rot:0,offsetX:0,offsetY:0},{size:.4,sides:3,outerSides:0,outerSize:0,rot:0,offsetX:0,offsetY:0}],gadgets:[]},mothership:{sides:0,outerSides:0,outerSize:0,layers:[],gadgets:[{type:1,rot:45,offsetX:.565685424949238,offsetY:-.5656854249492381,width:.5,speed:1,size:1},{type:1,rot:-45,offsetX:-.565685424949238,offsetY:-.5656854249492381,width:.5,speed:1,size:1},{type:1,rot:135,offsetX:.5656854249492381,offsetY:.565685424949238,width:.5,speed:1,size:1},{type:1,rot:-135,offsetX:-.5656854249492381,offsetY:.565685424949238,width:.5,speed:1,size:1}]},flare:{sides:0,outerSides:0,outerSize:0,layers:[],gadgets:[{type:2,sides:0,subtype:0,offsetX:0,offsetY:0,radius:7,width:.8,rotationType:1,alpha:.3,backSides:0,rot:0,showParticles:0}]},bombard:{sides:0,outerSides:0,outerSize:0,layers:[],gadgets:[{type:0,offsetX:0,offsetY:0,length:1,width:.5,speed:1.3,baseRot:0,size:1}]},fabricator:{sides:0,outerSides:0,outerSize:0,layers:[],gadgets:[{type:2,sides:8,subtype:1,offsetX:0,offsetY:0,radius:8,width:.9,rotationType:1,alpha:.3,backSides:0,rot:0,showParticles:0}]},pollux:{sides:3,outerSides:0,outerSize:0,layers:[{offsetX:0,offsetY:0,rot:0,size:.75,sides:3,outerSides:0,outerSize:0}],gadgets:[{type:0,offsetX:0,offsetY:0,length:.4,width:.25,speed:1.3,size:1,baseRot:0}]},castle:{sides:8,outerSides:8,outerSize:.3,layers:[{size:.7,sides:8,outerSides:0,outerSize:0,rot:0,offsetX:0,offsetY:0}],gadgets:[{type:0,offsetX:0,offsetY:0,length:.6,width:.35,speed:1,baseRot:0,size:1}]},inferno:{sides:0,outerSides:0,outerSize:0,layers:[],gadgets:[{type:2,sides:0,subtype:0,offsetX:0,offsetY:0,radius:8,width:.9,rotationType:1,alpha:.3,backSides:0,rot:0,showParticles:0}]},quadruplet:{sides:0,outerSides:0,outerSize:0,layers:[],gadgets:[{type:3,offsetX:0,offsetY:0,width:.65,tank:{gadgets:[],layers:[],barrels:[{type:0,rot:0,offset:.65,width:.3,length:1,distance:0},{type:0,rot:0,offset:-.65,width:.3,length:1,distance:0},{type:0,rot:0,offset:-.3,width:.3,length:.8,distance:0},{type:0,rot:0,offset:.3,width:.3,length:.8,distance:0}]},rotationType:1,baseRot:0,sides:0,outerSides:0,outerSize:0,idleBehavior:0,anchored:0,team:3}]},triplet:{sides:0,outerSides:0,outerSize:0,layers:[],gadgets:[{type:3,offsetX:0,offsetY:0,width:.6,tank:{gadgets:[],layers:[],barrels:[{type:0,rot:0,offset:-.5,width:.4,length:.8,distance:0},{type:0,rot:0,offset:.5,width:.4,length:.8,distance:0},{type:0,rot:0,offset:0,width:.4,length:1,distance:0}]},rotationType:1,baseRot:0,sides:0,outerSides:0,outerSize:0,idleBehavior:0,anchored:0,team:3}]},turret:{sides:0,outerSides:0,outerSize:0,layers:[],gadgets:[{type:3,offsetX:0,offsetY:0,width:.5,tank:{gadgets:[],layers:[],barrels:[{type:0,rot:0,offset:-.5,width:.4,length:1,distance:0},{type:0,rot:0,offset:.5,width:.4,length:1,distance:0}]},rotationType:1,baseRot:0,sides:0,outerSides:0,outerSize:0,idleBehavior:0,anchored:0,team:3}]},sentry:{sides:0,outerSides:0,outerSize:0,layers:[],gadgets:[{type:0,offsetX:0,offsetY:0,length:.5,width:.25,baseRot:0}]},fortress:{sides:6,outerSides:6,outerSize:.3,layers:[],gadgets:[]}},hl=360*Math.random(),ml={default:{tanks:[{x:0,y:0,size:40,d:135,color:Be.teamColors[0],weapon:"split",body:"wall"},{x:400,y:100,size:30,d:-68,color:Be.teamColors[1],weapon:"mono",body:"base"},{x:-700,y:-100,size:60,d:74,color:Be.teamColors[2],weapon:"annihilator",body:"ziggurat"},{x:400,y:-500,size:60,d:28,color:Be.teamColors[3],weapon:"octo",body:"bastion",autoCannonRot:[-45]},{x:-200,y:600,size:50,d:10,color:"#c0c0c0",weapon:"spread",body:"artillery",autoCannonRot:[170]},{x:-900,y:-800,size:60,d:69,color:Be.teamColors[1],weapon:"marksman",body:"saw"},{x:900,y:200,size:100,d:69,color:"#f177dd",weapon:"debris",body:"chasm"},{x:-1100,y:1e3,size:120,d:69,color:"#f177dd",weapon:"satellite",body:"heliosphere"}],polygons:[{x:200,y:-300,level:4,d:32},{x:500,y:750,level:4,d:89},{x:-150,y:-250,level:3,d:57},{x:-170,y:800,level:3,d:-57},{x:-750,y:-600,level:3,d:-98},{x:-690,y:100,level:2,d:-23},{x:-600,y:180,level:2,d:85},{x:420,y:520,level:2,d:85},{x:700,y:700,level:2,d:-74},{x:650,y:-700,level:2,d:40},{x:770,y:-90,level:2,d:40},{x:-630,y:670,level:1,d:40},{x:-680,y:600,level:1,d:74},{x:-250,y:1580,level:1,d:-6},{x:-200,y:1500,level:1,d:-49},{x:910,y:40,level:1,d:-49},{x:-910,y:310,level:1,d:32},{x:-160,y:400,level:1,d:74},{x:-100,y:50,level:0,d:32},{x:500,y:-870,level:0,d:79},{x:-300,y:-800,level:0,d:-82},{x:-500,y:800,level:0,d:4},{x:800,y:850,level:0,d:2},{x:-200,y:200,level:0,d:-32},{x:-500,y:300,level:0,d:-32},{x:500,y:280,level:0,d:-84},{x:-650,y:-280,level:0,d:-84},{x:-600,y:-270,level:0,d:-24},{x:580,y:-320,level:0,d:-24}],dimension:{visual:{gridSize:30,backgroundColor:"#CDCDCD",gridColor:"#C8C8C8",particles:[{spawnrate:0,speed:{min:0,max:0},d:{min:0,max:360},size:{min:6,max:6},lifetime:{min:30,max:60},sides:{min:0,max:0},transparency:{min:1,max:1},color:{min:"#CDCDCD",max:"#C8C8C8"}}]},bases:[],walls:[],gates:[],mapSize:1500,trueMapSize:1}},10:{polygons:[{x:-680,y:-220,d:23,level:2},{x:680,y:520,d:98,level:2},{x:-820,y:500,d:5,level:0},{x:-880,y:-420,d:156,level:0},{x:-680,y:1020,d:23,level:0},{x:-780,y:1090,d:89,level:0},{x:-780,y:890,d:156,level:1},{x:880,y:-620,d:98,level:7},{x:180,y:-920,d:8,level:6},{x:1280,y:-120,d:49,level:5},{x:900,y:230,d:156,level:4},{x:-200,y:-220,d:8,level:3},{x:200,y:-520,d:98,level:3},{x:600,y:-1020,d:32,level:3},{x:-200,y:-720,d:156,level:2}],tanks:[{x:100,y:-50,size:36,d:-76,color:Be.teamColors[0],weapon:"split",body:"wall"}],dimension:{visual:{gridSize:30,backgroundColor:"#CDCDCD",gridColor:"#C8C8C8",particles:[{spawnrate:0,speed:{min:0,max:0},d:{min:0,max:360},size:{min:6,max:6},lifetime:{min:30,max:60},sides:{min:0,max:0},transparency:{min:1,max:1},color:{min:"#CDCDCD",max:"#C8C8C8"}}]},bases:[{width:.4,height:.4,x:.2,y:.2,team:24}],walls:[],gates:[],mapSize:9e3,trueMapSize:1}},3:{tanks:[{x:-800,y:-300,size:36,d:59,color:Be.teamColors[0],weapon:"split",body:"wall"},{x:-350,y:20,size:34,d:97,color:Be.teamColors[0],weapon:"duo",body:"turret",autoCannonRot:[95]},{x:-630,y:-450,size:46,d:52,color:Be.teamColors[0],weapon:"horizon",body:"fabricator"},{x:-1030,y:1050,size:45,d:128,color:Be.teamColors[0],weapon:"engineer",body:"castle",autoCannonRot:[-153]},{x:-150,y:-20,size:53,d:84,color:Be.teamColors[0],weapon:"streamliner",body:"saw"},{x:-200,y:180,size:48,d:96,color:Be.teamColors[0],weapon:"quadro",body:"ziggurat"},{x:-190,y:-200,size:51,d:79,color:Be.teamColors[0],weapon:"annihilator",body:"bastion",autoCannonRot:[86]},{x:-400,y:-500,size:45,d:79,color:Be.teamColors[0],weapon:"emperor",body:"mothership"},{x:-300,y:260,size:45,d:67,color:Be.teamColors[0],weapon:"manager",body:"castle",autoCannonRot:[108]},{x:-300,y:400,size:42,d:114,color:Be.teamColors[0],weapon:"wake",body:"thorn"},{x:-600,y:500,size:53,d:114,color:Be.teamColors[0],weapon:"executive",body:"ziggurat"},{x:-1e3,y:400,size:48,d:112,color:Be.teamColors[0],weapon:"marksman",body:"saw"},{x:-1100,y:-200,size:48,d:85,color:Be.teamColors[0],weapon:"assassin",body:"thorn"},{x:-300,y:-400,size:42,d:114,color:Be.teamColors[0],weapon:"gunner",body:"artillery",autoCannonRot:[68]},{x:-390,y:-150,size:42,d:78,color:Be.teamColors[0],weapon:"beta",body:"thorn"},{x:-590,y:20,size:46,d:99,color:Be.teamColors[0],weapon:"octo",body:"quadruplet",autoCannonRot:[-153,-77,-9,-2]},{x:1200,y:-50,size:60,d:-96,color:Be.teamColors[1],weapon:"riot",body:"inferno"},{x:150,y:20,size:53,d:-96,color:Be.teamColors[1],weapon:"alpha",body:"saw"},{x:150,y:-180,size:53,d:-79,color:Be.teamColors[1],weapon:"minigun",body:"ziggurat"},{x:190,y:180,size:53,d:-98,color:Be.teamColors[1],weapon:"amalgam",body:"bastion"},{x:500,y:100,size:49,d:-153,color:Be.teamColors[1],weapon:"palisade",body:"bombard",autoCannonRot:[-102]},{x:500,y:-200,size:39,d:-93,color:Be.teamColors[1],weapon:"trio",body:"triplet",autoCannonRot:[167]},{x:600,y:230,size:42,d:-68,color:Be.teamColors[1],weapon:"stockade",body:"artillery",autoCannonRot:[-116]},{x:300,y:400,size:48,d:79,color:Be.teamColors[1],weapon:"penta",body:"saw"},{x:300,y:-400,size:42,d:-63,color:Be.teamColors[1],weapon:"arc",body:"artillery",autoCannonRot:[-98]},{x:150,y:-600,size:52,d:-29,color:Be.teamColors[1],weapon:"marksman",body:"bombard",autoCannonRot:[-73]},{x:1e3,y:600,size:50,d:-101,color:Be.teamColors[1],weapon:"marksman",body:"saw"},{x:150,y:600,size:40,d:-136,color:Be.teamColors[1],weapon:"assassin",body:"artillery",autoCannonRot:[-119]}],polygons:[{x:-680,y:-220,d:98,level:2},{x:-950,y:-520,d:98,level:1},{x:-1020,y:-560,d:42,level:1},{x:-1e3,y:-460,d:42,level:0},{x:-950,y:100,d:-101,level:5},{x:-600,y:250,d:77,level:4},{x:-400,y:1e3,d:77,level:7},{x:1e3,y:2e3,d:77,level:10},{x:650,y:-600,d:-80,level:6},{x:580,y:650,d:-80,level:4},{x:-1050,y:720,d:98,level:1},{x:-1080,y:820,d:161,level:1},{x:-1120,y:760,d:42,level:0},{x:-1100,y:660,d:42,level:0},{x:-800,y:-1500,d:77,level:9},{x:800,y:-1500,d:149,level:8}],dimension:{visual:{gridSize:30,backgroundColor:"#CDCDCD",gridColor:"#C8C8C8",particles:[{spawnrate:0,speed:{min:0,max:0},d:{min:0,max:360},size:{min:6,max:6},lifetime:{min:30,max:60},sides:{min:0,max:0},transparency:{min:1,max:1},color:{min:"#CDCDCD",max:"#C8C8C8"}}]},bases:[],walls:[],gates:[],mapSize:1500,trueMapSize:1}},2:{polygons:[{x:-680,y:-220,d:23,level:2},{x:680,y:520,d:98,level:2},{x:-820,y:500,d:5,level:0},{x:-880,y:-420,d:156,level:0},{x:-680,y:1020,d:23,level:0},{x:-780,y:1090,d:89,level:0},{x:-780,y:890,d:156,level:1},{x:880,y:-620,d:98,level:7},{x:180,y:-920,d:8,level:6},{x:1280,y:-120,d:49,level:5},{x:900,y:230,d:156,level:4},{x:-200,y:-220,d:8,level:3},{x:200,y:-520,d:98,level:3},{x:600,y:-1020,d:32,level:3},{x:-200,y:-720,d:156,level:2}],tanks:[{x:-1100,y:-500,size:36,d:-76,color:Be.teamColors[0],weapon:"split",body:"wall"},{x:1e3,y:-100,size:45,d:81,color:"#c0c0c0",weapon:"hex",body:"base"},{x:-200,y:-1150,size:45,d:52,color:"#c0c0c0",weapon:"sprayer",body:"base"},{x:900,y:650,size:30,d:95,color:Be.teamColors[0],weapon:"factory",body:"base"},{x:450,y:-400,size:52,d:104,color:Be.teamColors[0],weapon:"riot",body:"riotautocannon",autoCannonRot:[-107]},{x:0,y:-0,size:30,d:-25,color:Be.teamColors[0],weapon:"octo",body:"octoautocannon",autoCannonRot:[75,165,255,345,210,120,300,30]},{x:-1500,y:1500,size:46,d:129,color:Be.teamColors[0],weapon:"brokenpenta",body:"base"},{x:1100,y:-1150,size:132,d:-50,color:Be.polygonColors[3],weapon:"hexagonboss",body:"hexagonboss"}],dimension:{visual:{gridSize:30,backgroundColor:"#CDCDCD",gridColor:"#C8C8C8",particles:[{spawnrate:0,speed:{min:0,max:0},d:{min:0,max:360},size:{min:6,max:6},lifetime:{min:30,max:60},sides:{min:0,max:0},transparency:{min:1,max:1},color:{min:"#CDCDCD",max:"#C8C8C8"}}]},bases:[{width:.5,height:.5,x:.2,y:.2,team:10}],walls:[],gates:[],mapSize:9e3,trueMapSize:1}},1:{tanks:[{x:400,y:-300,size:51,d:-57,color:Be.teamColors[0],weapon:"arsenal",body:"ziggurat"},{x:300,y:-330,size:42,d:-44,color:Be.teamColors[0],weapon:"spread",body:"triplet",autoCannonRot:[-44]},{x:700,y:-200,size:51,d:-83,color:Be.teamColors[0],weapon:"manufacturer",body:"saw"},{x:600,y:-500,size:36,d:-156,color:Be.teamColors[0],weapon:"split",body:"wall"},{x:600,y:-500,size:36,d:-156,color:Be.teamColors[0],weapon:"split",body:"wall"},{x:1200,y:-700,size:55,d:-69,color:Be.teamColors[0],weapon:"marksman",body:"saw"},{x:-350,y:-280,size:51,d:94,color:Be.teamColors[1],weapon:"palisade",body:"bombard",autoCannonRot:[53]},{x:-750,y:-480,size:54,d:-53,color:Be.teamColors[1],weapon:"penta",body:"saw",autoCannonRot:[53]},{x:-50,y:-580,size:42,d:8,color:Be.teamColors[1],weapon:"assassin",body:"artillery",autoCannonRot:[53]},{x:-150,y:-400,size:42,d:21,color:Be.teamColors[1],weapon:"trio",body:"castle",autoCannonRot:[53]},{x:-1100,y:-500,size:56,d:-111,color:Be.teamColors[1],weapon:"disperse",body:"bombard",autoCannonRot:[-121]},{x:380,y:370,size:51,d:128,color:Be.teamColors[2],weapon:"shrapnel",body:"inferno",autoCannonRot:[53]},{x:230,y:470,size:42,d:179,color:Be.teamColors[2],weapon:"overlord",body:"battleship",autoCannonRot:[53]},{x:530,y:770,size:53,d:-103,color:Be.teamColors[2],weapon:"wave",body:"saw",autoCannonRot:[53]},{x:430,y:220,size:41,d:-103,color:Be.teamColors[2],weapon:"gunner",body:"artillery",autoCannonRot:[143]},{x:380,y:120,size:30,d:-103,color:Be.teamColors[2],weapon:"trapper",body:"smasher",autoCannonRot:[143]},{x:1100,y:780,size:60,d:-23,color:Be.teamColors[2],weapon:"annihilator",body:"saw"},{x:-420,y:340,size:51,d:128,color:Be.teamColors[3],weapon:"riot",body:"saw",autoCannonRot:[53]},{x:-470,y:180,size:46,d:100,color:Be.teamColors[3],weapon:"annihilator",body:"bombard",autoCannonRot:[163]},{x:-670,y:780,size:56,d:100,color:Be.teamColors[3],weapon:"marksman",body:"bastion",autoCannonRot:[163]},{x:-220,y:380,size:36,d:124,color:Be.teamColors[3],weapon:"alloy",body:"fortress"},{x:-820,y:120,size:31,d:168,color:Be.teamColors[3],weapon:"mono",body:"sentry",autoCannonRot:[163]},{x:-1080,y:520,size:52,d:-73,color:Be.teamColors[3],weapon:"horizon",body:"ziggurat"},{x:1e3,y:1100,size:122,d:-131,color:"#f177dd",weapon:"synope",body:"void"}],polygons:[{x:0,y:0,d:98,level:7},{x:-800,y:-50,d:98,level:4},{x:480,y:-750,d:130,level:5},{x:250,y:-810,d:130,level:2},{x:20,y:1050,d:72,level:6},{x:-420,y:-920,d:-111,level:6},{x:920,y:650,d:-111,level:3},{x:970,y:520,d:23,level:2},{x:-100,y:-900,d:86,level:3},{x:-300,y:900,d:86,level:2},{x:-340,y:1e3,d:98,level:1},{x:-440,y:950,d:123,level:0},{x:-540,y:1010,d:23,level:0},{x:850,y:20,d:111,level:2}],dimension:{visual:{gridSize:30,backgroundColor:"#CDCDCD",gridColor:"#C8C8C8",particles:[{spawnrate:0,speed:{min:0,max:0},d:{min:0,max:360},size:{min:6,max:6},lifetime:{min:30,max:60},sides:{min:0,max:0},transparency:{min:1,max:1},color:{min:"#CDCDCD",max:"#C8C8C8"}}]},bases:[],walls:[],gates:[],mapSize:1500,trueMapSize:1}},0:{tanks:[{x:-800,y:-500,size:36,d:59,color:Be.teamColors[1],weapon:"split",body:"wall"},{x:-1e3,y:-650,size:42,d:59,color:Be.teamColors[1],weapon:"beta",body:"thorn"},{x:-600,y:150,size:50,d:110,color:Be.teamColors[1],weapon:"alpha",body:"saw"},{x:-150,y:-600,size:50,d:19,color:Be.teamColors[1],weapon:"annihilator",body:"ziggurat"},{x:500,y:300,size:45,d:19,color:Be.teamColors[1],weapon:"emperor",body:"mothership"},{x:850,y:200,size:53,d:-70,color:Be.teamColors[1],weapon:"wave",body:"saw"},{x:50,y:600,size:40,d:171,color:Be.teamColors[1],weapon:"barricade",body:"flare"},{x:450,y:-500,size:53,d:-102,color:Be.teamColors[1],weapon:"disperse",body:"ziggurat"},{x:-900,y:600,size:53,d:118,color:Be.teamColors[1],weapon:"marksman",body:"saw"},{x:1e3,y:500,size:53,d:-108,color:Be.teamColors[1],weapon:"marksman",body:"bastion",autoCannonRot:[-153]},{x:1200,y:-600,size:53,d:-121,color:Be.teamColors[1],weapon:"palisade",body:"bombard",autoCannonRot:[-61]},{x:0,y:0,size:100,d:10,color:"#f177dd",weapon:"pulsar",body:"chasm"},{x:-700,y:-900,size:122,d:10,color:"#f177dd",weapon:"blazar",body:"pollux",autoCannonRot:[58]},{x:-100,y:-1100,size:122,d:47,color:"#f177dd",weapon:"synope",body:"void"},{x:600,y:-950,size:122,d:150,color:"#f177dd",weapon:"charon",body:"comet"},{x:700,y:950,size:122,d:150,color:"#f177dd",weapon:"moon",body:"void"},{x:-300,y:900,size:122,d:-35,color:"#f177dd",weapon:"quasar",body:"galaxy",autoCannonRot:[136,136,136,136,136,136,-21]}],polygons:[{x:-1200,y:100,level:7,d:127},{x:700,y:-200,level:6,d:32},{x:-650,y:-150,level:5,d:172},{x:-250,y:-50,level:1,d:172},{x:-300,y:10,level:0,d:-120},{x:-330,y:-70,level:1,d:114},{x:250,y:-200,level:3,d:18},{x:150,y:800,level:2,d:114},{x:-450,y:-550,level:4,d:-64},{x:-680,y:-420,level:2,d:-64}],dimension:{visual:{gridSize:30,backgroundColor:"#CDCDCD",gridColor:"#C8C8C8",particles:[{spawnrate:0,speed:{min:0,max:0},d:{min:0,max:360},size:{min:6,max:6},lifetime:{min:30,max:60},sides:{min:0,max:0},transparency:{min:1,max:1},color:{min:"#CDCDCD",max:"#C8C8C8"}}]},bases:[],walls:[],gates:[],mapSize:1500,trueMapSize:1}},"-1":{polygons:[],tanks:[{x:0,y:0,size:400,d:135,color:"#f177dd",weapon:"ganymede",body:"andromeda"},{x:900,y:200,size:100,d:69,color:"#f177dd",weapon:"debris",body:"chasm"},{x:-700,y:-600,size:120,d:35,color:"#f177dd",weapon:"satellite",body:"galaxy"},{x:-840,y:400,size:120,d:-72,color:"#f177dd",weapon:"synope",body:"void"}],dimension:{visual:{gridSize:30,backgroundColor:"#595959",gridColor:"#4E4D4D",particles:[{spawnrate:.5/576e4,speed:{min:2,max:5},d:{min:0+hl,max:90+hl},size:{min:4,max:8},lifetime:{min:30,max:60},sides:{min:0,max:0},transparency:{min:1,max:1},color:{min:"#595959",max:"#4E4D4D"}}]},bases:[{width:.5,height:.5,x:0,y:0,team:2}],walls:[],gates:[],mapSize:3e3,trueMapSize:1}},"-2":{tanks:[{x:60,y:-60,size:54,d:135,color:Be.teamColors[0],weapon:"disperse",body:"ziggurat"},{x:-60,y:60,size:54,d:315,color:Be.teamColors[0],weapon:"minigun",body:"quadruplet",autoCannonRot:[87]},{x:400,y:100,size:40,d:-110,color:Be.teamColors[1],weapon:"assassin",body:"artillery",autoCannonRot:[170]},{x:-600,y:-100,size:62,d:74,color:Be.teamColors[2],weapon:"annihilator",body:"ziggurat"},{x:-100,y:-450,size:50,d:10,color:"#c0c0c0",weapon:"spread",body:"artillery",autoCannonRot:[170]},{x:600,y:-600,size:62,d:28,color:Be.teamColors[3],weapon:"octo",body:"bastion",autoCannonRot:[-45]},{x:900,y:-730,size:60,d:-69,color:Be.teamColors[1],weapon:"marksman",body:"saw"},{x:800,y:400,size:150,d:69,color:"#f177dd",weapon:"charon",body:"comet"},{x:-700,y:-600,size:120,d:35,color:"#f177dd",weapon:"satellite",body:"galaxy"},{x:-840,y:400,size:120,d:-72,color:"#f177dd",weapon:"synope",body:"void"}],polygons:[],dimension:{visual:{gridSize:120,showMinimap:!1,backgroundColor:"#303030",gridColor:"#232323",wallColor:"#00000054",particles:[{spawnrate:7.8125e-8,speed:{min:8,max:15},d:{min:0+hl,max:90+hl},size:{min:40,max:150},lifetime:{min:30,max:60},sides:{min:0,max:0},transparency:{min:.5,max:.8},color:{min:"#595959",max:"#4E4D4D"}}],darkness:{intensity:1,alpha:.9,color:"#000000"},lights:[{x:0,y:0,size:300,d:0,sides:0,transparency:1},{x:800,y:-400,size:180,d:0,sides:0,transparency:.5},{x:-700,y:600,size:180,d:0,sides:0,transparency:.5},{x:-840,y:-400,size:225,d:0,sides:0,transparency:.5},{x:600,y:600,size:180,d:0,sides:0,transparency:.5}]},bases:[],walls:[],gates:[],mapSize:3e3,trueMapSize:1}},"-4":{tanks:[{x:-350,y:300,size:54,d:135,color:Be.teamColors[0],weapon:"disperse",body:"ziggurat"},{x:-100,y:500,size:54,d:145,color:Be.teamColors[0],weapon:"minigun",body:"quadruplet",autoCannonRot:[87]},{x:-550,y:50,size:45,d:128,color:Be.teamColors[0],weapon:"engineer",body:"castle",autoCannonRot:[-153]},{x:-1100,y:-50,size:60,d:100,color:Be.teamColors[1],weapon:"riot",body:"saw"},{x:-100,y:1e3,size:150,d:260,color:"#f177dd",weapon:"moon",body:"hyperion",autoCannonRot:[0,0,0,30]},{x:-900,y:900,size:150,d:80,color:"#f177dd",weapon:"quasar",body:"void"},{x:500,y:800,size:57,d:19,color:Be.teamColors[2],weapon:"emperor",body:"mothership"},{x:100,y:-700,size:114,d:-25,radiant:1,color:Be.polygonColors[0],weapon:"abyssling",body:"abyssling",autoCannonRot:[-5]},{x:-1e3,y:-850,size:114,d:-5,radiant:1,color:Be.polygonColors[0],weapon:"abyssling",body:"abyssling",autoCannonRot:[20]},{x:1e3,y:50,size:114,d:-80,radiant:1,color:Be.polygonColors[0],weapon:"abyssling",body:"abyssling",autoCannonRot:[-75]},{x:1100,y:450,size:73,d:-92,radiant:1,color:Be.polygonColors[0],weapon:"peacekeeper1",body:"peacekeeper1",autoCannonRot:[-100]},{x:-400,y:-720,size:73,d:-5,radiant:1,color:Be.polygonColors[0],weapon:"peacekeeper1",body:"peacekeeper1",autoCannonRot:[5]},{x:-550,y:-1200,size:84,d:-10,radiant:1,color:Be.polygonColors[0],weapon:"peacekeeper2",body:"peacekeeper2",autoCannonRot:[-15]},{x:1250,y:1e3,size:84,d:-102,radiant:1,color:Be.polygonColors[0],weapon:"peacekeeper2",body:"peacekeeper2",autoCannonRot:[-93]},{x:1450,y:100,size:98,d:-75,radiant:1,color:Be.polygonColors[0],weapon:"peacekeeper3",body:"peacekeeper3",autoCannonRot:[-345]},{x:200,y:-1350,size:98,d:-15,radiant:1,color:Be.polygonColors[0],weapon:"peacekeeper3",body:"peacekeeper3",autoCannonRot:[-35]},{x:1e3,y:-800,size:436,d:-50,radiant:1,color:Be.polygonColors[0],weapon:"abyssguardian",body:"abyssguardian",autoCannonRot:[null,null,null,null,null,null,null,null,-45]}],polygons:[{x:-850,y:300,d:98,level:3,radiant:1},{x:1100,y:800,d:41,level:5,radiant:2},{x:-1400,y:-450,d:98,level:6,radiant:1},{x:-300,y:700,d:-41,level:4,radiant:1},{x:-1200,y:500,d:-41,level:5,radiant:0},{x:-670,y:-200,d:-23,level:2,radiant:1},{x:370,y:100,d:-23,level:1,radiant:0},{x:450,y:150,d:-41,level:1,radiant:1}],dimension:{visual:{gridSize:160,backgroundColor:"#141414",gridColor:"#212121",wallColor:"#00000098",particles:[{spawnrate:1/576e4,speed:{min:3,max:5},d:{min:175,max:265},size:{min:4,max:8},lifetime:{min:30,max:60},sides:{min:0,max:0},transparency:{min:1,max:1},color:{min:"#ffffff",max:"#0c0c0c"},radiant:!0}],lights:[{x:0,y:0,size:1e3,d:0,sides:0,transparency:1}]},bases:[],walls:[],gates:[],mapSize:3e3,trueMapSize:1}}};window.H7=ml,ml.default=ml[11]=ml[12]=ml[10];for(var pl=0,gl=Object.values(ul);pl<gl.length;pl++){var yl,vl=ll(gl[pl].barrels);try{for(vl.s();!(yl=vl.n()).done;){var bl=yl.value;bl.rot=lr(bl.rot)}}catch(e){vl.e(e)}finally{vl.f()}}for(var wl=0,xl=Object.values(fl);wl<xl.length;wl++){var kl,Sl=ll(xl[wl].gadgets);try{for(Sl.s();!(kl=Sl.n()).done;){var Ml=kl.value;Ml.rot&&=lr(Ml.rot),Ml.baseRot&&=lr(Ml.baseRot)}}catch(e){Sl.e(e)}finally{Sl.f()}}for(var Tl=0,_l=Object.values(ml);Tl<_l.length;Tl++){var zl,Cl,El,Ll=_l[Tl],Il=ll(Ll.tanks);try{for(Il.s();!(zl=Il.n()).done;){var Al=zl.value,Ol=ul[Al.weapon],Bl=fl[Al.body];Al.barrels=sr(Ol.barrels),Al.sides=Bl.sides,Al.outerSides=Bl.outerSides,Al.outerSize=Bl.outerSize,Al.layers=sr(Bl.layers),Al.gadgets=sr(Bl.gadgets),Al.d=lr(Al.d),Al.autoCannonRot||=[];for(var Dl=0;Dl<Al.gadgets.length;Dl++){var Pl=Al.gadgets[Dl];0!=Pl.type&&3!=Pl.type||null!=Al.autoCannonRot[Dl]&&(Pl.rot=lr(Al.autoCannonRot[Dl]))}}}catch(e){Il.e(e)}finally{Il.f()}var Rl=ll(Ll.polygons);try{for(Rl.s();!(Cl=Rl.n()).done;){var Nl=Cl.value;Nl.d=lr(Nl.d)}}catch(e){Rl.e(e)}finally{Rl.f()}Ll.rifts||=[];var jl=ll(Ll.rifts);try{for(jl.s();!(El=jl.n()).done;){var Fl=El.value;Fl.d=lr(Fl.d),Fl.y=-Fl.y}}catch(e){jl.e(e)}finally{jl.f()}}function Ul(e){return(Ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wl(){Wl=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),s=new T(r||[]);return a(i,"_invoke",{value:x(e,n,s)}),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var u={};function f(){}function h(){}function m(){}var p={};l(p,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(_([])));y&&y!==t&&n.call(y,o)&&(p=y);var v=m.prototype=f.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(a,o,i,s){var l=c(e[a],e,o);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==Ul(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){d.value=e,i(d)}),(function(e){return r("throw",e,i,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function x(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return z()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var s=k(i,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=c(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}function k(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var r=c(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function _(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:z}}function z(){return{value:void 0,done:!0}}return h.prototype=m,a(v,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,a,r,o=Promise){var i=new w(d(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),l(v,s,"Generator"),l(v,o,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=_,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;M(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Hl(e,t){var n,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=$l(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0;function s(){}return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw n}}}}function Yl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,i,s=[],l=!0,d=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){d=!0,r=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return s}}(e,t)||$l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $l(e,t){if(e){if("string"==typeof e)return Gl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gl(e,t):void 0}}function Gl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Xl(e,t,n,a,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function ql(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){Xl(o,a,r,i,s,"next",e)}function s(e){Xl(o,a,r,i,s,"throw",e)}i(void 0)}))}}var Zl,Vl,Jl=document.getElementById("achievement-popup"),Kl=document.getElementById("button-achievements"),Ql=document.getElementById("exit-achievements"),ed=document.getElementById("achievements-scroll");Kl.onclick=nd,Ql.onclick=ad,document.fonts.ready.then((function(){od()}));var td=!1;function nd(){Jl.classList.remove("hide"),Yb(!0),ox("achievements"),lx("achievements"),td=!0}function ad(){Jl.classList.add("hide"),Yb(!1),ix(),sx(),td=!1}var rd=!1;function od(){return id.apply(this,arguments)}function id(){return(id=ql(Wl().mark((function e(){var t,n,a,r,o,i,s,l,d,c;return Wl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Math.random()+1,rd=t,n=Object.entries(Be.g).map((function(e){var t=Yl(e,2),n=t[0];return{key:n,value:t[1],data:Vl[n]}})).sort((function(e,t){return e.value.rarity-t.value.rarity||e.value.stars-t.value.stars})),Zl={},Tr(ed),!cu){e.next=39;break}return performance.now(),e.next=9,new Promise((function(e){return setTimeout(e,0)}));case 9:if(t===rd){e.next=11;break}return e.abrupt("return");case 11:a=Hl(n),e.prev=12,a.s();case 14:if((r=a.n()).done){e.next=28;break}return o=r.value,(i=ps(ed,"canvas","achievement")).width=600,i.height=200,s=lg(o.value.name,o.value.description,o.value.rarity,o.value.stars,o.data.completed,o.data.completed?`Completed ${_r(o.data.completionDate)}`:o.value.max?`${o.data.progress}/${o.value.max}`:void 0),sg(i,s,2),Zl[o.key]=i,e.next=24,new Promise((function(e){return setTimeout(e,0)}));case 24:if(t===rd){e.next=26;break}return e.abrupt("return");case 26:e.next=14;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(12),a.e(e.t0);case 33:return e.prev=33,a.f(),e.finish(33);case 36:e.next=50;break;case 39:l=ps(ed,"p"),(d=ps(l,"a")).href="#log-in",d.innerText="Log In",d.onclick=function(){return ad(),ju(),!1},ps(l,"span").innerText=" or ",(c=ps(l,"a")).href="#sign-up",c.innerText="Sign Up",c.onclick=function(){return ad(),Fu(),!1},ps(l,"span").innerText=" to earn achievements";case 50:rd=!1;case 51:case"end":return e.stop()}}),e,null,[[12,30,33,36]])})))).apply(this,arguments)}var sd=!1;function ld(e,t){return dd.apply(this,arguments)}function dd(){return(dd=ql(Wl().mark((function e(t,n){var a,r,o,i,s,l,d,c;return Wl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Math.random()+1,sd=a,r=ud(n),o=Object.entries(Be.g).map((function(e){var t=Yl(e,2),n=t[0];return{key:n,value:t[1],data:r[n]}})).sort((function(e,t){return Number(t.data.completed)-Number(e.data.completed)||(e.data.completed?t.value.rarity-e.value.rarity||t.value.stars-e.value.stars:(t.value.max?t.data.progress/t.value.max:0)-(e.value.max?e.data.progress/e.value.max:0)||e.value.rarity-t.value.rarity||e.value.stars-t.value.stars)})),Tr(t),performance.now(),e.next=8,new Promise((function(e){return setTimeout(e,0)}));case 8:if(a===sd){e.next=10;break}return e.abrupt("return");case 10:i=Hl(o),e.prev=11,i.s();case 13:if((s=i.n()).done){e.next=27;break}return l=s.value,(d=ps(t,"canvas","achievement")).width=600,d.height=200,c=lg(l.value.name,l.value.description,l.value.rarity,l.value.stars,l.data.completed,l.data.completed?`Completed ${_r(l.data.completionDate)}`:l.value.max?`${l.data.progress}/${l.value.max}`:void 0),sg(d,c,2),n[l.key]=d,e.next=23,new Promise((function(e){return setTimeout(e,0)}));case 23:if(a===sd){e.next=25;break}return e.abrupt("return");case 25:e.next=13;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(11),i.e(e.t0);case 32:return e.prev=32,i.f(),e.finish(32);case 35:sd=!1;case 37:case"end":return e.stop()}}),e,null,[[11,29,32,35]])})))).apply(this,arguments)}function cd(e){Vl=ud(e),od()}function ud(e){for(var t={},n=0,a=Object.entries(Be.g);n<a.length;n++){var r=Yl(a[n],2),o=r[0],i=r[1];t[o]={completed:!1},i.max&&(t[o].progress=0),e[o]&&(t[o].completed=e[o].completed,i.max&&(t[o].progress=e[o].progress||0),e[o].completed&&(t[o].completionDate=e[o].completionDate))}return t}function fd(e){Vl[e].completed=!0,Be.g[e].max&&(Vl[e].progress=Be.g[e].max),function(e){sg(Zl[e],lg(Be.g[e].name,Be.g[e].description,Be.g[e].rarity,Be.g[e].stars,Vl[e].completed,Be.g[e].max?`${Vl[e].progress}/${Be.g[e].max}`:void 0),2)}(e)}function hd(){hd=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),s=new T(r||[]);return a(i,"_invoke",{value:x(e,n,s)}),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var u={};function f(){}function h(){}function m(){}var p={};l(p,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(_([])));y&&y!==t&&n.call(y,o)&&(p=y);var v=m.prototype=f.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(a,o,i,s){var l=c(e[a],e,o);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==md(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){d.value=e,i(d)}),(function(e){return r("throw",e,i,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function x(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return z()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var s=k(i,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=c(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}function k(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var r=c(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function _(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:z}}function z(){return{value:void 0,done:!0}}return h.prototype=m,a(v,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,a,r,o=Promise){var i=new w(d(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),l(v,s,"Generator"),l(v,o,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=_,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;M(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function md(e){return(md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pd(e,t){var n,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=yd(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0;function s(){}return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw n}}}}function gd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,i,s=[],l=!0,d=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){d=!0,r=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return s}}(e,t)||yd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yd(e,t){if(e){if("string"==typeof e)return vd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vd(e,t):void 0}}function vd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function bd(e,t,n,a,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function wd(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){bd(o,a,r,i,s,"next",e)}function s(e){bd(o,a,r,i,s,"throw",e)}i(void 0)}))}}var xd=document.getElementById("profile-screen"),kd=document.getElementById("profile-screen-achievements"),Sd=document.getElementById("profile-screen-achievements-collapse"),Md=document.getElementById("profile-screen-profile-name"),Td=document.getElementById("profile-screen-description"),_d=document.getElementById("profile-screen-profile-star-counter").children[1],zd=document.getElementById("profile-screen-profile-icon"),Cd=document.getElementById("stat-joined"),Ed=document.getElementById("stat-last-online"),Ld=document.getElementById("stat-achievements"),Id=document.getElementById("stat-high-score"),Ad=document.getElementById("edit-profile-popup"),Od=document.getElementById("edit-profile-apply-button"),Bd=document.getElementById("edit-profile-cancel-button"),Dd=document.getElementById("edit-profile-loading"),Pd=document.getElementById("edit-profile-description"),Rd=document.getElementById("edit-profile-error"),Nd=document.getElementById("edit-profile-change-username"),jd=document.getElementById("edit-profile-change-password"),Fd=document.getElementById("edit-profile-change-icon"),Ud=document.getElementById("edit-profile-value-popup"),Wd=document.getElementById("edit-profile-value"),Hd=document.getElementById("edit-profile-value-password"),Yd=document.getElementById("edit-profile-value-show-password"),$d=document.getElementById("edit-profile-value-apply-button"),Gd=document.getElementById("edit-profile-value-cancel-button"),Xd=document.getElementById("edit-profile-value-loading"),qd=document.getElementById("edit-profile-value-error"),Zd=document.getElementById("edit-icon-attributes-scroll"),Vd=document.getElementById("edit-icon-preview"),Jd=document.getElementById("edit-icon-popup"),Kd=document.getElementById("edit-icon-apply-button"),Qd=document.getElementById("edit-icon-cancel-button"),ec=document.getElementById("edit-icon-loading"),tc=document.getElementById("edit-icon-error"),nc=document.getElementById("profile-screen-search-input"),ac=document.getElementById("profile-screen-search-button"),rc=document.getElementById("profile-screen-search-content"),oc=!1;Kd.onclick=function(){!function(){Xc.apply(this,arguments)}()},Qd.onclick=function(){oc||$c()},Od.onclick=function(){!function(){wc.apply(this,arguments)}()},Bd.onclick=function(){oc||(bc(),Md.innerHTML=kc(uc),Td.innerHTML=kc(fc))},Nd.onclick=function(){_c(0)},jd.onclick=function(){_c(1)},Fd.onclick=function(){bc(),Gc()},$d.onclick=function(){!function(){Cc.apply(this,arguments)}()},Gd.onclick=function(){Mc||Ec()},Wd.oninput=function(){zc()},Hd.oninput=function(){zc()},Pd.oninput=function(){Td.innerHTML=kc(Pd.value.trim()),xc()},document.getElementById("profile-screen-back-button").onclick=function(){gc()};var ic,sc=document.getElementById("profile-screen-edit-button");sc.onclick=function(){cu&&cu.id==dc&&(Ad.classList.remove("hide"),Pd.value=fc,Pd.classList.remove("error"),Rd.textContent="")};var lc=document.getElementById("profile-screen-logout-button");lc.onclick=function(){cu&&cu.id==dc&&(gc(),$u())},Sd.onclick=function(){vc()};var dc=0,cc=0,uc="",fc="",hc=0;function mc(e){null!=e&&(dc=e),Tw(3),yw.classList.add("hidden"),hw.classList.add("hidden"),zd.classList.remove("clickable"),zd.onclick=function(){},Xm(zd,Zc),nc.value="",nc.blur(),xd.classList.remove("hidden"),sc.classList.add("hidden"),lc.classList.add("hidden"),bc(),Tr(kd),Md.innerText="-",Td.innerText="",_d.innerText="-",Cd.children[1].children[0].innerText="-",Cd.children[0].innerText="-",Ed.children[1].children[0].innerText="-",Ed.children[0].innerText="-",Ld.children[1].children[0].innerText="-",Ld.children[0].innerText="-",Id.children[1].children[0].innerText="-",Id.children[0].innerText="-",vc(!1),function(e){pc.apply(this,arguments)}(dc),ox("profile"),lx("profile/"+dc)}function pc(){return(pc=wd(hd().mark((function e(t){var n;return hd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cc++,n=cc,e.next=4,Ju("/getuser",{id:t},(function(e){n===cc&&(Md.innerText="Invalid User")}),(function(e){if(n===cc)if(e.error)Md.innerText=e.error;else{for(var t=JSON.parse(Mr(e.achievements)),a=0,r=0,o=Object.entries(t);r<o.length;r++){var i=gd(o[r],2);i[0],i[1].completed&&a++}ox(e.username),cu&&cu.id==dc&&(sc.classList.remove("hidden"),lc.classList.remove("hidden"),zd.classList.add("clickable"),zd.onclick=function(){Gc()}),ic=JSON.parse(Mr(e.profilePicture)),Xm(zd,ic),Md.innerHTML=kc(e.username),uc=e.username,Td.innerHTML=kc(e.description),fc=e.description,_d.innerText=kr(e.stars),hc=e.stars,Cd.children[0].innerText=zr(Date.now()-e.joinDate),Cd.children[1].children[0].innerText=_r(e.joinDate,!0),Ed.children[0].innerText=zr(Date.now()-e.lastOnline),Ed.children[1].children[0].innerText=_r(e.lastOnline,!0),Ld.children[0].innerText=a+"/"+Object.keys(Be.g).length,Ld.children[1].children[0].innerText=`${ur(a/Object.keys(Be.g).length*100)}%`,Id.children[0].innerText=gx(e.highScore),Id.children[1].children[0].innerText=kr(ur(e.highScore)),ld(kd,t)}}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gc(){Tw(2),yw.classList.remove("hidden"),hw.classList.remove("hidden"),xd.classList.add("hidden"),bc(),$c(),ix(),sx()}var yc=!1;function vc(e){(yc=null==e?!yc:e)?(kd.classList.add("collapsed"),Sd.children[0].innerText="+"):(kd.classList.remove("collapsed"),Sd.children[0].innerText="-")}function bc(){Ec(),Ad.classList.add("hide"),Dd.classList.add("hide"),oc=!1}function wc(){return(wc=wd(hd().mark((function e(){return hd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!oc&&xc()){e.next=2;break}return e.abrupt("return");case 2:return Rd.textContent="",oc=!0,Dd.classList.remove("hide"),e.next=7,Ju("/editprofile",{sessionID:nf,description:Pd.value.trim()},(function(e){Rd.textContent=e,oc=!1,Dd.classList.add("hide")}),(function(e){oc=!1,Dd.classList.add("hide"),e.error?Rd.textContent=e.error:(fc=Pd.value.trim(),Td.innerHTML=kc(fc),bc())}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xc(){Pd.classList.remove("error"),Rd.textContent="";var e=[];return Pd.value.trim().split(/\r\n|\r|\n/).length>15&&(e.push("Description must not have more than 15 newlines."),Pd.classList.add("error")),Pd.value.length>600&&(e.push("Description must not contain more than 600 characters."),Pd.classList.add("error")),Rd.innerHTML=e.join("<br />"),0==e.length}function kc(e){e=rx(e);var t=Math.random(),n=(e=e.replace(/&amp;(#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})|[0-9]*)\$/g,`${t}$1${t}`)).split(t),a=0;e="";for(var r=0;r<n.length;r++){var o=n[r];if(r%2==0)e+=o;else{for(;a>0;)e+="</span>",a--;if(""==o)continue;e+=`<span style="color: ${isNaN(+o)?o:wm(0,+o)}">`,a++}}for(var i=0;i<a;i++)e+="</span>";return e.replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,'<a target="_blank" href="$1">$1</a>')}var Sc,Mc=!1,Tc=0;function _c(e=0){switch(Ad.classList.add("hide"),Tc=e,Ud.classList.remove("hide"),Wd.value="",Hd.value="",Xd.classList.add("hide"),Mc=!1,Yd.checked=!1,qd.textContent="",Wd.classList.remove("error"),Hd.classList.remove("error"),e){case 0:Ud.children[0].children[0].textContent="Change Username",Wd.previousElementSibling.textContent="New Username",Wd.placeholder="Username",Wd.type="text",Hd.previousElementSibling.textContent="Current Password",Hd.placeholder="Password",Hd.type="password",Yd.onchange=function(){Yd.checked?Hd.type="text":Hd.type="password"};break;case 1:Ud.children[0].children[0].textContent="Change Password",Wd.previousElementSibling.textContent="New Password",Wd.placeholder="Password",Wd.type="password",Hd.previousElementSibling.textContent="Current Password",Hd.placeholder="Password",Hd.type="password",Yd.onchange=function(){Yd.checked?(Wd.type="text",Hd.type="text"):(Wd.type="password",Hd.type="password")}}}function zc(){Wd.classList.remove("error"),Hd.classList.remove("error"),qd.textContent="",Wd.value=Wd.value.trim(),Hd.value=Hd.value.trim();var e=Wd.value,t=Hd.value,n=[];switch(Tc){case 0:e.length<1?(n.push("Provide a username."),Wd.classList.add("error")):e.length<3?(n.push("Username must be at least 3 characters long."),Wd.classList.add("error")):/^[0-9a-zA-Z_-]+$/.test(e)||(n.push("Username must only contain letters, numbers, underscores, and dashes."),Wd.classList.add("error")),e.length>20&&(n.push("Username must not be longer than 20 characters."),Wd.classList.add("error")),uc==e&&(n.push("New username can't be the same as old username."),Wd.classList.add("error")),t.length<1&&(n.push("Incorrect password."),Hd.classList.add("error"));break;case 1:e.length<1?(n.push("Provide a password."),Wd.classList.add("error")):/^[0-9a-zA-Z_\-!@#$%^&*+=?;:\(\)\[\]`]+$/.test(e)||(n.push("Password must only contain letters, numbers, and symbols."),Wd.classList.add("error")),e.length>256&&(n.push("Password must not be longer than 256 characters."),Wd.classList.add("error")),t.length<1&&(n.push("Incorrect password."),Hd.classList.add("error")),e==t&&(n.push("New password can not be the same as current password."),Wd.classList.add("error"))}return qd.innerHTML=n.join("<br />"),0==n.length}function Cc(){return(Cc=wd(hd().mark((function e(){return hd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Mc&&zc()){e.next=2;break}return e.abrupt("return");case 2:return qd.textContent="",Mc=!0,Xd.classList.remove("hide"),e.next=7,Ju({0:"/changeusername",1:"/changepassword"}[Tc],{0:{sessionID:nf,username:Wd.value.trim(),password:Hd.value.trim()},1:{sessionID:nf,newPassword:Wd.value.trim(),password:Hd.value.trim()}}[Tc],(function(e){qd.textContent=e,Mc=!1,Xd.classList.add("hide")}),(function(e){if(Mc=!1,Xd.classList.add("hide"),e.error)qd.textContent=e.error;else{switch(Tc){case 0:uc=Wd.value.trim(),Md.textContent=uc,cu.username=uc;break;case 1:af(e.sessionID)}Ec()}}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ec(){Ad.classList.remove("hide"),Ud.classList.add("hide")}var Lc=[{name:"X Offset",key:"offsetX",min:-2,max:2,multiplier:-1,step:.05,digits:2},{name:"Y Offset",key:"offsetY",min:-2,max:2,multiplier:-1,step:.05,digits:2},{name:"Size",key:"size",min:.25,max:2,multiplier:30,step:.05,digits:2},{name:"Zoom",key:"scale",min:.25,max:2.5,step:.05,digits:2},{name:"Grid Scale",key:"gridScale",min:.5,max:2,step:.1,digits:1,default:1},{name:"Rotation",key:"rot",min:0,max:360,suffix:"",multiplier:Math.PI/180,step:15,digits:0}],Ic={0:{name:"Team Colors",data:[10,11,12,13],stars:0},1:{name:"Special Colors",data:[2,-1,3,7,5,6],stars:200},2:{name:"Polygon Colors",data:[20,21,22,23,24,25,26,27,28,29,30],stars:350}},Ac={0:{name:"Default Background",data:{default:{name:"Default",gridSize:1,backgroundColor:"#CDCDCD",gridColor:"#afafaf",borderColor:"#afafaf"}},stars:0},1:{name:"Dimension Backgrounds",data:{crossroads:{name:"Crossroads",gridSize:1,backgroundColor:"#474747",gridColor:"#292929",borderColor:"#292929"},sanctuary:{name:"Sanctuary",gridSize:1,backgroundColor:"#595959",gridColor:"#3b3b3b",borderColor:"#3b3b3b"},abyss:{name:"Abyss",gridSize:1,backgroundColor:"#141414",gridColor:"#000000",borderColor:"#000000"}},stars:150},2:{name:"Accurate Dimension Backgrounds",data:{accurateDefault:{name:"Default",gridSize:2,backgroundColor:"#CDCDCD",gridColor:"#C8C8C8",borderColor:"#afafaf"},accurateCrossroads:{name:"Crossroads",gridSize:.5,backgroundColor:"#474747",gridColor:"#3D3D3D",borderColor:"#292929"},accurateSanctuary:{name:"Sanctuary",gridSize:2,backgroundColor:"#595959",gridColor:"#4E4D4D",borderColor:"#3b3b3b"},accurateAbyss:{name:"Abyss",gridSize:.5,backgroundColor:"#141414",gridColor:"#212121",borderColor:"#000000"}},stars:150}},Oc=[0,0,0,50,150,400,400,600],Bc=0,Dc=document.getElementById("edit-icon-tabs").children,Pc=document.getElementById("edit-icon-tab-content").children;function Rc(e){Dc[Bc].classList.remove("selected"),Pc[Bc].classList.add("hidden"),Dc[e].classList.add("selected"),Pc[e].classList.remove("hidden"),Bc=e}var Nc=[],jc={},Fc={},Uc={},Wc={},Hc=[];function Yc(){var e;Sc=Vc(Sc.weaponID,Sc.bodyID,Sc.team,Sc.offsetX,Sc.offsetY,Sc.scale,Sc.gridScale,Sc.size,Sc.rot,Sc.tankType,Sc.background,Sc.backgroundColor,Sc.gridColor,Sc.borderColor,Sc.gridSize),Xm(Vd,Sc);var t=pd(Lc);try{for(t.s();!(e=t.n()).done;){var n=e.value,a=n.input;a.value=(null==Sc[n.key]?n.default||1:Sc[n.key])/(n.multiplier||1),a.oninput({target:a,fake:!0})}}catch(e){t.e(e)}finally{t.f()}for(var r=0,o=Object.values(jc);r<o.length;r++)o[r].classList.remove("selected");for(var i=0,s=Object.values(Fc);i<s.length;i++)s[i].classList.remove("selected");for(var l=0,d=Object.values(Uc);l<d.length;l++)d[l].classList.remove("selected");for(var c=0,u=Object.values(Wc);c<u.length;c++)u[c].classList.remove("selected");var f=jc[Sc.weaponID];f&&f.classList.add("selected");var h=Fc[Sc.bodyID];h&&h.classList.add("selected");var m=Uc[Sc.team];m&&m.classList.add("selected");var p=Wc[Sc.background||"default"];p&&p.classList.add("selected")}function $c(){Jd.classList.add("hide"),ec.classList.add("hide"),oc=!1}function Gc(){if(Jd.classList.remove("hide"),tc.textContent="",Sc=ic,Yc(),Nc.length>0){function i(){var t=gd(Nc[e],5),n=t[0],a=t[1],r=t[2],o=t[3],i=t[4];setTimeout((function(){switch(n){case 0:!function(e,t,n,a){var r=Ih,o=.1*e.width,i=o/(0==a?50:100),s=wm(0,0==a?10:2),l=lr(135),d=document.createElement("canvas");d.width=e.width/2,d.height=e.height/2,Ih=d.getContext("2d"),Ym(e.width/2/2,e.height/2/2,o/2,l,s,t,n,i/2,a);var c=Cg(Ih.getImageData(0,0,d.width,d.height)),u=1/Math.max((c.right-c.left)/d.width,(c.bottom-c.top)/d.height)*.9,f=e.width/2-(c.left-(d.width-c.right))*u,h=e.height/2-(c.top-(d.height-c.bottom))*u;(Ih=e.getContext("2d")).clearRect(0,0,e.width,e.height),Ym(f,h,o*u,l,s,t,n,i*u,a),Ih=r}(a,r,o,i);break;case 1:!function(e,t){var n=Ih,a=e.width/2,r=.5/9.8*e.width/2,o=.5/9.8*e.width,i=t.backgroundColor,s=t.gridColor,l=t.borderColor;(Ih=e.getContext("2d")).fillStyle=i,Ih.fillRect(0,0,e.width,e.height),Ih.lineWidth=o,Ih.strokeStyle=s,Ih.beginPath(),Ih.moveTo(a,a+a),Ih.lineTo(a,a-a),Ih.moveTo(a+a,a),Ih.lineTo(a-a,a);for(var d=Math.ceil(t.gridSize-1),c=e.width/t.gridSize/2,u=1;u<d+1;u++)Ih.moveTo(a+c*u,a+a),Ih.lineTo(a+c*u,a-a),Ih.moveTo(a-c*u,a+a),Ih.lineTo(a-c*u,a-a),Ih.moveTo(a+a,a+c*u),Ih.lineTo(a-a,a+c*u),Ih.moveTo(a+a,a-c*u),Ih.lineTo(a-a,a-c*u);Ih.stroke(),Ih.strokeStyle=l,Zg(a,a,e.width-o,e.height-o,r),Ih.stroke(),Ih=n}(a,r)}}),10*e)}for(var e=0;e<Nc.length;e++)i();Nc=[]}var t,n=pd(Hc);try{for(n.s();!(t=n.n()).done;){var a=gd(t.value,2),r=a[0],o=a[1];r.classList.toggle("disabled",hc<o)}}catch(s){n.e(s)}finally{n.f()}}function Xc(){return(Xc=wd(hd().mark((function e(){return hd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!oc){e.next=2;break}return e.abrupt("return");case 2:return tc.textContent="",oc=!0,ec.classList.remove("hide"),e.next=7,Ju("/editicon",{sessionID:nf,icon:Sr(JSON.stringify({weaponID:Sc.weaponID,bodyID:Sc.bodyID,offsetX:Sc.offsetX,offsetY:Sc.offsetY,size:Sc.size,scale:Sc.scale,gridScale:Sc.gridScale,background:Sc.background,team:Sc.team,rot:Sc.rot}))},(function(e){tc.textContent=e,oc=!1,ec.classList.add("hide")}),(function(e){oc=!1,ec.classList.add("hide"),e.error?tc.textContent=e.error:(ic=JSON.parse(Mr(e.icon)),Xm(zd,ic),$c())}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qc={},Zc={};function Vc(e,t,n,a,r,o,i=1,s=void 0,l=void 0,d=0,c=void 0,u=void 0,f=void 0,h=void 0,m=1){var p,g,y={barrels:[],gadgets:[],layers:[],sides:0,outerSides:0,outerSize:0,background:c,backgroundColor:u||"#CDCDCD",gridColor:f||"#afafaf",borderColor:h||"#afafaf",offsetX:a,offsetY:r,scale:o,gridScale:i,gridSize:m,rot:l,size:s,team:n,weaponID:e,bodyID:t,tankType:d};return Object.values(qc).find((function(t){return Object.values(t.weapon).find((function(t){return t.find((function(t){return t.id==e&&(p=t),t.id==e}))}))})),Object.values(qc).find((function(e){return Object.values(e.body).find((function(e){return e.find((function(e){return e.id==t&&(g=e),e.id==t}))}))})),p&&(y.barrels=p.barrels),g&&(y.gadgets=g.gadgets,y.layers=g.layers,y.sides=g.sides,y.outerSides=g.outerSides,y.outerSize=g.outerSize),y}qc=JSON.parse(Mr("eJztXVl327YS/i96lnTEnepbnDRJH5zmxj437b3HD5AESzyhSIWLE8fH/70kJWxcQICAbCZ1HloOqw4G4CwfZgbIw2Qx+e1h8g2CQxyVTwX5/4dJBPZw8tvkQ7yBk+kk2BTP0fF5BZIEhmnxq5vHm+nEoH9+GUcx+vn++Ex+/jDJ7g/FrxbTSRJn1b/j29sUHh+/BZtsVzzNnekkhNG2JIzpZBOkGYjW5f/2ePM4xSO9jvd7EG1ggoZbUy+aYxrCYy7mfveo1wk4HMiYGSabI5r8EV3eNItlNellfZPjVd3kwos6q+aFR7Q7B5zyvowgD3qV3oYg+oIEvj0RGvWgIa81N2zDWap926tDGGRI6vREcKSeu8bC99rHNJlBPadH/plOZkpmdRVE2xBbfIoo6Y/nUaPNOeO9CsP4Hg0HTsQ5VMXQqSrvcpBskNTbE9HtArhjchyB5k8bBZTrShGltNi8T/vnHUxSSEaMCa3VP5/nE78JErjOYiz9htDS0vtiXjNPgyICI7eJqO7RBs9zqiNGUdYAisiLreFESAdEX2ywizBefwEElKwIrTMGN5ZoqA3Tsn/KVyviXBNEScttiwUEIdEleRlzx1v4WljNhvOqEJJFI6TrJIgJKgs0YKRuq5FBSXJcpJHWf3KA49DX4/MYcFYfH96Xl2DD1SAxk3yVrDH6qB55gM/zHVtdaE18nncN9UKTd3kUEaCwRZSoBVs0WB5swTq4zKpft7NxZYQR5VIHXGFMgGlM6PMCLnO+WNr9Gt3PaDaUE5sZKDYt8R4mIMOxds2+O4eP1Ab2x7mqn8EXvJrfjs/Pt+FhAuyyz8OZc9u2bFdhJRf4kwzkxOYZEkiidoqobp0sXPTC9kyh5EBv0NDFqUxZLH3DEuHV60B1srLs5UIokdKrNxp5KUXHNzDNkvieBMgN9ULaldGbUW5mJk1BmgZ4QwoIrZYyMBtgnsnqHuI82hC/jWmlFJRKxsATtOu3oMwP4GTWLSabklt6MiyXIAJbohZ7TEqGe0Ns5w0zvMtfHZ8ld65i4/webYOIyhtBQjfH83t0gLVSjuZdFKyDNZ1YoF5ozCzMDfX0S+GZbDakZGxSJM2eJinCAxYyfLgIRTC5crVOwAEvwIn4mVIr3DAvnabRxor7bSR5DWdVZXxsOuNTpj4SnPP5iiixMFEpFR7aGgRIZ7q4WO1MFLavPC60zXyEEfHphxPBAaJcoKYP8ulDfBoB39Phvaus2BLsw4BKiaTMK2koRCcTS+VQTUiWKQllHup7v6fYPYrwUE/xNvZbtD78EW3yQgEwsgwILQQtazluHrqc8hCqMBcmKVWgYJyQOj6/ZKjls6vjyj2bc8txDfVVng1kRCvY+zgJfpC66Q6TvEy+tTS79vUyhj3Txon3YWRF0sSpMGvPN3SIpI3T2KxSKasTpIeyIYI0GGCamwq0Fh3mIpsJ1MRIIjvZ/3l1ceJbgRyU08apjMOm1ZE9NqWigS4+pmt0mIEpBBOoqeliJZRC5OTEgijY5jgc7DEpjTpMzog9OzpHAxtNXPQUNTtEUeiR4HFhsoH7wiuSNiyIyfOWNAUjhEDxTR8nLX1t70G23pGN5Q6T0llqS8j5ISa81I8cJ25CisuKKW/sQbgFe1zdwOT4Wqub+eK6sy3/59Z8qUh+r85tNogdqVqrFlupsrWGautncEfVre964JU5dw1vKWJifcFenZNiMb2t0DCMVVVu0Nu39iqKgl0QAqrBFjCvJKO1wUEYtYpZXhbm8oQpm9HvpP2gaEH1/f0qCXBlc4corQVcucqmL2hDlyD5khbLRFYM02qlYJsT97/DdZ4FxHgh9UK2vinaDBgedjgdDk6EbI1TcKxPIKAOLyWIkq5wLplvyClwvir2lhEISbcjIqWHdDk11blFdHA4mzKvwmogXO9AFOBezT2hu8Xntj05vHVrTIHfQiXHq8swuFwY1QlifE4pOT7rLFA76gVqDUcMSoTF1qpAGKRUjftA6LPWuHn4XarGrY2RjqMIV7sEHCKI3UFK6J+pZj6O4wgtAL07ZyQrlkZe3Gy7fFvAYGY3pSpOVvHmvnHe+AKkVAdO9bwFmy3MqvPGBVNwD5PTc1rEzPSolXkGk6s6+eM4WO2I8tUepNQGOMWk5DguO84x8OFNRxiSTUf13Mfd5c+CslwYUbXAFFGEPwXEjp/mL+r57+qZfBomJeNMqzX/VKnw46DVphMN0RZQeYYT1ZSzAd2a8tLoMa1GMpTFgyApeCLxENUUz6R5p/mqd3ETsAny4uc2i3WKOYIsiKNrNOkjwPyt6tZYgfUXIjJajnQXf/tYCBasw+q/DJtz/TD52zjJEpimuFGR0JJKyjOBq0NAGsbTEyFpYnaNv8vA2T3VbAkQ9UxmwF2JLImj7S4OSc83/aZ9TR5Oen5SeQEX0WdFjwN8zesgKxAWdmVrTD7VMgtLep0XoAWj4gxRTTktMS+TlZcWFMGpU2PHlyYsY2rDyZAVFnQX5QqG8ALuwF0QJ9WLYoBdnMBNRWQQ7ItVVHW/n4v95y44kCCJyO74UANof6HTVvgTzuy5v/Qd3zOWruMvbcOCM8Nrjx49Cf9SOQbzVlyaS0hfa7JHFC8y+VRkMroVHEUmdySRieq+jqPbICHID5Ma4zE9a+954zFzdPk1SDNyKnyNqIEulp6l1e1iSXzxaC3SE19qjPxpd3AsdvVgTe/pj1RfUPT0B0X+7OlQUzhDnArNToQksnHqyMahD5LEyRZS6GzbaQi9kazMBiQN989qN21DyFac0p9hgzBbrGWYLdQRHT3tiyTY0ucvMDk4iJ8c8q8TzY+HBd/ADK7L96eP+ZwRvg58bQaiZ0EYQhqlkxcD3ZtXWz19+9XrJDiEFITE5DD1c8+vdWO+oeLnQaIXICsCLg1GV/Sbbjxay2MWurCce0vP8GxraRme75vuESMS/WCO9fPRKN0JV6FRd2n65sIyrYXpOQ7p3fv7WKBdMH8MS3CgWWOkmaahFD/LJ7iHG+w5EkRpRMEeYxGeMwog/DYEBAbfngiNIJjesvjPC4JtGgT/L9hu8wRg9/uD0E+GBaeEp4152mo8B+DLi3i/oq6XW2FyUMg0WOvUFy+vwDecz6oeFZN7PoMFi10QdRnaCpNDYYMQaiDf3z/7/qK+A3CcWkwCIbMA5MVgPPJkcPjnAibjA9W8vPfb8joE6pYBTA7bIHoDN4juk2wP6YlX531zGqJ/pd8MtAptqd5/+ZHinwfvX8bZDjLJ5z39hlOfZArxFSZ3XMct3pn20l6aFpMvbvxHQxSRN8Zp8tIyUK2A3zYhgzabphBi82mO0yqz7ECqQBusyus9qAbUW/qNxn0GLf9yFJuMP6JbmJCL2gNMatxojGXWN4+PVQMI54b7O9zzGR2feTfcf8zDlLQ1HBDVHSOa7U7dNw3aPd65wYt3+WEfs8ZpO32sVMRqnifUyEtCMKZbDmQwDANyn2BKvRh4QTM7dt+xihYtooGCQTOzpJnNVLhxT21KTbL55fVJpTRF/hlXqTm2qLdGuWRmyV4xV8Q+3BG0QdTAGx7FVqSb1YAV6WQ26LuLXKMkN0kdX72Ll9IUNah2Nyudcsmpdr3prdg9UmH7K6KkwjYbIOZG10JZDpsht8QC+TnZLzi8mVZd23REkIJGWVu+8xm5qy1Ei4ZrlLVN5c/JXmot2L+DAfwgxrRClIwxdR7Z7fILnA86kBPX83FZMSeTYpKl3ccqf2OHJSI8Bw9and5xABwczIy7qDIz5G8DlGRSmR9fa2Qm2LPRUZNKYorMRuc+ig9kl4Oo7jOx/MM8zHLU7/2d1nlxL62UY8W/S5PLi70DOYNJTA7tAkIPhMaWFKJqsXJ3MKJqM/Ph3ITNYAA01ieV0hTFTX0INNYol8wsmdu2dyAh0WuNqG7V5q6IIxR9RfRHjhP/WhR+HO88h/YahjDNAnJeek296Kt0W729D0xK8QNc5SHJQSJKvNQ9q11SbtAbpYXnsMUYtspiMMCI7jdauKbheb7p2ktj4bEZeste0n98wdHRKWohEWbnkWEmJURnRwETXUX6rF1B9ZBoKejRM8bQ0z1l5xXR11fj6xK4ta/mXItgsYyYZvPfv8fpYQcT6k4J8kK19nE0QlT+MNhkhabmsqmEaLLGMxrJ5e1+NKJ31MIsRi5LfzVsJF4mTu5ynEReI0pjKdVmUfz5llGb7xuwjNdJkBFUliGqtTEBj+rPHc90TM9Z2gvLKJBVrfV4xvbAUWeu2wr3HFtkTbGedWoZAgE97jjqw8w6xxHpA7JauuO60zhcGOyyfxhg1nt7Gv9qDxXOukS+6YS/528CMtqbgB66/Qaj48fmKmGMLvxDptDwAcTYBUbH53E7wF7Y+7K70LG7GF+ceQdC8B03km4R9bLtHMO2c24VYXzh+0vDMm3HKbM49LobHhsSTUEpUBQQXYnzSDGTEsOem75rupa39BaG41nNU1VssYYzMA6vint/egRz5Hv/j3EY5t9xwxqiBh6koAMQ5wYP8ZDs6Q/JZO7/pXL3d8fnf0fWgz5McgkzGFP3SZyol3zHSCR/yXeMOt/BSyi+jvfkOMr6RPR5GKvT480aZqxPbJMS+z0Mg1omdMe80u0bvLqecs8Ojco5PLfoKt7huWXvcA8mm74Zh1D2r+OxOBna+21EZWgRpfNqqfpfEvdrLuT7YjYJdT53R+iXPO0587TkAJhyotZ3PMM28T9NfYlaJc66RH5J1HYZ758rSLW9xIh6MdyBhquYM2nRJKSeVwdYqdN4tOjm8fHxH1LCmJs=")),Zc=Vc("split","wall",10,-.4,-.4,1,1,30,lr(135)),function(){function e(e){Dc[e].addEventListener("click",(function(){Rc(e)}))}Rc(0);for(var t=0;t<Dc.length;t++)e(t);function n(){var e=gd(r[a],2),t=e[0],n=e[1];t=+t;var o=n.weapon,i=n.body;function s(){for(var e=d[l],n=Pc[e?0:1],a=0,r=Object.entries(e?o:i);a<r.length;a++){var s=gd(r[a],2),c=s[0],u=s[1];c=+c;var f,h=ps(n,"div","edit-icon-tab-title");h.textContent=`${1==t?"Celestial ":""}Tier ${c}`;var m=ps(n,"div","edit-icon-tab-list"),p=Oc[c+(1==t?5:0)]||0;m.dataset.text=`Reach ${p} stars to unlock`,Hc.push([h,p]),Hc.push([m,p]);var g=pd(u);try{function y(){var n=f.value,a=ps(m,"div",["edit-icon-tab-item","tooltip-trigger"]),r=ps(a,"canvas"),o=ps(a,"div","relative-tooltip-container");ps(o,"span",["bottom","relative","higher","tooltip"]).textContent=n.name,r.width=128,r.height=128,Nc.push([0,r,n,e,t]),(e?jc:Fc)[n.id]=a;var i=n;a.onclick=function(){Sc[e?"weaponID":"bodyID"]!=i.id&&(Sc[e?"weaponID":"bodyID"]=i.id,e||(Sc.tankType=t),Yc())}}for(g.s();!(f=g.n()).done;)y()}catch(v){g.e(v)}finally{g.f()}}}for(var l=0,d=[!0,!1];l<d.length;l++)s()}for(var a=0,r=Object.entries(qc);a<r.length;a++)n();for(var o=0,i=Object.entries(Ic);o<i.length;o++){var s=gd(i[o],2);s[0];var l,d=s[1],c=Pc[2],u=ps(c,"div","edit-icon-tab-title");u.textContent=d.name;var f=ps(c,"div","edit-icon-tab-list");f.dataset.text=`Reach ${d.stars} stars to unlock`,Hc.push([u,d.stars]),Hc.push([f,d.stars]);var h=pd(d.data);try{function _(){var e=l.value,t=ps(f,"div",["edit-icon-tab-item"]);t.style.backgroundColor=wm(0,e),Uc[e]=t;var n=e;t.onclick=function(){Sc.team!=e&&(Sc.team=n,Yc())}}for(h.s();!(l=h.n()).done;)_()}catch(z){h.e(z)}finally{h.f()}}for(var m=0,p=Object.entries(Ac);m<p.length;m++){var g=gd(p[m],2);g[0];var y=g[1],v=Pc[3],b=ps(v,"div","edit-icon-tab-title");b.textContent=y.name;var w=ps(v,"div","edit-icon-tab-list");function C(){var e=gd(k[x],2),t=e[0],n=e[1],a=ps(w,"div",["edit-icon-tab-item","tooltip-trigger"]),r=ps(a,"canvas"),o=ps(a,"div","relative-tooltip-container");ps(o,"span",["bottom","relative","higher","tooltip"]).textContent=n.name,r.width=128,r.height=128,Nc.push([1,r,n]),Wc[t]=a;var i=t,s=n;a.onclick=function(){Sc.background!=i&&(Sc.background=i,Sc.backgroundColor=s.backgroundColor,Sc.gridColor=s.gridColor,Sc.borderColor=s.borderColor,Sc.gridSize=s.gridSize,Yc())}}w.dataset.text=`Reach ${y.stars} stars to unlock`,Hc.push([b,y.stars]),Hc.push([w,y.stars]);for(var x=0,k=Object.entries(y.data);x<k.length;x++)C()}function S(){var e=T[M],t=ps(Zd,"div","slider"),n=ps(t,"label");n.textContent=e.name;var a=ps(t,"input","slide");a.type="range",a.min=e.min,a.max=e.max,a.step=e.step,a.attribute=e,e.input=a,a.oninput=function(t){n.textContent=`${e.name}: ${(+(t.target.value||0)).toFixed(e.digits||0)}${e.suffix||""}`,t.fake||(Sc[e.key]=t.target.value*(e.multiplier||1),Yc())},a.oninput({target:a,fake:!0})}for(var M=0,T=Lc;M<T.length;M++)S()}();var Jc=[],Kc="",Qc=!1;function eu(){var e=nc.value.trim().replaceAll(/\s+/g,"");nc.value=e,e.length>0&&document.activeElement==nc?rc.classList.remove("hide"):rc.classList.add("hide"),e!=Kc&&nu(),Kc=e,tu()}function tu(){Tr(rc);var e=!1;function t(){var t=Jc[n];if(!t.username.toLowerCase().startsWith(Kc.toLowerCase()))return"continue";e&&ps(rc,"hr"),e=!0;var a=ps(rc,"div","profile-screen-search-result"),r=ps(a,"canvas","icon");r.width=128,r.height=128,Xm(r,t.icon);var o=ps(a,"div"),i=ps(o,"div","result-name");i.innerHTML=`<span style="font-weight: bold;">${rx(t.username.substring(0,Kc.length))}</span>`,i.innerHTML+=rx(t.username.substring(Kc.length,t.username.length));var s=i.getBoundingClientRect().width;i.style.width="auto";var l=i.getBoundingClientRect().width/s;i.style.width="",i.style.fontSize=2.5/Math.max(1,l)+"vmin";var d=ps(o,"div","result-stars");ps(d,"img").src="/assets/star.png",ps(d,"div","result-star-count").innerText=kr(t.stars),a.tabIndex=n,a.mouseDown=!1,a.onmousedown=function(){a.mouseDown=!0},a.onmouseleave=function(){a.mouseDown=!1},a.onmouseup=function(){a.mouseDown&&(a.mouseDown=!1,mc(t.id),nc.blur())}}for(var n=0;n<Jc.length;n++)t()}nc.onfocus=function(e){Qc||eu(),Qc=!1},nc.onblur=function(e){e.relatedTarget==ac||e.relatedTarget&&e.relatedTarget.classList.contains("profile-screen-search-result")?(e.relatedTarget&&e.relatedTarget.classList.contains("profile-screen-search-result")&&(Qc=!0),nc.focus()):eu()},nc.oninput=function(){eu()},nc.onkeydown=function(e){return" "!=e.key},ac.onmousedown=function(){nc.focus()},ac.onclick=function(){nc.focus(),nc.select()};var nu=(0,Oe.debounce)(50,wd(hd().mark((function e(){var t;return hd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=(t=nc.value.trim().replaceAll(/\s+/g,"")).length){e.next=5;break}Jc=[],e.next=7;break;case 5:return e.next=7,Ju("/searchusers",{username:t},(function(e){Jc=[],tu()}),(function(e){if(e.error)return Jc=[],void tu();"object"==md(e)&&((Jc=e).forEach((function(e){e.icon=JSON.parse(Mr(e.profilePicture))})),tu())}));case 7:case"end":return e.stop()}}),e)}))));function au(e){return(au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ru(){ru=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),s=new T(r||[]);return a(i,"_invoke",{value:x(e,n,s)}),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var u={};function f(){}function h(){}function m(){}var p={};l(p,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(_([])));y&&y!==t&&n.call(y,o)&&(p=y);var v=m.prototype=f.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(a,o,i,s){var l=c(e[a],e,o);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==au(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){d.value=e,i(d)}),(function(e){return r("throw",e,i,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function x(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return z()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var s=k(i,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=c(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}function k(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var r=c(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function _(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:z}}function z(){return{value:void 0,done:!0}}return h.prototype=m,a(v,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,a,r,o=Promise){var i=new w(d(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),l(v,s,"Generator"),l(v,o,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=_,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;M(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function ou(e,t,n,a,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function iu(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){ou(o,a,r,i,s,"next",e)}function s(e){ou(o,a,r,i,s,"throw",e)}i(void 0)}))}}eu();var su="https://api.scnx.cc",lu=!1,du=!1,cu=void 0,uu=document.getElementById("button-account"),fu=document.getElementById("login"),hu=document.getElementById("signup"),mu=document.getElementById("login-loading"),pu=document.getElementById("signup-loading"),gu=document.getElementById("login-error"),yu=document.getElementById("signup-error"),vu=document.getElementById("signed-in-text"),bu=document.getElementById("not-signed-in-text"),wu=document.getElementById("signed-in-star-counter"),xu=document.getElementById("log-in"),ku=document.getElementById("sign-up"),Su=document.getElementById("log-out"),Mu=document.getElementById("login-button"),Tu=document.getElementById("login-cancel"),_u=document.getElementById("signup-button"),zu=document.getElementById("signup-cancel"),Cu=document.getElementById("sign-up-instead"),Eu=document.getElementById("log-in-instead");xu.onclick=function(){return ju(),!1},ku.onclick=function(){return Fu(),!1},Su.onclick=function(){return $u(),!1},Tu.onclick=function(){Uu()},zu.onclick=function(){Hu()},Mu.onclick=function(){Uu(!0)},_u.onclick=function(){Hu(!0)},Cu.onclick=function(){return Uu(!1),Fu(),!1},Eu.onclick=function(){return Hu(!1),ju(),!1},uu.onclick=function(){du?mc(cu.id):ju()};var Lu=document.getElementById("login-show-password"),Iu=document.getElementById("signup-show-password");Lu.onclick=function(){Lu.checked?Ou.type="text":Ou.type="password"},Iu.onclick=function(){Iu.checked?Du.type="text":Du.type="password",Pu.type=Du.type};var Au=document.getElementById("login-username"),Ou=document.getElementById("login-password"),Bu=document.getElementById("signup-username"),Du=document.getElementById("signup-password"),Pu=document.getElementById("signup-confirm-password");[Au,Ou,Bu,Du,Pu].forEach((function(e){var t=document.createElement("p");t.style="text-align: center; font-size: 1.5vmin",t.innerHTML="",e.parentNode.insertBefore(t,e.nextSibling)})),Bu.onchange=function(){var e=[];Bu.classList.remove("error"),Bu.value=Bu.value.trim(),Bu.value.length<1?e.push("Provide a username."):Bu.value.length<3?e.push("Username must be at least 3 characters long."):/^[0-9a-zA-Z_-]+$/.test(Bu.value)||e.push("Username must only contain letters, numbers, underscores, and dashes."),Bu.value.length>20&&e.push("Username must not be longer than 20 characters."),e.length>0&&Bu.classList.add("error"),Bu.nextSibling.innerHTML=e.join("<br />")},Du.onchange=function(){var e=[];Du.classList.remove("error"),Du.value=Du.value.trim(),Du.value.length<1?e.push("Provide a password."):/^[0-9a-zA-Z_\-!@#$%^&*+=?;:\(\)\[\]`]+$/.test(Du.value)||e.push("Password must only contain letters, numbers, and symbols."),Du.value.length>256&&e.push("Password must not be longer than 256 characters."),e.length>0&&Du.classList.add("error"),Du.nextSibling.innerHTML=e.join("<br />"),Pu.onchange()},Pu.onchange=function(){var e=[];Pu.classList.remove("error"),Pu.value=Pu.value.trim(),Pu.value!=Du.value&&e.push("Passwords do not match."),e.length>0&&Pu.classList.add("error"),Pu.nextSibling.innerHTML=e.join("<br />")};var Ru=!1,Nu=!1;function ju(){Hb||lu||du||(Ru=!0,gu.innerHTML="",[Au,Ou].forEach((function(e){e.value="",e.nextSibling.innerHTML="",e.classList.remove("error")})),mu.classList.add("hide"),Yb(!0),fu.classList.remove("hide"),ox("log in"),lx("log-in"))}function Fu(){Hb||lu||du||(Nu=!0,yu.innerHTML="",[Bu,Du,Pu].forEach((function(e){e.value="",e.nextSibling.innerHTML="",e.classList.remove("error")})),Yb(!0),pu.classList.add("hide"),hu.classList.remove("hide"),ox("sign up"),lx("sign-up"))}function Uu(){return Wu.apply(this,arguments)}function Wu(){return Wu=iu(ru().mark((function e(){var t,n,a=arguments;return ru().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]&&a[0],lu){e.next=16;break}if(n=!0,[Au,Ou].forEach((function(e){""!=e.value?e.classList.contains("error")&&(n=!1):n=!1})),gu.innerHTML="",!t){e.next=11;break}if(!n){e.next=9;break}return e.next=9,Zu();case 9:e.next=16;break;case 11:Ru=!1,fu.classList.add("hide"),Yb(!1),ix(),sx();case 16:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}function Hu(){return Yu.apply(this,arguments)}function Yu(){return Yu=iu(ru().mark((function e(){var t,n,a=arguments;return ru().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]&&a[0],lu){e.next=16;break}if(n=!0,[Bu,Du,Pu].forEach((function(e){""!=e.value?e.classList.contains("error")&&(n=!1):n=!1})),yu.innerHTML="",!t){e.next=11;break}if(!n){e.next=9;break}return e.next=9,Xu();case 9:e.next=16;break;case 11:Nu=!1,hu.classList.add("hide"),Yb(!1),ix(),sx();case 16:case"end":return e.stop()}}),e)}))),Yu.apply(this,arguments)}function $u(){return Gu.apply(this,arguments)}function Gu(){return(Gu=iu(ru().mark((function e(){var t,n;return ru().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=cu.username,n=nf,tf(),e.next=5,Ju("/logout",{sessionID:n},(function(e){cv("Error when logging out",e)}),(function(e){e.error?cv("Error when logging out",e.error):cv("Successfully Logged Out",`Sucessfully logged out of account: ${t}`)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xu(){return qu.apply(this,arguments)}function qu(){return(qu=iu(ru().mark((function e(){return ru().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pu.classList.remove("hide"),lu=!0,e.next=4,Ju("/signup",{username:Bu.value.trim(),password:Du.value.trim()},(function(e){pu.classList.add("hide"),lu=!1,yu.innerHTML=e}),(function(e){pu.classList.add("hide"),lu=!1,e.error?yu.innerHTML=e.error:(e.stars=0,Qu(e),hu.classList.add("hide"),Yb(!1),ix(),sx(),setTimeout((function(){var e=Be.g[1];fd(1),og(e.name,e.description,e.rarity,e.stars),ef(e.stars)}),200))}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zu(){return Vu.apply(this,arguments)}function Vu(){return(Vu=iu(ru().mark((function e(){return ru().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mu.classList.remove("hide"),lu=!0,e.next=4,Ju("/login",{username:Au.value.trim(),password:Ou.value.trim()},(function(e){mu.classList.add("hide"),lu=!1,gu.innerHTML=e}),(function(e){mu.classList.add("hide"),lu=!1,e.error?gu.innerHTML=e.error:(Qu(e),fu.classList.add("hide"),Yb(!1),ix(),sx())}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ju(e,t,n,a){return Ku.apply(this,arguments)}function Ku(){return(Ku=iu(ru().mark((function e(t,n,a,r){return ru().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){var i=fetch(su+t,{method:"POST",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify(n)});i.catch((function(t){a(t),e()}));var s=i.then((function(e){return e.json()}));s.catch((function(t){a(t),e()})),s.then((function(t){r(t),e()}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qu(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];af(e.sessionID),cu=e,du=!0,bu.classList.add("hide"),vu.classList.remove("hide"),vu.firstElementChild.innerHTML=cu.username,vu.children[1].children[1].innerHTML=kr(cu.stars),function(e){Xp=e}(cu.stars),cd(JSON.parse(Mr(e.achievements))),3==Mw&&mc(),nf&&Ju("/checknotifications",{sessionID:nf},(function(e){}),(function(e){e.error||(df=e,uf())})),t&&Zv()}function ef(e){cu.stars+=e,vu.children[1].children[1].innerHTML=kr(cu.stars),function(e){if(e){var t=Math.max(1,Math.floor(Math.abs(e)/15))*Math.sign(e);Qp.unshift({value:e,lastValue:null,text:"",time:.25,valueToUse:e,timeUntilUse:.3,step:t,size:1})}}(e)}function tf(){cu=void 0,du=!1,bu.classList.remove("hide"),vu.classList.add("hide"),af(),3==Mw&&mc(),Zv(),od()}var nf=mx("sessionID");function af(e){e?(nf=e,hx("sessionID",e)):(nf=void 0,px("sessionID"))}var rf=document.getElementById("notification-popup"),of=document.getElementById("notification-popup-title"),sf=document.getElementById("notification-popup-text"),lf=document.getElementById("notification-popup-ok-button"),df=[],cf=null;function uf(){cf&&(Ju("/readnotification",{sessionID:nf,id:cf},(function(e){cv("Error when marking notification as read",e)}),(function(e){e.error&&cv("Error when marking notification as read",e.error)})),cf=null);var e=df.shift();e?(of.innerHTML=e.title+(0==df.length?"":` (+${df.length})`),sf.innerHTML=e.data,rf.classList.remove("hide"),Yb(!0),cf=e.id):(rf.classList.add("hide"),Yb(!1))}function ff(e){return function(e){if(Array.isArray(e))return gf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hf(e,t){var n,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=pf(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0;function s(){}return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw n}}}}function mf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,i,s=[],l=!0,d=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){d=!0,r=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return s}}(e,t)||pf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pf(e,t){if(e){if("string"==typeof e)return gf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gf(e,t):void 0}}function gf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}lf.onclick=function(){uf()};var yf=document.getElementById("ping"),vf=document.getElementById("server-tick-time"),bf=document.getElementById("client-tick-time"),wf=document.getElementById("fps"),xf=document.getElementById("player-count"),kf=document.getElementById("total-players"),Sf=document.getElementById("extra-performance-info"),Mf=document.getElementById("position"),Tf=document.getElementById("server-name");document.getElementById("server-speed");var _f,zf=document.getElementById("chat"),Cf=Array.from(document.getElementsByClassName("hud")),Ef=!0,Lf=!1,If=!1,Af=!1,Of=[],Bf=[],Df=0,Pf="",Rf="",Nf=0,jf=null,Ff=null,Uf=0,Wf=0,Hf="",Yf=!1;function $f(e,t=!1){t&&(e||(Yf=!0)),e&&(Yf=!1),(Ef=e)?Cf.forEach((function(e){("chat"!=e.id||Ur.showChat&&Gf)&&e.classList.remove("hidden")})):Cf.forEach((function(e){e.classList.add("hidden")}))}var Gf=!0;function Xf(e){(Gf=e)&&Ur.showChat?zf.classList.remove("hidden"):zf.classList.add("hidden")}var qf=!0,Zf=0,Vf=0,Jf=0,Kf=0,Qf=0,eh=!1,th=Be.teamColors[10],nh={x:0,y:0},ah=[],rh="main",oh="default",ih=0,sh=1,lh=1,dh={};function ch(e,t=1){ih=oh,sh=0,lh=t,oh=e}var uh=Date.now(),fh=performance.now(),hh=16.6666667,mh=null,ph=document.getElementById("overlay-canvas"),gh=document.getElementById("darkness-canvas"),yh=document.getElementById("render-canvas"),vh=document.getElementById("hud-canvas"),bh=document.getElementById("ui-canvas"),wh=document.getElementById("achievement-canvas"),xh=document.getElementById("game-canvas"),kh=document.getElementById("server-select-canvas"),Sh=xh.getContext("2d"),Mh=ph.getContext("2d"),Th=gh.getContext("2d"),_h=yh.getContext("2d"),zh=vh.getContext("2d"),Ch=bh.getContext("2d"),Eh=wh.getContext("2d"),Lh=kh.getContext("2d"),Ih=Sh,Ah=0,Oh=0,Bh=!1;kh.addEventListener("mousemove",(function(e){Ah=e.offsetX*Qh,Oh=e.offsetY*Qh})),kh.addEventListener("mousedown",(function(e){Ah=e.offsetX*Qh,Oh=e.offsetY*Qh,Bh=!0})),window.addEventListener("click",(function(e){e.target!=kh&&(lp=!1)}));var Dh=1,Ph=1,Rh=0,Nh=0,jh=0,Fh=0,Uh=1e3,Wh=1,Hh=0,Yh=0,$h=1;function Gh(){var e,t;hm=!1;var n,a,r,o,i=Date.now();fh=performance.now(),hh=(i-uh)/1e3,uh=i;var s=performance.now();xh.style.cursor="default";try{!function(e){var t=[],n=0;function a(){var a=_y.entries[r],o=Cy.entries.find((function(e){return e.id==a.id}));o?Object.keys(a).forEach((function(t){switch(t){case"formattedScore":break;case"scoreRatio":o.scoreRatio=pr(o.scoreRatio,a.scoreRatio,.05,e),isFinite(o.scoreRatio)||(o.scoreRatio=a.scoreRatio);break;case"score":o.score=pr(o.score,a.score,.05,e),isFinite(o.score)||(o.score=a.score),o.formattedScore=gx(o.score);break;case"fadeTime":o.fadeTime=pr(o.fadeTime,1,.001,e);break;default:o[t]=a[t]}})):o=sr(a),null==o.index&&(o.index=n),o.index=pr(o.index,n,.01,e),n++,t.push(o)}for(var r=0;r<_y.entries.length;r++)a();if(null==Cy.length&&(Cy.length=n),Cy.length=pr(Cy.length,n,.01,e),Cy.entries){function i(){var n=Cy.entries[o];_y.entries.find((function(e){return e.id==n.id}))||(n.fadeTime=pr(n.fadeTime,0,.001,e),n.fadeTime>.1&&t.push(n))}for(var o=0;o<Cy.entries.length;o++)i()}Cy.highestScore=_y.highestScore,Cy.playerCount=_y.playerCount,Cy.showPlayers=_y.showPlayers,Cy.entries=t}(hh),o=hh,Lg=0,Ig=0,Eg.forEach((function(e,t){var n,a,r,i=1/(Math.pow((a=Rh-(n=e).x,r=Nh-n.y,Math.sqrt(a*a+r*r)),2)/1e5);i=Math.min(1,i),Lg+=i*e.power*(e.time/e.maxTime)*(1-2*Math.random()),Ig+=i*e.power*(e.time/e.maxTime)*(1-2*Math.random()),e.time-=o,e.time<0&&Eg.splice(t,1)})),Object.entries(Ry).forEach((function(e){var t=mf(e,2),n=t[0],a=t[1];a.forEach((function(e,t){e.time-=hh,e.time<0&&a.splice(t,1),e.typingFade=Math.min(1,e.typingFade+hh/.5)})),0==a.length&&delete Ry[n]})),Object.entries(Ny).forEach((function(e){var t=mf(e,2),n=t[0],a=t[1];a.time-=hh,a.time>0?a.lerping=Math.min(a.lerping+hh/.5,1):a.lerping=Math.max(a.lerping-hh/.5,0),0==a.lerping&&a.time<0&&delete Ny[n]})),jy.forEach((function(e,t){e.time-=hh,e.time<0&&jy.splice(t,1)}));e:if(qf){var l=Mv();if(l=={}||null==l)return;var d=l.tanks,c=l.polygons,u=l.bullets,f=l.rifts,h=l.mapSize;l.tickTime;var m=l.x,p=l.y;if(Pg(hh,f),null!=h)Ph=pr(Ph,4800,.05,hh),Dh=Ph/Math.max(xh.width,1.7777777777777777*xh.height),Wh=5/Dh,null!=m&&null!=p&&(jh=pr(jh,m,.2,hh)+Lg,Fh=pr(Fh,p,.2,hh)+Ig,Rh=jh,Nh=Fh),Uh=h,sy(),Jh(c,d,u,f,null),Ih=Sh;else{Pg(hh),Ph=pr(Ph,2400*(sh<.5&&sh>.4?.1:1),.05,hh),Dh=Ph/Math.max(xh.height,xh.width);var g,y=i/7500,v=sh;sh=pr(sh,1,.1,hh),v<.5&&sh>.5&&Dg(),jh=200*Math.cos(y)+-2e3*(sh<.5?sh:sh-1)*lh,Fh=200*Math.sin(y),Rh=jh,Nh=Fh;var b=ml[sh<.5?ih:oh]||ml.default;Uh=b.dimension.mapSize,sy(!0),ah.forEach((function(e){nm(e)&&e.below&&kg(e)}));var w=hf(b.rifts);try{for(w.s();!(g=w.n()).done;)xg(null,g.value)}catch(o){w.e(o)}finally{w.f()}for(var x=0;x<b.polygons.length;x++)Rg(b.polygons[x]);for(var k=0;k<b.tanks.length;k++){var S=b.tanks[k];Ng(S.x,S.y,S.size,S.d,S.sides,S.outerSides,S.outerSize,S.color,S.barrels,S.gadgets,S.layers,S.radiant)}for(var M=0;M<b.tanks.length;M++){var T=b.tanks[M];T.y*=-1,T.lastColor=T.color,Fg(T),T.y*=-1}ah.forEach((function(e){nm(e)&&!e.below&&kg(e)})),Jh([],[],[],[],null,!1),Ih=Sh;var _=3500*(2*sh-1)*lh;n=xh.width/2+_/Dh,a=xh.height/2+0/Dh,r=1100/Dh,Ih.beginPath(),Ih.arc(n,a,r,0,2*Math.PI,!1),Ih.fillStyle="#171717",Ih.fill()}if(1==Mw){(Ih=Mh).clearRect(0,0,ph.width,ph.height);var z=ph.width/2,C=ph.height/2-15*em,E=_f.isCelestial?10*em:5*em,L=em/10,I=Om/4,A=pm(wm(_f.team,_f.team,_f.id,_f.id),_f.isInvulnerable,_f.radiant);_f.outerSize>0&&Tg(z,C,E+_f.outerSize*E,"#5F676C",_f.outerSides,I,!1,L,E),$g(z,C,E,I,_f.barrels,!1,L),Tg(z,C,E,A,_f.sides,I,!1,L),jg(z,C,I,E,A,_f.layers,0,_f.radiant,!1,!1,L),Wg(z,C,E,I,_f.gadgets,A,0,_f.radiant,!1,!1,L),Ih=Sh}else 2==Mw&&function(){(Ih=Lh).globalAlpha=1,Ih.clearRect(0,0,kh.width,kh.height),cp=pr(cp,lp?1:0,.001,hh);var e=Cb[Bb]||{},t=null!=e.gamemode?Xw(e.gamemode):"#c0c0c0",n=null!=e.gamemode?qw(e.gamemode):"Connecting...",a=e.region||"???",r=Lb[e.gamemode]||[];ap=pr(ap,1,.01,hh),ip=pr(ip,1,.001,hh);var o=Sm(t.substring(1),tp.substring(1),pr(0,1,.01,hh));tp=o;var i=kh.width,s=kh.height,l=i/2,d=s/2,c=1*em;qg(l,d,i,s,c,o),qg(l,d+s/4,i,s/2,c,km(o)),Zg(l,d,i,s,c),Ih.lineWidth=.4*em*2,Ih.strokeStyle="black",Ih.clip(),Ih.stroke();var u,f=kh.matches(":hover"),h=ep[0].size;Ih.globalAlpha=Math.max(0,Math.min(1,2*ap-1)),Zm(l+40*em*(ap-1)*rp,d-2.5*em,n,4*em*h,.6*em),Ih.globalAlpha=Math.max(0,Math.min(1,2*(1-ap)-1)),Zm(l+40*em*ap*rp,d-2.5*em,np,4*em*h,.6*em),Ih.globalAlpha=1,Zm(l,d+1.6*em,"Region",2*em,.6*em),h=ep[1].size,Ih.globalAlpha=Math.max(0,Math.min(1,3*ip-1.5)),Zm(l+10*em*(ip-1)*sp,d+4.4*em,a,2.5*em*h,.6*em),Ih.globalAlpha=Math.max(0,Math.min(1,3*(1-ip)-1.5)),Zm(l+10*em*ip*sp,d+4.4*em,op,2.5*em*h,.6*em),Ih.globalAlpha=1;var m,p={x:Ah,y:Oh};if(kh.style.cursor="default",!lp){var g,y=hf(ep);try{for(y.s();!(g=y.n()).done;){var v=g.value,b="gamemode"==v.id,w=Vm(b?n:a,b?4*em:2.5*em,.6*em),x=w.width,k=w.actualBoundingBoxAscent+w.actualBoundingBoxDescent+.6*em,S=Iy(p,{x:l-x/2,y:d+(b?-2.5:4.4)*em-k/2-.6*em,width:x,height:k})&&f&&(b?Eb.length:r.length)>1;v.hovered=S,v.size=mr(v.size,S?1.1:1,.2),S&&(kh.style.cursor="pointer",Bh&&(Bh=!1,lp=!0,dp=b))}}catch(e){y.e(e)}finally{y.f()}}var M,T,_=hf(Km);try{for(_.s();!(u=_.n()).done;){var z=u.value,C=z.sign,E={x:l+17*em*C,y:d-2.5*em,width:6*em,height:8*em};E.x-=E.width/2,E.y-=E.height/2;var L=!lp&&Iy(p,E)&&f;z.size=mr(z.size,L&&Ab?1.2:1,.2),Zm(l+17*em*C,d-2.5*em,1==C?">":"<",6*z.size*em,.6*em,Ab?"#ffffff":"#c0c0c0"),L&&Ab&&(kh.style.cursor="pointer",Bh&&(Bh=!1,rp=-C,ap=0,np=n,z.size=1.5,1==C?Pw():Dw()))}}catch(e){_.e(e)}finally{_.f()}var I=hf(Qm);try{for(I.s();!(m=I.n()).done;){var A=m.value,O=A.sign,B={x:l+9*em*O,y:d+4.4*em,width:4*em,height:6*em};B.x-=B.width/2,B.y-=B.height/2;var D=!lp&&Iy(p,B)&&f;A.size=mr(A.size,D&&Ob?1.2:1,.2),Zm(l+9*em*O,d+4.4*em,1==O?">":"<",4*A.size*em,.6*em,Ob?"#ffffff":"#c0c0c0"),D&&Ob&&(kh.style.cursor="pointer",Bh&&(Bh=!1,sp=-O,ip=0,op=a,A.size=1.5,1==O?Nw():Rw()))}}catch(e){I.e(e)}finally{I.f()}if(cp>.05){cp<.95&&(M=kh.width,T=kh.height,uy.width=M,uy.height=T,Ih=fy),qg(l,d,i,s,c,"#000000");for(var P=Math.ceil(Math.sqrt(dp?Eb.length:r.length)),R=0,N=0,j=0;j<(dp?Eb.length:r.length);j++){var F=void 0,U=void 0,W=void 0;dp?U=Xw(F=Eb[j]):(W=r[j],U=Be.polygonColors[j]);var H=i/P,Y=s/P,$=l+H*(R+.5)-i/2,G=d+Y*(N+.5)-s/2,X={x:$,y:G,width:H,height:Y};X.x-=X.width/2,X.y-=X.height/2;var q=lp&&Iy(p,X)&&f;if(q&&(kh.style.cursor="pointer",Bh)){Bh=!1,lp=!1;var Z=cr();dp?j!=Db&&(rp=-Z,ap=0,np=F,$w(j,Z)):j!=Pb&&(sp=-Z,ip=0,op=W,Yw(j,Z))}var V=.5*em;qg($,G,H-V,Y-V,c,U),qg($,G+Y/4,H-V,Y/2-V,c,km(U)),Zg($,G,H,Y,c),Ih.lineWidth=.4*em*2,Ih.strokeStyle=q?"white":"black",Ih.save(),Ih.clip(),Ih.stroke(),Ih.restore(),Zm($,G,dp?qw(F):W,5*em/P,.6*em),++R==P&&(R=0,N++)}Bh&&(lp=!1),cp<.95&&((Ih=Lh).globalAlpha=cp,Ih.drawImage(uy,0,0))}Ih=Sh,Bh=!1}()}else{var O=Mv();if(t=O,0==Object.keys(t).length){if(Ph=pr(Ph,2400,.05,hh),Dh=Ph/Math.max(xh.height,xh.width),sy(!1,!1),(um+=hh)>.3){var B=xh.width/2,D=xh.height/2;Ih.globalAlpha=Math.min(1.5*(um-.3),1),Zm(B,D,"Joining Server...",10*em,10),um>3&&(Ih.globalAlpha=Math.min(1.5*(um-3),1),Zm(B,D+8*em,"If this takes too long, there might be a problem with the server or your connection.",2.5*em,10)),um>15&&(Ih.globalAlpha=Math.min(1.5*(um-15),1),Zm(B,D+12*em,"Reloading the page may fix the problem.",2*em,10))}Ih.globalAlpha=1;break e}var P=O.me,R=O.tanks,N=O.polygons,j=O.bullets,F=O.rifts,U=O.mapSize,W=O.tickTime;O.dt;var H=O.dimension,Y=O.cameraSizeMultiplier;if(Pg(hh,F),rh=H,!P)break e;if(cm&&(cm=!1,$f(!0),window.addEventListener("mousedown",Ks),window.addEventListener("mouseup",Qs),window.addEventListener("keydown",Gs),window.addEventListener("keyup",Xs),window.addEventListener("mousemove",Ds),window.addEventListener("click",Ds),window.addEventListener("touchstart",Ws),window.addEventListener("touchmove",Hs),window.addEventListener("touchend",Ys),window.addEventListener("focus",al),window.addEventListener("blur",al)),W&&!Number.isNaN(W)){var $=Ey(Jf,W);Jf=Vf,Vf=Math.round(10*$)/10}th=pm(wm(P.team,P.team,P.id,P.id),P.isInvulnerable,P.radiant),zb&&function(e){if(!oo){if(Fs-=e,Rs[1].selected&&(Fs=.3),Fs>0)Ns+=6*Rs[1].x,js+=6*Rs[1].y;else{var t=pr(1,0,.001,e);Ns*=t,js*=t}var n=Ns/Dh/2,a=js/Dh/2;n=ir(n,-window.innerWidth/2,window.innerWidth/2),a=ir(a,-window.innerHeight/2,window.innerHeight/2),lb(Ns=n*Dh*2,js=a*Dh*2)}}(hh),nl(),Es&&(Ms=e=Ms+1.2*Ts*hh,eb(e)),P.d=Ms,ro&&oo&&(so.barrels&&(P.barrels=so.barrels),P.oldGadgets=P.gadgets,null!=lo.gadgets&&(P.gadgets=lo.gadgets),null!=lo.layers&&(P.layers=lo.layers),null!=lo.outerSides&&(P.outerSides=lo.outerSides),null!=lo.outerSize&&(P.outerSize=lo.outerSize),null!=lo.sides&&(P.sides=lo.sides),null!=lo.radiant&&(P.radiant=lo.radiant),null!=lo.team&&(P.team=lo.team),null!=lo.visualTeam&&(P.team=lo.visualTeam)),Uh=U,Ur.staticCamera?(jh=P.x+Lg,Fh=P.y+Ig):(jh=pr(jh,P.x,1e-6,hh)+Lg,Fh=pr(Fh,P.y,1e-6,hh)+Ig),Rh=jh,Nh=Fh,P.size>=.1&&(Ph=pr(Ph,2400*(.8+P.size/30*.2)*(Y||1),.05,hh),Dh=Ph/Math.max(xh.width,1.7777777777777777*xh.height));var G=F.filter((function(e){return 0==e.type})),X=0;if(G.length>0){var q=null,Z=null,V=null;G.forEach((function(e){var t=Math.sqrt(Math.pow(e.x-jh,2)+Math.pow(e.y-Fh,2)),n=t/e.size;(null==V||q>10*V.size&&Z>n||e.size>V.size)&&(q=t,Z=n,V=e)}));var J=Math.min(1e3,Math.max(1,Math.pow(V.size,1.5)))/1e3,K=(.5+.5*gr(Math.min(1,q/(15*V.size)),3,!0)*J)/(.5+.5*J),Q=1-K;Rh=mr(Rh,V.x,Q),Nh=mr(Nh,V.y,Q),$h=pr($h,K,.05,hh),X=.35*Math.min(.5,1-Math.min(1,q/(25*V.size)))}else $h=pr($h,1,.05,hh);Dh*=$h,Hh=P.x-Rh,Yh=P.y-Nh,Wh=5/Dh,sy(),Jh(N,R,j,F,P,!0,X),function(e,t){var n;zb&&Ur.showDroneTrajectory&&Math.abs(Ns)+Math.abs(js)>2&&Kg(xh.width/2+Ns/Dh,xh.height/2+js/Dh,10/Dh,"#000000",!1),Ur.minimap&&!oo&&function(e,t){var n,a=ol[rh],r=Uh/(n=a||il).trueMapSize,o=150,i=dh.visual.showMinimap,s=!1;e&&((s=e.x>-r&&e.x<r&&e.y>-r&&e.y<r)||(i=!1)),$p=pr($p,i?.5:0,.5,hh),Ih.globalAlpha=$p,Ih.fillStyle=n.visual.backgroundColor,Ih.fillRect(10,10,o,o);for(var l=0;l<n.bases.length;l++){var d=n.bases[l];Ih.fillStyle=wm(0,d.team,0,0);var c=d.width*n.trueMapSize,u=d.height*n.trueMapSize;Ih.fillRect(85-(-d.x/n.trueMapSize+c/2)*o/2,85-(-d.y/n.trueMapSize+u/2)*o/2,c*o/2,u*o/2)}if(e&&s&&function(e,t,n,a=6,r=10){Ih.fillStyle="black",Ih.translate(e,t),Ih.rotate(n-lr(90)),Ih.beginPath(),Ih.moveTo(r/2,0),Ih.lineTo(r/-2,a/2),Ih.lineTo(r/-2,a/-2),Ih.fill(),Ih.setTransform(1,0,0,1,0,0)}(85+e.x/r*o/2,85+e.y/r*o/2,e.d),t){Ih.globalAlpha=.5*$p;for(var f=0;f<t.length;f++){var h=t[f];h.x>-r&&h.x<r&&h.y>-r&&h.y<r&&Gp(85+h.x/r*o/2,85+h.y/r*o/2,h)}Ih.globalAlpha=$p}Ih.lineCap="round",Ih.strokeStyle="black",Ih.lineWidth=5,Ih.strokeRect(10,10,o,o),Ih.globalAlpha=1}(e,t),n="object"==typeof e.nameColor?wm(132,132,0,1,e.nameColor[0],e.nameColor[1]):wm(e.nameColor,e.nameColor),Pp=pr(Pp,_s?1:0,.05,hh),Dp=pr(Dp,zs?1:0,.05,hh),Pp>.05&&Fp(!0,e.isCelestial),Dp>.05&&Fp(!1,e.isCelestial),Ih.globalAlpha=1;var a=xh.width/2,r=xh.height;if(Ih.lineCap="round",Ih.strokeStyle="black",Ih.lineWidth=30,Ih.beginPath(),Ih.moveTo(-180+a,r-20),Ih.lineTo(180+a,r-20),Ih.stroke(),Ih.strokeStyle=th,Ih.lineWidth=20,Ih.beginPath(),Ih.moveTo(-180+a,r-20),Ih.lineTo(360*Math.min(Math.max(e.score/e.xpToNextLevel,0),1)-180+a,r-20),Ih.stroke(),Zm(a,r-19,gx(e.score)+" / "+gx(e.xpToNextLevel),22,5),Ur.showHealthBarOnHUD){var o=Math.min(Math.max(e.hp/e.maxHP,0),1),i=150;Ih.lineCap="round",Ih.strokeStyle="black",Ih.lineWidth=25,Ih.beginPath(),Ih.moveTo(-i+a,r-50),Ih.lineTo(i+a,r-50),Ih.stroke(),Ih.strokeStyle=th,Ih.lineWidth=15,Ih.beginPath(),Ih.moveTo(-i+a,r-50),Ih.lineTo(300*o-i+a,r-50),Ih.stroke(),Zm(a,r-48.5,`Health: ${fr(100*o,1)}%`,18,5),r-=30}var s=e.totalScore;Cy&&Cy.entries[0]&&(s=Cy.entries[0].score);var l,d,c,u=Math.min(Math.max(e.totalScore/s,0),1)||0,f=Ur.showHealthBarOnHUD?230:270,h=f/2;Ih.lineCap="round",Ih.strokeStyle="black",Ih.lineWidth=25,Ih.beginPath(),Ih.moveTo(-h+a,r-50),Ih.lineTo(h+a,r-50),Ih.stroke(),Ih.strokeStyle=th,Ih.lineWidth-=10,Ih.beginPath(),Ih.moveTo(-h+a,r-50),Ih.lineTo(f*u-h+a,r-50),Ih.stroke(),Zm(a,r-48.5,`Score: ${gx(e.totalScore)}`,18,5),Zm(a,r-77,`Level ${e.level} ${e.className}`,18,10,n),Ur.showNames&&Zm(a,r-113,e.name,50,10,n),oo||(function(){Am=!1;for(var e=0;e<Jy.length;e++)if(Jy[e]<15){Am=!0;break}if(zb){var t=!1,n=nv[nv.length-1];n&&(n.offset>.2||n.showing)&&(t=!0);var a=av[av.length-1];a&&(a.offset>.2||a.showing)&&(t=!0),Um=pr(Um,Qy>0&&Am&&!t?1:0,.05,hh)}else Um=pr(Um,Qy>0&&Am||qi?1:0,.05,hh);var r=400*Um-400;if(zb){var o=xh.width/2,i=0,s=0;if(Um>.2){Pm=pr(Pm,1,1e-5,hh);for(var l=Math.min(4,Nm.length),d=0;d<Nm.length;d++){var c=Nm[d];Bm[d]=pr(Bm[d],1,1e-5,hh),Ky[d]=pr(Ky[d],Jy[d],.1,hh),$m(o+400*(1==l?0:i/(l-1)-.5),0+r+120*s+75,c.name,c.color,Jy[d],Ky[d],100*Bm[d]),4==++i&&(i=0,s++,l=Math.min(4,Nm.length-d-1))}s+=i>0?1:0,i=0,Qy>0&&Am&&Zm(o,0+r-45+120*s+75,`x${Qy}`,30*Pm,10,"#ffffff")}}else{var u=dy(Bs);null!=u&&(xh.style.cursor="pointer"),Um>.2&&(Pm=pr(Pm,1,1e-5,hh),function(e,t){for(var n=0+e+(ro?60:0),a=xh.height,r=0;r<4;r++)Wm(n+20,a-20-32*r,Be.n[4-r-1],4-r,Be.m[4-r-1],1,t);Qy>0&&Am&&Zm(n+295,a-20,`x${Qy}`,30*Pm,10,"#ffffff","left")}(r,u),function(e,t){for(var n=xh.width-e,a=xh.height,r=0;r<4;r++)Wm(n-20,a-20-32*r,Be.j[4-r-1],4-r+4,Be.m[4-r-1],-1,t);Qy>0&&Am&&Zm(n-295,a-20,`${Qy}x`,30*Pm,10,"#ffffff","right")}(r,u))}}(),function(){var e;if(zb||(e=ly(Bs))&&(xh.style.cursor="pointer"),zb)for(var t=0;t<2;t++)for(var n=0==t,a=xh.width/2,r=n?nv:av,o=0;o<r.length;o++){var i=r[o],s=i.showing;if(!n&&s){var l=nv[nv.length-1];l&&(l.offset>.2||l.showing)&&(s=!1)}i.offset=pr(i.offset,s?1:0,.05,hh);var d=0,c=0;if(i.offset>.2){for(var u=Math.min(4,i.length),f=0;f<i.length;f++){var h=i[f];Hm(a+400*(1==u?0:d/(u-1)-.5),475*i.offset-400+0+120*c,Be.polygonColors[f],th,h,n,1,!1,100),4==++d&&(d=0,c++,u=Math.min(4,i.length-f-1))}c+=d>0?1:0,d=0,Gm(a,475*i.offset-400+0-60+120*c+30,100,"#adadad")}else i.showing||(i.removed=!0)}else for(var m=120,p=0;p<2;p++){var g,y=0==p;g=y?0:xh.width;for(var v=xh.height,b=y?nv:av,w=0;w<b.length;w++){var x=b[w];x.offset=pr(x.offset,x.showing?1:0,.05,hh);var k=0,S=0;if(x.offset>.2){for(var M=0;M<x.length;M++){var T,_=x[M];T=y?g+475*x.offset-400+m*k:g-(475*x.offset-400)-m*k;var z=v-200-m*S,C=e.weapon==y&&e.set==w&&e.i==M;_.lerping=pr(_.lerping,C?1:0,1e-5,hh),Hm(T,z,Mm(Be.polygonColors[M],Math.floor(60*_.lerping)),th,_,y,1,!1,100+20*_.lerping),3==++k&&(k=0,S++)}var E;S+=k>0?1:0,k=0,E=y?g+475*x.offset-400+m*k:g-(475*x.offset-400)-m*k;var L=v-200-m*S+30,I=e.weapon==y&&e.set==w&&-1==e.i;x.ignoreButton.lerping=pr(x.ignoreButton.lerping,I?1:0,1e-5,hh);var A=Mm("#adadad",Math.floor(60*x.ignoreButton.lerping));Gm(E,L,100+20*x.ignoreButton.lerping,A)}else x.showing||(x.removed=!0)}}}(),function(e){var t=xh.width;if(Zm(t-120,25,"LEADERBOARD",30,10),Cy)for(var n=Math.max(Cy.length,5),a=200/n,r=t-120,o=35+150/n,i=0;i<Cy.entries.length;i++){var s,l=Cy.entries[i],d=pm((1==l.type?Be.polygonColors[l.color]:null)||wm(e.team,l.team,e.id,l.id),!1,l.radiant);s="object"==typeof l.nameColor?wm(132,132,0,1,l.nameColor[0],l.nameColor[1]):wm(l.nameColor,l.nameColor);var c=o+a*l.index,u=r+300*(1-l.fadeTime),f=150/n,h=200*l.scoreRatio;if(Cy.showPlayers){var m=l.size/n,p=Om/10,g=u-100-150/n,y=.2;l.outerSize>0&&Tg(g,c,m+l.outerSize*m,"#5F676C",l.outerSides,p,!1,y,m),1==!l.type&&$g(g,c,m,p,l.barrels,!1,y),Tg(g,c,m,d,l.sides,p,!1,y),1==!l.type&&(jg(g,c,p,m,d,l.layers,0,l.radiant,!1,!1,y),Wg(g,c,m,p,l.gadgets,d,0,l.radiant,!1,!1,y))}Ih.lineCap="round",Ih.strokeStyle="black",Ih.lineWidth=f,Ih.beginPath(),Ih.moveTo(u-100,c),Ih.lineTo(u+100,c),Ih.stroke(),Ih.lineWidth=f-50/n,Ih.strokeStyle=d,Ih.beginPath(),Ih.moveTo(u-100,c),Ih.lineTo(u-100+h,c),Ih.stroke(),Zm(u,c+1,Cy.showPlayers?Ur.showNames?`${l.name.slice(0,3*n)}${""!=l.name?" - ":""}${l.formattedScore}`:`${l.formattedScore}`:l.name.slice(0,3*n),Math.min(120/n,20),25/n,s)}}(e)),function(){for(var e=xh.width/2,t=0,n=0;n<jy.length;n++){var a=jy[n],r=Em(a.time,a.maxTime);qm(e,20+t,a.message,-1,25,0,!0,r),t+=r*(a.message.height+5.5)}Ih.globalAlpha=1}();var m=0;if((Nf-=hh)>0&&Pf){var p;r=0;var g=Nf>2,y=gr((d=1,(c=20-(l=Nf))<1?d=c/1:c>18&&(d=1-(c-18)/2),Math.max(Math.min(d,1),0)),2,!0),v=g?y:2-y,b=gr(Math.min(1,1.15*y),2,!0);m=b,null==jf&&(jf=Vm(Pf,60,10).width),Ih.globalAlpha=b;var w=hf(Jm);try{for(w.s();!(p=w.n()).done;){var x=p.value;Zm(a+(jf/2-20+70*v)*x,r-50+130*b,"-",60,10)}}catch(l){w.e(l)}finally{w.f()}if(Zm(a,r-50+130*b,Pf,60,10),Rf){var k;null==Ff&&(Ff=Vm(Rf,30,10).width);var S=hf(Jm);try{for(S.s();!(k=S.n()).done;){var M=k.value;Zm(a+(Ff/2-20+70*v)*M,r-30+170*b,"-",30,10)}}catch(e){S.e(e)}finally{S.f()}Zm(a,r-30+170*b,Rf,30,10)}}if((Uf-=hh)>0){r=0;var T=function(e,t){var n=1,a=t-e;return a<2?n=a/2:a>t-.5&&(n=1-(a-(t-.5))/.5),Math.max(Math.min(n,1),0)}(Uf,Wf);Ih.globalAlpha=T,Zm(a,r+100+(Rf?100:40)*m,Hf,35,10);var _=0,z=0;if(Uf<20){var C=gr((20-Uf)/20,1.3,!0);_=(2*Math.random()-1)*C,z=(2*Math.random()-1)*C}var E=1,L=0;Uf<15&&(E=1+.7*(L=(Uf-Math.floor(Uf))*gr((15-Uf)/15,2,!0)));var I=Sm("ff0000","ffffff",L);Zm(a+6*_,r+6*z+160+(Rf?100:40)*m,Math.floor(Uf),60*E,10,I)}zb&&!oo&&function(){var e,t=xh.height,n=hf(Rs);try{for(n.s();!(e=n.n()).done;){var a=e.value;jp(a,(a.align*Rr==1?0:xh.width)+a.align*Rr*+Ur.joystickOffset,t-+Ur.joystickOffset,Ur.joystickSize)}}catch(e){n.e(e)}finally{n.f()}}(),function(){if(zp=pr(zp,Ep,1e-6,hh),Cp=zp>.005){var e=250,t=xh.width/2,n=xh.height/2,a=cy(Bs);null!=a&&(xh.style.cursor="pointer"),Ih.globalAlpha=1,Zm(t,mr(-100,n-e-110,zp),"Quick Chat",50,10);for(var r=_p.length,o=2*Math.PI/r,i=zp,s=0;s<r;s++){var l=_p[s],d=s*o+Math.PI/2;l.lerping=pr(l.lerping,a&&s==a.value&&0==a.type&&!zb?1:0,1e-5,hh),l.buttonLerping=pr(l.buttonLerping,a&&s==a.value&&1==a.type&&!zb?1:0,1e-5,hh);var c=(1+.1*l.lerping)*zp,u=e*c,f=d+o/2,h=gr(1-Math.min(1,1.5*zp),2)*e*.1,m=t+Math.cos(f)*h,p=n+Math.sin(f)*h,g=!l.add&&!zb&&s<9?s+1:null;if(Ih.fillStyle=l.lerping<.05&&!l.add?"#000000":zm("#000000","#ffffff",.25*l.lerping+(l.add?.15:0)),Ih.strokeStyle="#000000",Ih.lineJoin="round",Ih.lineWidth=5,Ih.globalAlpha=.5*i,Ih.beginPath(),g&&Ih.arc(m,p,.35*u,d,d+o,!1),Ih.moveTo(m,p),Ih.arc(m,p,u,d,d+o,!1),Ih.lineTo(m,p),Ih.fill(),Ih.globalAlpha=1*i,Ih.stroke(),l.add){var y=Math.min(o*u/2,u/3.5),v=u-y;Jg(m+Math.cos(d+o/2)*v,p+Math.sin(d+o/2)*v,y,.25*y,0),Ih.fillStyle="#000000",Ih.strokeStyle="#000000",Ih.lineWidth=5,Ih.globalAlpha=.5*i,Ih.fill(),Ih.globalAlpha=1*i,Ih.stroke()}else{if(!l.rect){for(var b=Er(m,p,e,d,d+o,e/(8+2*r),e*(g?.35:0)),w=Vm("...",25).width,x=.9*b.width,k="",S=void 0,M=0;M<l.message.length;M++){var T=l.message[M];if((S=Vm(k+T,25).width)/(25/7.5)>x-w){k=k.trim()+"...";break}k+=T}l.textSize=25/Math.max(S/x,1),l.rotation=Math.atan2(b.y-p,b.x-m),l.distance=Math.sqrt(Math.pow(b.x-m,2)+Math.pow(b.y-p,2))/e,l.rect=b,l.text=k}Ih.globalAlpha=1*i,Zm(m+Math.cos(l.rotation)*l.distance*u,p+Math.sin(l.rotation)*l.distance*u,l.text,l.textSize*c)}if(g){var _=Math.min(o*u/1.5,u/2.5),z=.35*u-Math.min(_,u/5)*mr(.3,.7,ir(2.2*o-1,0,1));Zm(m+Math.cos(d+o/2)*z,p+Math.sin(d+o/2)*z+.01*_,g,.3*_)}if(!l.add){var C=Math.min(u*o*.45,.08*u),E=1+.4*l.buttonLerping,L=mr(u,u/c*zp,.5)+2*C,I=m+Math.cos(d+o/2)*L,A=p+Math.sin(d+o/2)*L;Ih.beginPath(),Ih.arc(I,A,C*E,0,2*Math.PI,!1),Ih.strokeStyle="#000000",Ih.fillStyle=l.buttonLerping<.05?"#000000":zm("#000000","#ffffff",.25*l.buttonLerping),Ih.lineJoin="round",Ih.lineWidth=5,Ih.globalAlpha=.5*i,Ih.fill(),Ih.globalAlpha=1*i,Ih.stroke();for(var O=C*E/3/2,B=0;B<3;B++){var D=I+(B/2-.5)*C*E,P=A;Ih.beginPath(),Ih.arc(D,P,O,0,2*Math.PI,!1),Ih.fillStyle="#ffffff",Ih.lineJoin="round",Ih.lineWidth=5,Ih.globalAlpha=.5*i,Ih.fill()}}}}}()}(P,F),ro&&oo&&P.oldGadgets&&(P.gadgets=P.oldGadgets,delete P.oldGadgets),Ih=Sh;var ee=Math.round(10*(performance.now()-s))/10;Number.isNaN(ee)||(ee=Ey(Qf,ee),Qf=Kf,Kf=Math.round(10*ee)/10),Zh(hh);var te=Zf<100?Zf.toFixed(1):Zf.toFixed(0);yf.textContent=`Ping: ${te}ms`,vf.textContent=`Server Tick Time: ${Vf}ms`,bf.textContent=`Client Tick Time: ${Kf}ms`,wf.textContent=`FPS: ${qh}`,xf.textContent=`Player Count: ${Cy?Cy.showPlayers?Cy.playerCount:"???":0}`,kf.textContent=`Global Player Count: ${Cy&&Cy.showPlayers?Math.max(Sy.players+1,Cy.playerCount):Sy.players+1}`,Sf.textContent=`Extra Performance Info: T:${R.length+1} S:${N.length} B:${j.length} P:${ah.length}/${Nr}`,Mf.textContent=`Position: ${ur(P.x,2)}, ${ur(-P.y,2)}`,yf.style.color=Zf>250?Zf>500?"red":"yellow":"white",vf.style.color=Vf>8?Vf>1e3/30?"red":"yellow":"white",bf.style.color=Kf>5?Kf>16.66?"red":"yellow":"white",wf.style.color=qh<50?qh<15?"red":"yellow":"white",eh=!1}(Ih=Eh).clearRect(0,0,wh.width,wh.height),function(){if(Qp.length>0?eg=.5:eg-=hh,(Jp=Math.min(1,Math.max(0,Jp+(eg>0?1:-1)*hh)))!=Kp&&(Kp=Jp,0==Jp?wu.classList.remove("hide"):wu.classList.add("hide")),0!=Kp){Vp=pr(Vp,1,1e-5,hh),ng=tg,(tg=pr(tg,0,.1,hh))!=ng&&(ag=tg<0?Sm(Be.polygonColors[1].substring(1),"ffffff",Math.abs(tg)):Sm("#FFE449".substring(1),"ffffff",tg)),Xp!=qp&&(qp=Xp,Zp=kr(Xp));var e=2*em,t=wh.width,n=1.5*e;switch(Mw){case 2:n+=9*e;break;case 0:e=20/Kh*Qh,n=320/Kh*Qh}var a=function(e,t=!1){var n=1.70158;t&&(e=1-e);var a=(n+1)*e*e*e-n*e*e;return t?1-a:a}(1-Jp)*e*9;ey(t-7*e+a,n,e,e/2,5,"#FFE449","#000000",.1*e,0),Ih.setTransform(1,0,0,1,0,0),Zm(t-5.9*e+a,n+.2*e,Zp,1.5*e*Vp,.2*e,ag,"left");for(var r=0,o=Qp.length-1;o>=0;o--){eg=2;var i=Qp[o];if(i.size=pr(i.size,1,1e-5,hh),0==i.valueToUse)i.time-=.5*hh;else if(Qp.length==o+1&&1==Jp&&(i.timeUntilUse-=hh,i.timeUntilUse<=0)){i.timeUntilUse+=.15;var s=1==Math.sign(i.step)?Math.min(i.valueToUse,i.step):Math.max(i.valueToUse,i.step);i.valueToUse-=s,Vp=1.1,tg=Math.sign(i.step),i.size=.9,Xp+=s}i.valueToUse!=i.lastValue&&(i.lastValue=i.valueToUse,i.text=(-1!=Math.sign(i.value)?"+":"-")+kr(Math.abs(i.valueToUse)));var l=Qp[o].time,d=gr(1-4*l,3,!1);l<0&&(Qp.length=o),Zm(t-(5.9-10*d)*e+a,n+(1.8+1.5*r)*e,i.text,1.25*e*i.size,.2*e,1==Math.sign(i.value)?"#ffffff":Be.polygonColors[1],"left"),r+=1-d}}}(),function(){for(var e=em/6,t=wh.width/2,n=0+95*e,a=0;a<rg.length;a++){var r=rg[a];if(0!=a)break;r.time-=.2*hh;var o=r.time;if(o<0){rg.splice(a,1);break}var i=gr(1-Im(o,.1),3,!1);if(2==Mw){var s=320*e,l=120*e,d=400*e;Ih.globalAlpha=.75,qg(t,n-170*i*e-d/2,s,l+d,5*e,"#000000"),Ih.globalAlpha=1}ig(t,n-170*i*e,r.object,e),Zm(t,n-70*e-300*i*e,"New Achievement!"+(1==rg.length?"":` (+${rg.length-1})`),30*e*(2==Mw&&1!=rg.length?.8:1),5*e)}}(),Ih=Sh}catch(n){}finally{if(Lf){if(0==Of.length)ei();else{var ne=Of[Of.length-1],ae=Jo.some((function(e){return e.type==ne.type&&e.index==ne.index}));!Ir(Of,Bf)||0==Jo.length||ae&&If?Df=0:Df++;var re=Of[Of.length-1-Df];re?Qo(re.type,re.index,If,re.stack):ei()}Lf=!1}Af=!1,setTimeout(Xh,1)}}function Xh(){requestAnimationFrame((function(){Gh()}))}var qh=60,Zh=(0,Oe.throttle)(500,(function(e){qh=Math.round(1/e)}));function Vh(){yf.classList.toggle("hidden",!Ur.showPing),vf.classList.toggle("hidden",!Ur.showTickTime),bf.classList.toggle("hidden",!Ur.showTickTime),wf.classList.toggle("hidden",!Ur.showFPS),xf.classList.toggle("hidden",!Ur.showPlayerCount),kf.classList.toggle("hidden",!Ur.showGlobalPlayerCount),Sf.classList.toggle("hidden",!Ur.showExtraPerformanceInfo),Mf.classList.toggle("hidden",!Ur.showPosition),Tf.classList.toggle("hidden",!Ur.showServerName)}function Jh(e,t,n,a,r,o,i=0){if(mh=r,Om+=1.2*hh,arguments.length>5&&void 0!==arguments[5]&&!arguments[5]||(ah.forEach((function(e){nm(e)&&e.below&&kg(e)})),function(){for(var e=dh.gates,t=performance.now(),n=0;n<e.length;n++){var a=e[n],r={x:a.x*Uh,y:a.y*Uh,size:a.size/2*Uh};if(nm(r,3)){var o=Be.e[a.type];if(!o)continue;var i=o[a.open?"open":"closed"]||o.open,s=i.auras,l=i.particles,d=i.spikes||[],c=i.arrows||[],u=i.color,f=i.screenShake,h=i.radiant,m=u;h&&(hm||gm(),m=Sm(_m(mm).substring(1),u.substring(1),h));for(var p=0;p<s.length;p++){var g,y,v,b=s[p],w=t/2500*b[1],x=w+.5,k=b[0],S=b[2],M=0==k?2:1,T=null!==(g=b[3])&&void 0!==g?g:m,_=null!==(y=b[4])&&void 0!==y?y:.2,z=null!==(v=b[5])&&void 0!==v?v:1,C=w-Math.floor(w),E=x-Math.floor(x);1!=z&&(C=Math.pow(C,z),E=Math.pow(E,z));var L=(.5+C*S)*M,I=(.5+E*S)*M;Ih.globalAlpha=Math.min(2*(1-C),1)*_;var A=30*L;Sg(r.x-Math.sin(-a.rot-Gg)*A*k,r.y-Math.cos(-a.rot-Gg)*A*k,A,r.size,a.rot,T,!0),Ih.globalAlpha=.2*Math.min(2*(1-E),1);var O=30*I;Sg(r.x-Math.sin(-a.rot-Gg)*O*k,r.y-Math.cos(-a.rot-Gg)*O*k,O,r.size,a.rot,T,!0),Ih.globalAlpha=1}for(var B=0;B<d.length;B++)for(var D=d[B],P=D[0],R=2*(r.size-P),N=Math.min(Math.floor(2*r.size/(1.5*P)),1e3),j=0;j<N;j++){var F=a.rot+t/2500*(j%2?-1:1)*D[4],U=((N-1?j/(N-1):0)-.5)*R;Tg(r.x-Math.sin(a.rot)*U+Math.cos(a.rot)*P/2,r.y+Math.cos(a.rot)*U+Math.sin(a.rot)*P/2,P,D[3],D[1],F,!0,1,D[2]*P)}for(var W=0;W<l.length;W++)for(var H=l[W],Y=Math.min(H[5]*r.size*60*Math.min(hh,.1)*jr,100),$=Math.random();$<Y;$+=Math.random()){var G=6*Py(H[1],H[2])*(0==H[0]?cr():1),X=H[6],q=Py(.5,.8)*(100/1.5)*H[3],Z=(2*Math.random()-1)*(r.size-q),V=r.x+Math.cos(a.rot+Gg)*Z,J=r.y+Math.sin(a.rot+Gg)*Z,K=a.rot+(2*Math.random()-1)*H[8];if(1==H[0]){var Q=G*X;V+=Math.sin(-K-Gg)*Q,J+=Math.cos(-K-Gg)*Q}Bg(V,J,G*Math.sin(-K+Gg),G*Math.cos(-K+Gg),q,Math.random()*Math.PI*2,0,H[4],X,1,H[7],1,!0)}for(var ee=0;ee<c.length;ee++)for(var te=c[ee],ne=te[0],ae=te[1],re=te[2],oe=t/2500*te[5],ie=te[6],se=Math.min(Math.floor(2*r.size/(1.5*(ne+ae))),1e3),le=2*(r.size-ne-ae),de=0;de<re;de++){var ce=2*(vr(de/(re-1)+oe,1)-.5);1!=ie&&(ce=gr(ce,ie)),Ih.globalAlpha=1-Math.abs(ce),ce*=30*te[3];for(var ue=0;ue<se;ue++){var fe=(se-1?ue/(se-1):0)-.5,he=r.x-Math.sin(-a.rot-Gg)*ce,me=r.y-Math.cos(-a.rot-Gg)*ce;Mg(he+=Math.sin(-a.rot)*fe*le,me+=Math.cos(-a.rot)*fe*le,ne/2,ne,te[4],a.rot,!0)}}if(Ih.globalAlpha=1,Sg(r.x,r.y,30,r.size,a.rot,m,!0),f){var pe=[r.x+Math.cos(a.rot+Gg)*r.size,r.y+Math.sin(a.rot+Gg)*r.size],ge=[r.x+Math.cos(a.rot+Gg)*-r.size,r.y+Math.sin(a.rot+Gg)*-r.size],ye=Oy([Rh,Nh],pe,ge);Og(ye[0],ye[1],3)}}}}(),a.forEach((function(e){nm(e,12)&&xg(r,e)})),t.forEach((function(e){wg(r,e)})),e.forEach((function(e){wg(r,e,Be.polygonColors[e.color]||(r?wm(r.team,e.team,r.id,e.id):wm(e.team,e.team,0,0)))})),n.forEach((function(e){wg(r,e)})),r&&wg(r,r),e.forEach((function(e){bg(e,Be.polygonColors[e.color]||(r?wm(r.team,e.team,r.id,e.id):wm(e.team,e.team,0,0)),e.sides,!1)})),r&&Xm(r,r),t.forEach((function(e){Xm(r,e)})),n.forEach((function(e){!function(e,t){var n,a=t.x,r=t.y,o=t.d,i=t.size,s=t.fadeTime||1;Ih.globalAlpha=1;var l=!1;if(t.fadeType){var d=t.fadeType[1];switch(t.fadeType[0]){case 0:i*=1+.5*(1-s),s<1&&(l=!0,yy(s));break;case 1:i*=s;break;case 2:var c=Math.pow(1-s,2);i*=1+2*(1-s),o+=c*d[0]*4,a+=c*Math.cos(d[1])*2e3,r+=c*Math.sin(d[1])*2e3,s<1&&(l=!0,yy(s));break;case 3:var u=Math.pow(1-s,2);i*=1-u,o+=u*d[0]*4,a=mr(a,d[1],u),r=mr(r,d[2],u);break;case 4:var f=.35*(1-Math.pow(s,1.5));i*=1+.5*(1-s),s<1&&(l=!0,yy(s)),a+=d[0]*f,r+=d[1]*f}}n=e?null!=t.color?wm(e.team,t.color,e.id,t.parentID):wm(e.team,t.team,e.id,t.parentID):wm(0,t.team,0,t.parentID);var h=Math.round(80*(1-t.damageTime||0)),m=Mm(pm(n,!1,t.radiant),h);t.lastColor=m,t.outerSize>0&&Tg(a,r,i+t.outerSize*i,"#5F676C",t.outerSides,o,!0,1,i),t.barrels&&t.barrels.length>0&&$g(a,r,i,o,t.barrels,!0),Tg(a,r,i,m,t.sides,o,!0),t.layers&&jg(a,r,o,i,m,t.layers,h,t.radiant,!1),t.gadgets&&t.gadgets.length>0&&Wg(a,r,i,o,t.gadgets,m,h,t.radiant,!1,!0),l&&vy(),Is&&Ur.showHitboxes&&s>=1&&hg(xh.width/2+(a-Rh)/Dh,xh.height/2+(r-Nh)/Dh,t.size/Dh,"#ffffff")}(r,e)})),n.forEach((function(e){Fg(e)})),r&&Fg(r),t.forEach((function(e){Fg(e)})),ah.forEach((function(e){nm(e)&&!e.below&&kg(e)}))),Ih=Th,dh.visual.darkness){var s,l=xh.width/2-Rh/Dh,d=xh.height/2-Nh/Dh;Ih.globalAlpha=dh.visual.darkness.alpha||.9,Ih.fillStyle=dh.visual.darkness.color,Ih.clearRect(0,0,gh.width,gh.height),Ih.fillRect(0,0,gh.width,gh.height),Ih.globalAlpha=1;var c=dh.visual.darkness.intensity*(1+.1*Math.sin(performance.now()/1e3));if(r){oy(l+r.x/Dh,d+r.y/Dh,(r.size+150)/c/Dh,1),oy(l+r.x/Dh,d+r.y/Dh,1.5*(r.size+150)/c/Dh,.5),ty(l,d,c,r),r.radiant>0&&ny(l,d,c,r);for(var u=0;u<r.barrels.length;u++){var f=r.barrels[u],h=f.distance+2*f.length,m=r.d+f.rot,p=r.x+(h*Math.sin(m)+f.offset*Math.sin(m+Gg))*r.size,g=r.y-(f.offset*Math.cos(m+Gg)+h*Math.cos(m))*r.size;oy(l+p/Dh,d+g/Dh,8*r.size*f.width/c/Dh,.5),ay(l+p/Dh,d+g/Dh,m,8*r.size*f.length/c/Dh,8*r.size*f.width/c/Dh,2*r.size*f.width/c/Dh,1)}}t.forEach((function(e){e.gadgets&&ty(l,d,c,e),e.radiant>0&&ny(l,d,c,e)})),e.forEach((function(e){e.radiant>0&&ny(l,d,c,e)})),ah.forEach((function(e){nm(e)&&e.radiant>0&&function(e,t,n,a){ry(e+a.x/Dh,t+a.y/Dh,a.d,Math.max(a.size,1.2*a.size/n)/Dh,a.sides,a.transparency*Lm(a.lifetime,a.maxLifetime)*(1-1/(a.radiant+.5)))}(l,d,c,e)})),n.forEach((function(e){e.gadgets&&ty(l,d,c,e),e.radiant>0&&ny(l,d,c,e)})),a.forEach((function(e){if(nm(e,12))switch(e.type){case 0:var t=.5+(i=performance.now()/500),n=10-9*(r=i-Math.floor(i)),a=10-9*(o=t-Math.floor(t));oy(l+e.x/Dh,d+e.y/Dh,e.size*n/Dh,.3*Math.min(2*r,1)),oy(l+e.x/Dh,d+e.y/Dh,e.size*a/Dh,.3*Math.min(2*o,1));break;case 1:switch(e.subtype){case 0:t=.5+(i=performance.now()/2500),n=1+3*(r=i-Math.floor(i)),a=1+3*(o=t-Math.floor(t)),oy(l+e.x/Dh,d+e.y/Dh,e.size*n/Dh,.2*Math.min(2*(1-r),1)),oy(l+e.x/Dh,d+e.y/Dh,e.size*a/Dh,.2*Math.min(2*(1-o),1));break;case 1:var r,o;t=.5+(i=performance.now()/-1250),n=1+5*(r=i-Math.floor(i)),a=1+5*(o=t-Math.floor(t)),oy(l+e.x/Dh,d+e.y/Dh,e.size*n/Dh,.2*Math.min(2*(1-r),1)),oy(l+e.x/Dh,d+e.y/Dh,e.size*a/Dh,.2*Math.min(2*(1-o),1))}break;case 2:var i,s=(i=performance.now())*e.sign/1e3;ry(l+e.x/Dh,d+e.y/Dh,s,2*e.size/c/Dh,4,1),Ih.globalAlpha=.5,ry(l+e.x/Dh,d+e.y/Dh,s,3*e.size/c/Dh,4,.5)}}));var y=hf(dh.gates);try{for(y.s();!(s=y.n()).done;){var v=s.value,b={x:v.x*Uh,y:v.y*Uh,size:v.size/2*Uh},w=Be.e[v.type];if(w){var x=w[v.open?"open":"closed"]||w.open;if(nm(b,3)){var k=performance.now(),S=x.auras,M=x.radiant;if(!M)continue;for(var T=0;T<S.length;T++){var _=S[T];if(!_[3]){var z=k/2500*_[1],C=z+.5,E=_[0],L=_[2],I=0==E?2:1,A=z-Math.floor(z),O=C-Math.floor(C),B=(.5+O*L)*I,D=(.5+A*L)*I*30;iy(l+(b.x-Math.sin(-v.rot-Gg)*D*E)/Dh,d+(b.y-Math.cos(-v.rot-Gg)*D*E)/Dh,D/Dh,b.size/Dh,v.rot,.2*Math.min(2*(1-A),1));var P=30*B;iy(l+(b.x-Math.sin(-v.rot-Gg)*P*E)/Dh,d+(b.y-Math.cos(-v.rot-Gg)*P*E)/Dh,P/Dh,b.size/Dh,v.rot,.2*Math.min(2*(1-O),1))}}iy(l+b.x/Dh,d+b.y/Dh,30/Dh,b.size/Dh,v.rot,M),Ih.globalAlpha=1}}}}catch(e){y.e(e)}finally{y.f()}dh.visual.lights&&dh.visual.lights.forEach((function(e){ry(l+e.x/Dh,d+e.y/Dh,e.d,e.size/c/Dh,e.sides,e.transparency),ry(l+e.x/Dh,d+e.y/Dh,e.d,1.5*e.size/c/Dh,e.sides,.2*e.transparency)}))}dh.visual.darkness||Ih.clearRect(0,0,gh.width,gh.height);var R=dh.visual.fog;R&&(Ih.globalCompositeOperation="destination-over",Ih.globalAlpha=R.intensity+R.amplitude*Math.cos(performance.now()/100*R.frequency),Ih.fillStyle=R.color,Ih.fillRect(0,0,gh.width,gh.height),Ih.globalCompositeOperation="source-over"),i&&(Ih.fillStyle=Sm("000000",_m(mm).substring(1),.9),Ih.globalAlpha=i,Ih.fillRect(0,0,gh.width,gh.height)),Ih=zh,!Ur.showNamesAndChatInScreenshotMode&&Yf||(e.forEach((function(e){zg(e,Be.polygonColors[e.color]||(r?wm(r.team,e.team,r.id,e.id):wm(e.team,e.team,0,0)),e.showName,0)})),r&&_g(r,r,0),t.forEach((function(e){_g(r,e,0)})),r&&_g(r,r,1),e.forEach((function(e){zg(e,Be.polygonColors[e.color]||(r?wm(r.team,e.team,r.id,e.id):wm(e.team,e.team,0,0)),e.showName,1)})),t.forEach((function(e){_g(r,e,1)}))),Ih=Ch}var Kh=1,Qh=1,em=1;function tm(){Kh=Math.max(1,800/Math.min(window.innerWidth,window.innerHeight)),Qh=Math.max(window.devicePixelRatio||1,1),xh.width=Kh*window.innerWidth,xh.height=Kh*window.innerHeight,ph.width=window.innerWidth*Qh,ph.height=window.innerHeight*Qh,vh.width=xh.width,vh.height=xh.height,bh.width=xh.width,bh.height=xh.height,gh.width=xh.width,gh.height=xh.height,em=Math.min(window.innerHeight,window.innerWidth)/100*Qh,wh.width=window.innerWidth*Qh,wh.height=window.innerHeight*Qh,kh.width=40*em,kh.height=13*em,fx(Kh)}function nm(e,t=1){var n=Math.max(Math.abs(Rh-e.x),Math.abs(Nh-e.y));return Ph/2>n-e.size*t}function am(e){setTimeout((function(){var t,n=Math.min(.2*e.size,100)*jr,a=0;switch(e.type){case 0:switch(e.gateType){case 1:t=40,a=.7;break;case 3:t=60}break;case 1:switch(e.gateType){case 1:t=70,a=10;break;case 3:t=100}break;case 2:switch(n*=e.power/1e4,e.gateType){case 1:t=100,a=10,n*=.125;break;case 3:t=100,n*=.125}}for(var r=Math.random();r<n;r+=Math.random()){var o=Py(.12,.24)*t*(e.direction||cr()),i=Py(.3,.6)*(100/1.5),s=(2*Math.random()-1)*(e.size-i),l=e.x+Math.cos(e.rot+Gg)*s,d=e.y+Math.sin(e.rot+Gg)*s,c=e.rot+.3*(2*Math.random()-1);Bg(l,d,o*Math.cos(c),o*Math.sin(c),i,Math.random()*Math.PI*2,0,"#000000",50,1,a,.95)}}),Ur.renderDelay)}function rm(e){setTimeout((function(){var t=e.size/4*jr;Og(e.x,e.y,.05*e.size,.1*Math.sqrt(e.size));for(var n=wm(mh?.team,e.team,mh?.id,e.id),a=Math.random();a<t;a+=Math.random()){var r=Math.random()*Math.PI*2,o=Py(.08*e.size,.15*e.size),i=Py(45,75);Bg(e.x,e.y,o*Math.sin(r),o*Math.cos(r),Py(.15,.22)*e.size,Math.random()*Math.PI*2,4,n,i,1,e.radiant,.95)}}),1.2*Ur.renderDelay)}function om(e){setTimeout((function(){Og(e.x,e.y,.03*e.size,.1*Math.sqrt(e.size));for(var t=e.size/4*jr,n=Math.random();n<t;n+=Math.random()){var a=Math.random()*Math.PI*2,r=Py(.15*e.size,.3*e.size),o=Py(45,75);Bg(e.x,e.y,r*Math.sin(a),r*Math.cos(a),Py(8,12),Math.random()*Math.PI*2,0,zm(dh.visual.backgroundColor,dh.visual.gridColor,Math.random()),o,1,0,Py(.93,.96))}}),1.2*Ur.renderDelay)}function im(e){setTimeout((function(){e.size=Math.min(e.size,1e3);var t=e.size/2*jr;Og(e.x,e.y,.1*e.size,.2*Math.sqrt(e.size));for(var n=Math.random();n<t;n+=Math.random()){var a=Math.random()*Math.PI*2,r=Py(.08*e.size,.15*e.size),o=Py(45,75);Bg(e.x,e.y,r*Math.sin(a),r*Math.cos(a),Py(.5,.8)*e.size,Math.random()*Math.PI*2,0,"#000000",o,1,0,1)}}),Ur.renderDelay)}function sm(e,t=!1,n=!1,a=1){setTimeout((function(){e.size=Math.min(e.size,1e3);var r=e.size/2*jr*(t?.5:1)*(n?1.5:1)*a;Og(e.x,e.y,.1*e.size*(t?1.5:1),.1*Math.sqrt(e.size));var o="#ffffff";t&&(o=Be.polygonColors[0]);for(var i=Math.random();i<r;i+=Math.random())if(t){var s=Math.random()*Math.PI*2,l=Py(.1*e.size,.2*e.size)/2*a,d=Py(.5,.8)*e.size/2,c=Py(30,60),u=.95;n&&(d*=1.5,l*=1.5),Math.random()<.2&&(d/=3,l*=2,c*=1.5,u=.97),Bg(e.x,e.y,l*Math.sin(s),l*Math.cos(s),d,Math.random()*Math.PI*2,0,o,c,1,1,u)}else{var f=Math.random()*Math.PI*2,h=Py(.1*e.size,.2*e.size),m=Py(30,60);Bg(e.x,e.y,h*Math.sin(f),h*Math.cos(f),Py(.5,.8)*e.size,Math.random()*Math.PI*2,0,o,m,1,0,.95)}}),Ur.renderDelay)}function lm(e){setTimeout((function(){var t=e.size*jr;Og(e.x,e.y,.2*e.size,.1*Math.sqrt(e.size));for(var n=wm(mh?mh.team:0,e.team,mh?mh.id:0,e.id),a=Math.random();a<t;a+=Math.random()){var r=Math.random()*Math.PI*2,o=Py(.1*e.size,.2*e.size),i=Py(30,60);Bg(e.x,e.y,o*Math.sin(r),o*Math.cos(r),Py(3,12),Math.random()*Math.PI*2,0,n,i,1,e.radiant,.95)}}),1.2*Ur.renderDelay)}function dm(e){setTimeout((function(){var t=Math.pow(e.size,.5),n=t*jr*2;Og(e.x,e.y,.5*t,.3);for(var a=wm(mh?mh.team:0,e.team,mh?mh.id:0,e.id),r=Math.random();r<n;r+=Math.random()){var o=Math.random()*Math.PI*2,i=Py(1.6*t/5,3*t/5),s=Py(15,30);Bg(e.x+e.size*Py(.25,.75)*Math.sin(o),e.y+e.size*Py(.25,.75)*Math.cos(o),i*Math.sin(o),i*Math.cos(o),Py(.4,.8)*e.size,Math.random()*Math.PI*2,0,a,s,1,e.radiant,1)}}),Ur.renderDelay)}window.addEventListener("resize",(0,Oe.debounce)(40,(function(){tm()})));var cm=!1,um=0;function fm(){window.onbeforeunload=function(){},qf=!0,Dg(),Ag(),$f(!1),zf.classList.add("hidden"),co.classList.add("hidden")}var hm=!1,mm="#ff0000";function pm(e,t,n){var a=e;return n>0?(hm||gm(),a=Sm(a.substring(1),_m(mm).substring(1),.5/n)):n<0&&(a=Sm("#c0c0c0".substring(1),a.substring(1),Math.min(1,-n))),t&&(a=Mm(a,Math.round(30*Math.abs(Math.sin(fh/50))))),a}function gm(){mm=[128*(1+Math.sin(fh/500)),128*(1+Math.sin(fh/500+Math.PI*(1/3))),128*(1+Math.sin(fh/500+Math.PI*(2/3)))]}function ym(e,t,n){if(null!=t)return wm(t,t);switch(e){case 0:return Be.polygonColors[1];case 1:return Be.polygonColors[4];case 3:return Be.polygonColors[0];case 4:return Be.polygonColors[5];default:return n}}var vm=sr(Be.b);function bm(e){return vm[e]||"#ffffff"}function wm(e,t,n,a,r,o){var i;switch(t){default:if("string"==typeof t)return t;i=t<=0&&n==a?Be.teamColors[0]:Be.teamColors[1];break;case-1:i="#c0c0c0";break;case 1:i=Be.polygonColors[1];break;case 2:i="#f177dd";break;case 3:i="#999999";break;case 4:i=Be.polygonColors[0];break;case 5:i="#000000";break;case 6:i="#ffffff";break;case 7:i="#5F676C";break;case 10:i=Be.teamColors[0];break;case 11:i=Be.teamColors[1];break;case 12:i=Be.teamColors[2];break;case 13:i=Be.teamColors[3];break;case 20:i=Be.polygonColors[0];break;case 21:i=Be.polygonColors[1];break;case 22:i=Be.polygonColors[2];break;case 23:i=Be.polygonColors[3];break;case 24:i=Be.polygonColors[4];break;case 25:i=Be.polygonColors[5];break;case 26:i=Be.polygonColors[6];break;case 27:i=Be.polygonColors[7];break;case 28:i=Be.polygonColors[8];break;case 29:i=Be.polygonColors[9];break;case 30:i=Be.polygonColors[10];break;case 127:i=window.getRadiant();break;case 128:i=window.getAdminColor();break;case 129:i=window.getModColor();break;case 130:i=window.getYouTubeColor();break;case 131:i=window.getWatermelonColor();break;case 132:let[e,s]=[r.slice(),o.slice()];if(r&&o&&/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.test(r)&&/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.test(o)){"#"!==r[0]&&(e="#"+r),"#"!==o[0]&&(s="#"+o),i=zm(e,s,(Math.sin(performance.now()/250)+1)/2);break}}return i}Object.keys(vm).forEach((function(e){vm[e]=Sm(vm[e].substring(1),"ffffff",.65)}));var xm={};function km(e){return xm[e]||=Mm(e,-30),xm[e]}function Sm(e,t,n=.25){function a(e){return parseInt(e,16)}for(var r="#",o=0;o<=5;o+=2){for(var i=a(e.substring(o,o+2)),s=a(t.substring(o,o+2)),l=Math.floor(s+(i-s)*n).toString(16);l.length<2;)l="0"+l;r+=l}return r}function Mm(e,t){return"#"+e.replace(/^#/,"").replace(/../g,(function(e){return("0"+Math.min(255,Math.max(0,parseInt(e,16)+t)).toString(16)).substr(-2)}))}function Tm(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}function _m(e){return"#"+(16777216+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1)}function zm(e,t,n=.5){return _m(Cm(Tm(e),Tm(t),n))}function Cm(e,t,n=.5){for(var a=e.slice(),r=0;r<3;r++)a[r]+=n*(t[r]-e[r]),a[r]=Math.round(a[r]);return a}function Em(e,t){var n=1,a=t-e;return a<.5?n=a/.5:a>t-.5&&(n=1-(a-(t-.5))/.5),yr(Math.max(Math.min(n,1),0))}function Lm(e,t,n=20){var a=1,r=(t/=60)-e;return r>t-(n/=60)?a=1-(r-(t-n))/n:r<n&&(a=r/n),a}function Im(e,t=.2){var n=1,a=1-e;return a<t?n=a/t:a>1-t&&(n=(1-a)/t),n}window.hue=function(e,t){let n=parseInt(e.slice(1),16),[a,r,o]=[n>>16&255,n>>8&255,255&n];a/=255,r/=255,o/=255;const i=Math.max(a,r,o),s=Math.min(a,r,o);let l,d,c=(i+s)/2;if(i===s)l=d=0;else{const e=i-s;switch(d=c>.5?e/(2-i-s):e/(i+s),i){case a:l=(r-o)/e+(r<o?6:0);break;case r:l=(o-a)/e+2;break;case o:l=(a-r)/e+4;break}l/=6}if(l=(l+t/360)%1,l<0&&(l+=1),0===d)a=r=o=c;else{const e=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),t=c<.5?c*(1+d):c+d-c*d,n=2*c-t;[a,r,o]=[Math.round(255*e(n,t,l+1/3)),Math.round(255*e(n,t,l)),Math.round(255*e(n,t,l-1/3))]}return`#${((1<<24)+(a<<16)+(r<<8)+o).toString(16).slice(1).toUpperCase()}`},window.getRadiant=function(){function e(e){return Math.round(255*(Math.sin(e)+1)/2)}const t=performance.now()/250,n=Math.min(e(t)+10,255),a=Math.min(e(t+Math.PI/3)+10,255),r=Math.min(e(t+2*Math.PI/3)+10,255);function o(e){let t=e.toString(16);return 1===t.length?"0"+t:t}return"#"+o(n)+o(a)+o(r)},window.getAdminColor=function(){const e=performance.now()/250;return window.hue("#ff0000",function(e){return Math.round(50*(Math.sin(e)+1)/2)}(e))},window.getYouTubeColor=function(){const e=performance.now()/250,t=Math.min(function(e){return Math.round(255*(Math.sin(e)+1)/2)}(e)+10,255);function n(e){let t=e.toString(16);return 1===t.length?"0"+t:t}return"#ff"+n(t)+n(t)},window.getModColor=function(){const e=performance.now()/250;return window.hue("#0352fc",function(e){return Math.round(-25*(Math.sin(e)+1)/2)}(e))},window.getWatermelonColor=function(){const e=performance.now()/250;return window.hue("#00ff99",function(e){return Math.round(-25*(Math.sin(e)+1)/2)}(e))};var Am=!1,Om=0,Bm=[],Dm=[],Pm=1;for(var Rm=0;Rm<8;Rm++)Bm.push(1),Dm.push(1);for(var Nm=[],jm=0;jm<Be.n.length;jm++)Nm.push({name:Be.n[jm].split(" "),color:Be.m[jm]});for(var Fm=0;Fm<Be.j.length;Fm++)Nm.push({name:Be.j[Fm].split(" "),color:Be.m[Fm]});var Um=0;function Wm(e,t,n,a,r,o,i){Ky[a-1]=pr(Ky[a-1],Jy[a-1],.1,hh);var s=250*o,l=Jy[a-1]/15*(s-25*o),d=Ky[a-1]/15*(s-25*o);Bm[a-1]=pr(Bm[a-1],i==a?1.1:1,1e-5,hh);var c=Bm[a-1];Ih.lineCap="round",Ih.strokeStyle="black",Ih.lineWidth=30,Ih.beginPath(),Ih.moveTo(e,t),Ih.lineTo(e+s,t),Ih.stroke(),Ih.lineWidth=20,Ih.globalAlpha=.5,0!=Jy[a-1]&&(Ih.strokeStyle=r,Ih.beginPath(),Ih.moveTo(e,t),Ih.lineTo(e+l,t),Ih.stroke()),Ih.globalAlpha=1,Ky[a-1]>.1&&(Ih.beginPath(),Ih.moveTo(e,t),Ih.lineTo(e+d,t),Ih.stroke());var u=Qy>0&&Jy[a-1]<15?1:0;Dm[a-1]=pr(Dm[a-1],u,1e-5,hh);var f=Sm("ffffff","#5F676C".substring(1),Dm[a-1]);Ih.strokeStyle=f,Ih.lineWidth*=c,Ih.beginPath(),Ih.moveTo(e+s,t),Ih.lineTo(e+s,t),Ih.stroke(),Ih.strokeStyle="black",Ih.lineCap="butt",Ih.lineWidth=4*c,Ih.beginPath(),Ih.moveTo(e+s+7*c,t),Ih.lineTo(e+s-7*c,t),Ih.moveTo(e+s,t+7*c),Ih.lineTo(e+s,t-7*c),Ih.stroke(),Ih.lineCap="round",Ih.globalAlpha=Dm[a-1],Zm(e+s-28*o,t+1.5,`[${a}]`,15,5,f),Ih.globalAlpha=1,Zm(e+(s-25*o)/2-6*o*Dm[a-1],t+2,n,20,5)}function Hm(e,t,n,a,r,o,i=1,s=!1,l=100){var d=!(arguments.length>9)||void 0===arguments[9]||arguments[9],c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"#000000";Ih.lineCap="round",Ih.strokeStyle=c,Ih.lineWidth=5*i,s&&(n="#999999");var u=l/100,f=l/2,h=l/4;qg(e,t,l*i,l*i,5,n),qg(e,t+h*i,l*i,f*i,5,km(n)),Zg(e,t,l*i,l*i,5),Ih.stroke(),d&&Ym(e,t,(r.isCelestial?40:20)*i*u,Om/(s?10:1),s?"#c0c0c0":a,r,o,i*u),Ih.lineCap="round",Zm(e,t+35*i*u,r.name,15*i*u,10/1.5*i*u,s?"#c0c0c0":"#ffffff")}function Ym(e,t,n,a,r,o,i,s,l=0){null!=o.isCelestial&&(l=o.isCelestial?1:0),i?($g(e,t,n,a,o.barrels,!1,s),Tg(e,t,n,r,1==l?3:0,a,!1,s)):(o.outerSize>0&&Tg(e,t,n+o.outerSize*n,"#5F676C",o.outerSides,a,!1,s,n),Tg(e,t,n,r,o.sides,a,!1,s),jg(e,t,a,n,r,o.layers,0,0,!1,!1,s),Wg(e,t,n,a,o.gadgets,r,0,0,!1,!1,s))}function $m(e,t,n,a,r,o,i=100,s=1){Ih.lineCap="round",Ih.strokeStyle="black",Ih.lineWidth=5*s;var l=i/2,d=i/4,c=s*(i/100);qg(e,t,i*s,i*s,5,a),qg(e,t+d*s,i*s,l*s,5,km(a)),Zg(e,t,i*s,i*s,5),Ih.stroke(),Ih.lineCap="round";for(var u=0;u<n.length;u++)Zm(e,t+(20*u-25)*c,n[u],15*c,10/1.5*c,"#ffffff");Zm(e,t+15*c,`${r}/15`,15*c,10/1.5*c,"#ffffff");var f=t+35*c,h=15*c,m=80*c,p=r/15*m,g=o/15*m;Ih.lineCap="round",Ih.strokeStyle="black",Ih.lineWidth=h,Ih.beginPath(),Ih.moveTo(e-m/2,f),Ih.lineTo(e+m/2,f),Ih.stroke(),Ih.lineWidth=h-10,0!=r&&(Ih.globalAlpha=.5,Ih.strokeStyle=a,Ih.beginPath(),Ih.moveTo(e-m/2,f),Ih.lineTo(e+p-m/2,f),Ih.stroke()),Ih.globalAlpha=1,o>.1&&(Ih.strokeStyle=a,Ih.beginPath(),Ih.moveTo(e-m/2,f),Ih.lineTo(e+g-m/2,f),Ih.stroke())}function Gm(e,t,n=100,a="#adadad"){Ih.lineCap="round",Ih.strokeStyle="black",Ih.lineWidth=5;var r=.4*n,o=r/2,i=r/4;qg(e,t,n,r,5,a),qg(e,t+i,n,o,5,km(a)),Zg(e,t,n,r,5),Ih.stroke(),Ih.lineCap="round",Zm(e,t,"IGNORE",o,10)}function Xm(e,t){try{var n=Ih;(Ih=e.getContext("2d")).clearRect(0,0,e.width,e.height),function(e,t){var n=e/2,a=e/2;e/=2;var r=t.scale*(1==t.tankType?2:1),o=e*t.size/60/r*(1==t.tankType?100/30:1),i=5*e/60/r,s=1/((t.gridScale||0)<.1?1:t.gridScale)*t.gridSize,l=Math.ceil(s*r-1),d=e/s/r;Vg(n,a,e,t.backgroundColor),Ih.lineWidth=i,Ih.lineCap="round",Ih.strokeStyle=t.gridColor,Ih.beginPath(),Ih.moveTo(n,a+e),Ih.lineTo(n,a-e),Ih.moveTo(n+e,a),Ih.lineTo(n-e,a);for(var c=1;c<l+1;c++)Ih.moveTo(n+d*c,a+e),Ih.lineTo(n+d*c,a-e),Ih.moveTo(n-d*c,a+e),Ih.lineTo(n-d*c,a-e),Ih.moveTo(n+e,a+d*c),Ih.lineTo(n-e,a+d*c),Ih.moveTo(n+e,a-d*c),Ih.lineTo(n-e,a-d*c);Ih.stroke();var u=wm(0,t.team),f=t.rot;i/=5;var h=n+e*t.offsetX/2/r,m=a+e*t.offsetY/2/r;t.outerSize>0&&Tg(h,m,o+t.outerSize*o,"#5F676C",t.outerSides,f,!1,i,o),$g(h,m,o,f,t.barrels,!1,i),Tg(h,m,o,u,t.sides,f,!1,i),jg(h,m,f,o,u,t.layers,0,0,!1,!1,i),Wg(h,m,o,f,t.gadgets,u,0,!1,!1,!1,i),function(e,t=0){Ih.globalCompositeOperation="destination-in",Ih.beginPath(),Ih.arc(e/2,e/2,e/2-t,0,2*Math.PI,!1),Ih.fill(),Ih.globalCompositeOperation="source-over"}(Ih.canvas.width,5*i/2),Vg(n,a,e-5*i/2,void 0,t.borderColor||t.gridColor,5*i)}(e.width,t),Ih=n}catch(e){}}function qm(e,t,n,a=1,r,o,i,s,l=0,d=0,c,u=1){var f=Ih.globalAlpha;if(Ih.globalAlpha=s*f,Ih.textAlign="left",Ih.textBaseline="middle",Ih.lineJoin="miter",Ih.miterLimit=2,Ih.strokeStyle="black",n&&!n.width){Ih.font="bold "+r+"px Roboto";for(var h=[],m={fullText:"",sections:[]},p=0;p<n.sections.length;p++){var g=n.sections[p];Ih.measureText(m.fullText+g.text).width<900||""==m.fullText?(m.fullText+=g.text,m.sections.push(g)):(h.push(m),m={fullText:g.text,sections:[g]})}h.push(m);for(var y=0,v=h;y<v.length;y++){for(var b=v[y],w=[],x=0;x<b.sections.length;x++){for(var k=b.sections[x],S=w[w.length-1],M=void 0,T=void 0,_=x;_<b.sections.length;_++){var z=b.sections[_];if(""!=z.text.trim()){M=z,T=_;break}}S&&S.color==k.color&&S.link==k.link&&T&&(T==x||T>x&&M.color==k.color&&M.link==k.link)?w[w.length-1].text+=k.text:w.push(k)}b.sections=w}for(var C=0,E=h;C<E.length;C++){var L,I=E[C];I.width=Ih.measureText(I.fullText).width;var A=hf(I.sections);try{for(A.s();!(L=A.n()).done;){var O=L.value;O.width=Ih.measureText(O.text).width}}catch(e){A.e(e)}finally{A.f()}}n.lines=h,n.width=h.slice().sort((function(e,t){return t.width-e.width}))[0].width,n.height=n.lines.length*r*1.2+.3*r}var B=1,D=1;if(i){var P=0,R=0;n?(P=n.height,R=n.width+r,u<1&&(P=mr(1.5*r,P,u),R=mr(2.5*r,R,u),B=P/n.height,D=R/(n.width+r))):(P=1.5*r,R=2.5*r),qg(e,t-P/2*a,R,P,.4*r,"#0000008c",l*r,d*r)}if(Ih.font="bold "+r*D+"px Roboto",n){var N,j=e-n.width*D/2,F=t-(n.height/2*a+(n.lines.length-1)*r*1.2/2)*B,U=j;Ih.globalAlpha=s*f*u;var W=hf(n.lines);try{for(W.s();!(N=W.n()).done;){var H,Y=N.value;j=U;var $=hf(Y.sections);try{for($.s();!(H=$.n()).done;){var G=H.value;if(eh&&G.link&&Ef){var X={x:j,y:F-12,width:G.width,height:25};if(Iy(nh,X)){yp(G.text);break}}Ih.fillStyle=wm(G.color,G.color),G.link&&Ih.fillRect(j,F+11,G.width,3),0!=o&&Ih.strokeText(G.text,j,F),Ih.fillText(G.text,j,F),j+=G.width*D}}catch(e){$.e(e)}finally{$.f()}F+=1.2*r*B}}catch(e){W.e(e)}finally{W.f()}}if(u<1||!n){var q=performance.now()/200,Z=30,V=1.5*r;n&&(Z=mr(Z,n.width/2,u),V=mr(V,n.height,u));for(var J=.5*V/3,K=0;K<3;K++){var Q=.5+(1+Math.sin(-q+K*Math.PI/3))*s/4;Ih.beginPath(),Ih.arc(e-Z/2+K/2*Z,t-V/2*a,J*Q,0,2*Math.PI,!1),Ih.fillStyle=c,Ih.globalAlpha=f*Q*s*(1-u),Ih.fill()}}Ih.globalAlpha=f}function Zm(e,t,n,a,r,o="white",i="center"){Ih.font="bold "+a+"px Roboto",Ih.textAlign=i,Ih.textBaseline="middle",Ih.lineJoin="miter",Ih.miterLimit=2,Ih.lineWidth=r,Ih.fillStyle=o,r&&(Ih.strokeStyle="black",Ih.strokeText(n,e,t)),Ih.fillText(n,e,t)}function Vm(e,t,n=0){return Ih.font="bold "+t+"px Roboto",Ih.textAlign="center",Ih.textBaseline="middle",Ih.lineJoin="miter",Ih.miterLimit=2,Ih.lineWidth=n,Ih.measureText(e)}var Jm=[1,-1],Km=[{sign:1,size:1},{sign:-1,size:1}],Qm=[{sign:1,size:1},{sign:-1,size:1}],ep=[{id:"gamemode",hovered:!1,size:1},{id:"region",hovered:!1,size:1}],tp="#c0c0c0",np="Connecting...",ap=0,rp=1,op="???",ip=0,sp=1,lp=!1,dp=!1,cp=0,up=document.getElementById("link-confirm-popup"),fp=document.getElementById("link-confirm-title"),hp=document.getElementById("link-confirm-text"),mp=document.getElementById("link-confirm"),pp=document.getElementById("link-cancel"),gp=!1;function yp(e){Yb(!0),up.classList.remove("hide"),fp.innerText="Open Link?",hp.innerHTML=`Are you sure that you want to open the link ${rx(e)}?<br />Never open links from people you don't trust.`,mp.onclick=function(){vp(),window.open(e,"_blank")},pp.onclick=function(){vp()}}function vp(){Yb(!1),up.classList.add("hide"),gp=!1}var bp=document.getElementById("apply-quick-chat"),wp=document.getElementById("delete-quick-chat"),xp=document.getElementById("cancel-quick-chat"),kp=document.getElementById("quick-chat-title"),Sp=document.getElementById("quick-chat-popup"),Mp=document.getElementById("quick-chat-input"),Tp=!1,_p=[],zp=0,Cp=!1,Ep=!1;function Lp(e,t=!1){var n=_p[e];n.add&&t||n&&!n.add&&(tb(n.message),Ep=!1)}function Ip(e){Yb(!0),Sp.classList.remove("hide"),Tp=!0;var t=_p.filter((function(e){return!e.add})).map((function(e){return e.message}));if(null==e)kp.textContent="Create Quick Chat Message",bp.textContent="CREATE",wp.classList.add("hidden"),Mp.value="",bp.onclick=function(){Mp.value.trim()&&(t.push(Mp.value.trim()),Ap(t)),Op(),Ep=!0},xp.onclick=function(){Op(),Ep=!0};else{var n=t[e];kp.textContent="Edit Quick Chat Message",bp.textContent="APPLY",wp.classList.remove("hidden"),Mp.value=n,bp.onclick=function(){Mp.value.trim()?t[e]=Mp.value.trim():t.splice(e,1),Ap(t),Op(),Ep=!0},wp.onclick=function(){t.splice(e,1),Op(),Ap(t),Ep=!0},xp.onclick=function(){Op(),Ep=!0}}setTimeout((function(){Mp.focus()}),0)}function Ap(e){e&&"string"!=typeof e||(e=[]),hx("quick_chat",JSON.stringify(e)),_p=e.map((function(e){return{message:e,lerping:0,buttonLerping:0}}));for(var t=0;t<Math.max(0,3-e.length)+1;t++)_p.push({add:!0,lerping:0,buttonLerping:0})}function Op(){Mp.blur(),Yb(!1),Sp.classList.add("hide"),Tp=!1}function Bp(){Ep=!Ep}var Dp=0,Pp=0,Rp=0,Np=0;function jp(e,t,n,a){Ih.globalAlpha=.5,Kg(t,n,a,"#000000"),Kg(t+e.x*a,n+e.y*a,.5*a,"#000000")}function Fp(e,t){for(var n=e?Pp:Dp,a=xh.width/2,r=xh.height/2-xh.height*(1-n),o=e?Up:Wp,i=(t?My.celestial:My.normal)[e?"weapon":"body"],s=[],l=0,d=Object.entries(i);l<d.length;l++){for(var c=mf(d[l],2),u=c[0],f=c[1],h=+u,m=0;m<f.length;m++)for(var p=f[m],g=Math.min(xh.width/(200*f.length),1),y=a+xh.width*n*((m+1)/(f.length+1)*.6-.3),v=r+xh.height*n*(h/i.maxTier*.6-.3),b=0;b<p.evolutions.length;b++){var w,x=i[h+1],k=p.evolutions[b],S=0;for(S=0;S<x.length;S++)if(x[S].id==k){w=x[S];break}if(!w)return;var M=Math.min(xh.width/(200*x.length),1),T=a+xh.width*n*((S+1)/(x.length+1)*.6-.3),_=r+xh.height*n*((h+1)/i.maxTier*.6-.3),z=o.includes(p.id)&&o.includes(k);s.push({points:[{x:y,y:v+50*g},{x:y,y:v+50*g+10},{x:T,y:_-50*M-10},{x:T,y:_-50*M}],width:5*g,priority:z?1:0,color:z?"black":"#999999"})}s.sort((function(e,t){return e.priority-t.priority}));for(var C=0;C<s.length;C++){var E=s[C];Ih.strokeStyle=E.color,Ih.lineWidth=E.width,Ih.beginPath(),Ih.moveTo(E.points[0].x,E.points[0].y);for(var L=1;L<E.points.length;L++){var I=E.points[L];Ih.lineTo(I.x,I.y)}Ih.stroke()}}for(var A=0,O=Object.entries(i);A<O.length;A++)for(var B=mf(O[A],2),D=B[0],P=B[1],R=+D,N=0;N<P.length;N++){var j=P[N];j.upgradeType=0,j.isCelestial=t,Hm(a+xh.width*n*((N+1)/(P.length+1)*.6-.3),r+xh.height*n*(R/i.maxTier*.6-.3),Be.polygonColors[R],th,j,e,Math.min(xh.width/(200*P.length),1),!o.includes(j.id))}}var Up=[],Wp=[];function Hp(e){for(var t,n=e?mh.weaponUpgrade:mh.bodyUpgrade,a=(mh.isCelestial?My.celestial:My.normal)[e?"weapon":"body"],r=0,o=Object.entries(a);r<o.length;r++)for(var i=mf(o[r],2),s=i[0],l=i[1],d=+s,c=0;c<l.length;c++)l[c].id==n&&(e?Rp=d:Np=d);for(var u=[n],f=e?Rp:Np,h=0;h<a[f].length;h++){var m=a[f][h];if(m.id==n){t=m;break}}t&&(u=u.concat(Yp(a,f,n)),e?Up=u:Wp=u)}function Yp(e,t,n){for(var a=e[t],r=0;r<a.length;r++){var o=a[r];if(o.id==n){for(var i=[],s=0;s<o.evolutions.length;s++){var l=o.evolutions[s];(i=i.concat(Yp(e,t+1,l))).push(l)}return Or(i)}}return 0}var $p=.5;function Gp(e,t,n,a=4){switch(n.type){default:Ih.fillStyle="#000000";case 0:Ih.fillStyle=pm("#c0c0c0",!1,1);break;case 1:2===n.subtype?(Ih.fillStyle=pm(Be.polygonColors[0],!1,1),a*=2):Ih.fillStyle="#000000"}Ih.beginPath(),Ih.arc(e,t,a,0,2*Math.PI,!1),Ih.fill()}var Xp=0,qp=0,Zp="0",Vp=1,Jp=0,Kp=0,Qp=[],eg=0,tg=0,ng=0,ag="#ffffff",rg=[];function og(e,t,n,a){var r=lg(e,t,n,a,!0);rg.push({object:r,time:1})}function ig(e,t,n,a=1){var r=5*a/2,o=300*a-r,i=100*a-2*r,s=o/2,l=i/2,d=i/4;Ih.lineCap="round",Ih.strokeStyle="#000000",Ih.lineWidth=r;var c=n.completed?"#ffffff":"#c0c0c0";qg(e,t,o,i,5*a,n.color),qg(e,t+d,o,l,5*a,n.strokeColor),Zg(e,t,o,i,5*a),Ih.stroke(),Zm(e-s+10*a,t-l+20*a,n.name,20*a,2*r,c,"left"),n.progress&&Zm(e-s+10*a,t-l+40*a,n.progress,10*a,2*r,c,"left");var u=15*a;n.description||function e(t=2){var i=o-20*a,s=n.rawDescription.split(/(\s+)/),l=[],d="";Ih.lineWidth=2*r,Ih.font="bold "+u+"px Roboto";for(var c=0;c<s.length;c++){var f=s[c].trim();f&&(Ih.measureText(d.trim()+" "+f).width<i||""==d.fullText?d+=" "+f:(l.push(d.trim()),d=f))}l.push(d.trim()),n.descriptionFontSize=u/a,n.description=l,l.length>t&&(u=15*a*Math.pow(.72,t-1),e(t+1))}(),u=n.descriptionFontSize*a;for(var f=0;f<n.description.length;f++){var h=n.description[f];Zm(e-s+10*a,t+12*a+f*(1.23*u),h,u,2*r,c,"left")}n.stars||(n.stars=kr(n.rawStars),Ih.lineWidth=2*r,Ih.font="bold "+18*a+"px Roboto",n.starTextWidth=Ih.measureText(n.stars).width/a),Zm(e+s-8*a,t-l+22*a,n.stars,18*a,2*r,c,"right"),ey(e+s-(25+n.starTextWidth)*a,t-l+20*a,14*a,7*a,5,n.completed?"#FFE449":"#c0c0c0","#000000",r,0),Ih.setTransform(1,0,0,1,0,0)}function sg(e,t,n){var a=Ih;(Ih=e.getContext("2d")).clearRect(0,0,e.width,e.height),ig(e.width/2,e.height/2,t,n),Ih=a}function lg(e,t,n,a,r,o){var i=r?Be.i[n]:"#5F676C";return{name:e,rawDescription:t,rarity:n,color:i,strokeColor:km(i),rawStars:a,completed:r,progress:o}}var dg=Ih;function cg(){dg=Ih,Ih=zh}function ug(){Ih=dg}function fg(e,t,n,a="#ffffff",r,o=0){n-=Math.PI/2,cg(),null==r&&(r=Math.max(xh.width,xh.height)),e+=Math.cos(n)*o,t+=Math.sin(n)*o;var i=e+r*Math.cos(n),s=t+r*Math.sin(n);Ih.strokeStyle=a,Ih.lineCap="round",Ih.lineWidth=+Ur.guideLineWidth,Ih.beginPath(),Ih.moveTo(e,t),Ih.lineTo(i,s),Ih.stroke(),ug()}function hg(e,t,n,a="#ffffff"){cg(),Ih.strokeStyle=a,Ih.lineCap="round",Ih.lineWidth=+Ur.guideLineWidth,Ih.beginPath(),Ih.arc(e,t,n,0,2*Math.PI,!1),Ih.stroke(),ug()}function mg(e,t,n,a,r,o="#ffffff"){a-=Math.PI/2,r-=Math.PI/2,cg(),Ih.strokeStyle=o,Ih.lineCap="round",Ih.lineWidth=+Ur.guideLineWidth,Ih.beginPath(),Ih.arc(e,t,n,a,r,!1),Ih.stroke(),ug()}function pg(e,t,n,a,r="#ffffff"){cg(),Ih.strokeStyle=r,Ih.lineCap="round",Ih.lineWidth=+Ur.guideLineWidth,Ih.strokeRect(e,t,n,a),ug()}function gg(e,t,n,a,r,o,i){a-=Math.PI/2,cg();var s=e+n*Math.cos(a),l=t+n*Math.sin(a),d=s+o*Math.cos(a+r),c=l+o*Math.sin(a+r),u=s-o*Math.cos(a-r),f=l-o*Math.sin(a-r);Ih.strokeStyle=i,Ih.lineCap="round",Ih.lineWidth=+Ur.guideLineWidth,Ih.beginPath(),Ih.moveTo(s,l),Ih.lineTo(d,c),Ih.moveTo(s,l),Ih.lineTo(u,f),Ih.stroke(),ug()}var yg=!1,vg=[];function Xm(e,t){var n;n=e?wm(e.team,t.team,e.id,t.id):wm(0,t.team,0,t.parentID),e&&e.id==t.id&&(yg=Lf),bg(t,n,t.sides,!0),yg=!1}function bg(e,t,n,a){var r=Math.round(80*(1-e.damageTime||0)),o=Mm(pm(t,e.isInvulnerable,e.radiant),r);e.lastColor=o;var i,s=e.fadeTime||1,l=e.x,d=e.y,c=e.d,u=e.size;Ih.globalAlpha=1,e.v&&(Ih.globalAlpha=.2);var f=!1;if(e.fadeType){var h=e.fadeType[1];switch(e.fadeType[0]){case 0:u*=1+.5*(1-s),s<1&&(f=!0,yy(s));break;case 1:u*=s;break;case 2:var m=Math.pow(1-s,2);u*=1+2*(1-s),c+=m*h[0]*4,l+=m*Math.cos(h[1])*2e3,d+=m*Math.sin(h[1])*2e3,s<1&&(f=!0,yy(s));break;case 3:var p=Math.pow(1-s,2);u*=1-p,c+=p*h[0]*4,l=mr(l,h[1],p),d=mr(d,h[2],p)}}if(e.outerSize>0&&Tg(l,d,u+e.outerSize*u,"#5F676C",e.outerSides,c,!0,1,u),e.barrels&&e.barrels.length>0&&$g(l,d,u,c,e.barrels,!0),Tg(l,d,u,o,n,c,!0),e.layers&&jg(l,d,c,u,o,e.layers,r,e.radiant,e.isInvulnerable),e.gadgets&&e.gadgets.length>0&&Wg(l,d,u,c,e.gadgets,o,r,e.radiant,e.isInvulnerable,!0),f&&vy(),Af&&s>=1){var g={x:xh.width/2+(l-Rh)/Dh,y:xh.height/2+(d-Nh)/Dh,r:e.size/Dh,rot:c};Ly(nh,g)&&(Zy(`Copied ${(i=e).name}'s ID to clipboard. (${i.id})`),navigator.clipboard.writeText(i.id),Af=!1)}Is&&Ur.showHitboxes&&s>=1&&hg(xh.width/2+(l-Rh)/Dh,xh.height/2+(d-Nh)/Dh,e.size/Dh,"#ffffff")}function wg(e,t,n){if(t.radiant>0){var a=performance.now(),r=t.size,o=t.x,i=t.y,s=t.d,l=t.fadeTime||1,d=1;if(t.fadeType){var c=t.fadeType[1];switch(t.fadeType[0]){case 0:r*=1+.5*(1-l),l<1&&(d=l);break;case 1:r*=l;break;case 2:var u=Math.pow(1-l,2);r*=1+2*(1-l),s+=u*c[0]*4,o+=u*Math.cos(c[1])*2e3,i+=u*Math.sin(c[1])*2e3,l<1&&(d=l);break;case 3:var f=Math.pow(1-l,2);r*=1-f,s+=f*c[0]*4,o=mr(o,c[1],f),i=mr(i,c[2],f)}}if(Ih.globalAlpha=d,n||=e?wm(e.team,t.team,e.id,t.parentID||t.id):wm(0,t.team,0,t.parentID),Math.random()/jr<1/(600/t.size)){var h=Math.random()*Math.PI*2,m=Math.random()*t.size;Bg(o+m*Math.sin(h),i+m*Math.cos(h),(1*Math.random()-.5)*t.radiant,(1*Math.random()-.5)*t.radiant,Py(6,6*t.radiant),Math.random(),0,n,60,1,t.radiant)}var p=Sm(_m(mm).substring(1),"ffffff",.5);if(t.radiant>1){var g=Math.min(Ih.globalAlpha,1);Ih.globalAlpha=g*(1-.7/((2+t.radiant)/3));var y=Math.max(1.2+.1*(1+Math.sin(a/800*((2+t.radiant)/4)))*t.radiant,.1);Tg(o,i,(r+(t.outerSize||0)*r)*y,p,t.outerSize>0?t.outerSides:t.sides,s,!0,1,r*y),Ih.globalAlpha=g}if(t.radiant>2){if(t.radiant>3){var v=Math.max(1.5+t.radiant/5+.06*(1+Math.sin(a/800*((1+t.radiant)/2)))*t.radiant,.1);Tg(o,i,(r+(t.outerSize||0)*r)*v,p,-3,20*Math.cos(a/25e3)*(1+t.radiant)/2,!0,1,.4*r)}var b=2/((t.radiant+2)/5);Tg(o,i,(r+(t.outerSize||0)*r)*(Math.cos(a/500+Math.PI)/b+1),p,-6,a/2e3*(1+t.radiant)/2,!0,1),Tg(o,i,(r+(t.outerSize||0)*r)*(Math.cos(a/500)/b+1),p,-6,-a/2e3*(1+t.radiant)/2,!0,1)}}}function xg(e,t){var n=t.x,a=t.y,r=t.size;switch(Ih.globalAlpha=1,t.type){case 0:Is&&Ur.showHitboxes&&(hg(xh.width/2+(n-Rh)/Dh,xh.height/2+(a-Nh)/Dh,r/4/Dh,"#ffffff"),hg(xh.width/2+(n-Rh)/Dh,xh.height/2+(a-Nh)/Dh,10*r/Dh,"#ff0000"));var o=pm("#ffffff",!1,10);Og(n,a,.1*t.size);var i=.5+(Ye=performance.now()/500),s=Ye-Math.floor(Ye),l=i-Math.floor(i),d=10-9*s,c=10-9*l,u=5*Math.sin(Ye/5);Ih.globalAlpha=.2*Math.min(2*s,1),Tg(t.x,t.y,t.size*d,o,-10,u,!0,1,t.size*d*.9),Ih.globalAlpha=.2*Math.min(2*l,1),Tg(t.x,t.y,t.size*c,o,-8,u,!0,1,t.size*c*.9),Ih.globalAlpha=1;var f=t.backgroundColor,h=t.gridColor,m=t.gridSize,p=5/Dh;if(Tg(t.x,t.y,r,f,0,0,!0,0),p>.3){var g=m/Dh,y=xh.width/2+(t.x-Rh)/Dh,v=xh.height/2+(t.y-Nh)/Dh,b=r/Dh,w=y-b,x=v-b,k=y+b,S=v+b,M=-t.x/Dh%g,T=-t.y/Dh%g;Ih.lineWidth=p,Ih.strokeStyle=h,Ih.beginPath();for(var _=w+M;_<k;_+=g){var z=Math.sqrt(1-Math.pow(Math.abs(_-y)/b,2))*b;Ih.moveTo(_,v-z),Ih.lineTo(_,v+z)}for(var C=x+T;C<S;C+=g){var E=Math.sqrt(1-Math.pow(Math.abs(C-v)/b,2))*b;Ih.moveTo(y-E,C),Ih.lineTo(y+E,C)}Ih.stroke()}for(var L=ur(ir(.12*t.size,10,20)),I=t.size/L*4,A=.2*Math.sin(Ye/2)+Math.PI/2,O=10*Math.sin(Ye/10),B=0;B<L;B++){var D=B/L*Math.PI*2+O,P=t.size*(1+.05*Math.sin(D-O+3*Ye)),R=1+.05*Math.sin(D-O+Ye/2);Tg(t.x+Math.sin(D)*P,t.y+Math.cos(D)*P,I*R,o,-2,A-D,!0,1,.85*I)}for(var N=30*Math.min(1,t.size/30)*Math.min(hh,.1)*jr,j=Math.random();j<N;j+=Math.random())if(Math.random()<.1){var F=Math.random()*Math.PI*2,U=Py(1,2),W=Py(60,120);Bg(n,a,U*Math.sin(F),U*Math.cos(F),Py(4,8),Math.random()*Math.PI*2,0,"#ffffff",W,1,10)}else{var H=Math.random()*Math.PI*2,Y=Py(3,5)*Math.max(1,r/30),$=Py(30,60),G=Y*$;Bg(n+-Math.sin(H)*G,a+-Math.cos(H)*G,Y*Math.sin(H),Y*Math.cos(H),Py(4,8*Math.max(1,r/15)),Math.random()*Math.PI*2,0,"#ffffff",$,1,10,1,!1,t.id)}break;case 1:switch(Is&&Ur.showHitboxes&&hg(xh.width/2+(n-Rh)/Dh,xh.height/2+(a-Nh)/Dh,r/Dh,"#ffffff"),Og(n,a,1.3),t.subtype){case 0:var X=bm(t.gamemode),q=performance.now()/2500,Z=q+.5,V=q-Math.floor(q),J=Z-Math.floor(Z),K=1+3*V,Q=1+3*J;Ih.globalAlpha=.2*Math.min(2*(1-V),1),Tg(t.x,t.y,t.size*K,X,0,0,!0),Ih.globalAlpha=.2*Math.min(2*(1-J),1),Tg(t.x,t.y,t.size*Q,X,0,0,!0),Ih.globalAlpha=1;var ee="#000000",te=1-Math.min(t.lifetime/30,1);0!==te&&(ee=Mm(ee,Math.floor(256*te))),Tg(t.x,t.y,t.size,ee,0,0,!0);for(var ne=30*Math.min(hh,.1)*jr,ae=Math.random();ae<ne;ae+=Math.random()){var re=Math.random()*Math.PI*2,oe=.06*t.size;Bg(n,a,oe*Math.sin(re),oe*Math.cos(re),Py(.5,.8)*(t.size/1.5),Math.random()*Math.PI*2,0,"#ffffff",50,1,0,1,!0)}break;case 1:var ie=performance.now()/2500,se="#000000",le=bm(t.gamemode),de=1-Math.min(t.lifetime/30,1),ce=2*-ie,ue=ce+.5,fe=ce-Math.floor(ce),he=ue-Math.floor(ue),me=1+5*fe,pe=1+5*he;Ih.globalAlpha=.2*Math.min(2*(1-fe),1),Tg(t.x,t.y,t.size*me,le,0,0,!0),Ih.globalAlpha=.2*Math.min(2*(1-he),1),Tg(t.x,t.y,t.size*pe,le,0,0,!0),Ih.globalAlpha=1,Tg(t.x,t.y,4*t.size,"#ffffff",-3,20*Math.cos(ie/10)*t.sign,!0,1,.4*t.size),Tg(t.x,t.y,.5*t.size*(Math.sin(10*ie+Math.PI)+4),"#ffffff",-6,4*-ie*t.sign,!0),Tg(t.x,t.y,.5*t.size*(Math.sin(10*ie)+4),"#ffffff",-6,4*ie*t.sign,!0),Ih.globalAlpha=1,0!==de&&(se=Mm(se,Math.floor(256*de))),Tg(t.x,t.y,1.3*t.size,se,-8,-ie*t.sign,!0,1,.4*t.size),Tg(t.x,t.y,1.6*t.size,se,-6,ie*t.sign,!0,1,.4*t.size),Tg(t.x,t.y,t.size,se,0,0,!0),Tg(t.x,t.y,1.3*t.size-10,se,-8,-ie*t.sign,!0,0,.4*t.size-5),Tg(t.x,t.y,1.6*t.size-10,se,-6,ie*t.sign,!0,0,.4*t.size-5);for(var ge=12*Math.min(hh,.1)*jr,ye=.08*t.size,ve=50*ye,be=Math.random();be<ge;be+=Math.random()){var we=Math.random()*Math.PI*2;Bg(n-ve*(Fe=Math.sin(we)),a-ve*(Ue=Math.cos(we)),ye*Fe,ye*Ue,Py(.5,.8)*(t.size/1.5),Math.random()*Math.PI*2,0,"#ffffff",50,1,0,1,!0)}break;case 2:var xe=Be.polygonColors[0],ke=pm(xe,!1,1),Se=performance.now()/3500,Me=Se+.5,Te=Se-Math.floor(Se),_e=Me-Math.floor(Me),ze=1+1*Te,Ce=1+1*_e;Ih.globalAlpha=.2*Math.min(2*(1-Te),1),Tg(t.x,t.y,t.size*ze,ke,0,0,!0),Ih.globalAlpha=.2*Math.min(2*(1-_e),1),Tg(t.x,t.y,t.size*Ce,ke,0,0,!0),Ih.globalAlpha=1,Tg(t.x,t.y,1.1*t.size,ke,-12,Math.sin(Se/1e3)*t.sign*1e3,!0,1,t.size),Tg(t.x,t.y,t.size,"#000000",0,0,!0);for(var Ee=0;Ee<4;Ee++){var Le=3*-Se,Ie=(4-Ee-1)/4+(Le-Math.floor(Le))/4,Ae=Ie,Oe=zm(ke,"#000000",Ie);Tg(t.x,t.y,t.size*Ae,Oe,0,0,!0)}for(var De=18*Math.min(hh,.1)*jr,Pe=Math.random();Pe<De;Pe+=Math.random()){var Re=Math.random()*Math.PI*2,Ne=.01*t.size;Bg(n+Math.sin(Re)*t.size*.9,a+Math.cos(Re)*t.size*.9,Ne*Math.sin(Re),Ne*Math.cos(Re),Py(.5,.8)*(t.size/3),Math.random()*Math.PI*2,0,xe,50,1,1,1,!0)}if(Math.random()/jr<5e-5){var je=Math.random()*Math.PI*2,Fe=Math.sin(je),Ue=Math.cos(je),We=.01*t.size*(.5+Math.random()),He=t.size/We;Bg(t.x+0*Math.sin(je),t.y+0*Math.cos(je),We*Fe,We*Ue,Py(6,6),Math.random(),0,xe,He,1,1)}}break;case 2:var Ye;Is&&Ur.showHitboxes&&hg(xh.width/2+(n-Rh)/Dh,xh.height/2+(a-Nh)/Dh,r/2/Dh,"#ffffff");var $e=pm(o=wm(e&&e.team,t.lTeam,e?e.id:"",t.lID),!1,t.lRadiant),Ge=(Ye=performance.now())*t.sign/1e3;if(Ih.globalAlpha=.5,Tg(t.x,t.y,t.size*(2+Math.cos(Ye/1e3)/2),$e,4,Ge,!0),Ih.globalAlpha=1,Tg(t.x,t.y,t.size,$e,4,Ge,!0),Math.random()/jr<1/(300/t.size)){var Xe=Math.random()*Math.PI*2,qe=Math.random(),Ze=qe*t.size*(2+Math.cos(Ye/1e3)/2);Bg(t.x+Ze*Math.sin(Xe),t.y+Ze*Math.cos(Xe),1*Math.random()-.5,1*Math.random()-.5,18-8*qe,Math.random()*Math.PI*2,4,o,30,.5,t.lRadiant)}if(t.lRadiant>0){if(Math.random()/jr<1/(600/t.size)){var Ve=Math.random()*Math.PI*2,Je=Math.random()*t.size;Bg(t.x+Je*Math.sin(Ve),t.y+Je*Math.cos(Ve),(1*Math.random()-.5)*t.lRadiant,(1*Math.random()-.5)*t.lRadiant,Py(6,6*t.lRadiant),Math.random(),0,o,60,1,t.lRadiant)}break}}}function kg(e){var t=pm(e.color,!1,e.radiant),n=e.size;Ih.globalAlpha=e.transparency*Lm(e.lifetime,e.maxLifetime),Tg(e.x,e.y,n,t,e.sides,e.d,!0),Ih.globalAlpha=1}function Sg(e,t,n,a,r,o,i){var s,l,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,c=i?Dh:1;i?(s=xh.width/2+(e-Rh)/c,l=xh.height/2+(t-Nh)/c):(s=e,l=t),function(e,t,n,a,r,o,i,s){Ih.lineJoin="round",Ih.beginPath(),Ih.translate(e,t),Ih.rotate(r),Ih.rect(-n/2,-a/2,n,a),Ih.fillStyle=o,Ih.lineWidth=s,Ih.strokeStyle=i,Ih.fill(),Ih.stroke(),Ih.setTransform(1,0,0,1,0,0)}(s,l,2*n/c,2*a/c,r,o,km(o),5*d/c)}function Mg(e,t,n,a,r,o,i){var s,l,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,c=i?Dh:1;i?(s=xh.width/2+(e-Rh)/c,l=xh.height/2+(t-Nh)/c):(s=e,l=t),function(e,t,n,a,r,o,i){Ih.lineJoin="round",Ih.lineCap="round",Ih.beginPath(),Ih.translate(e,t),Ih.rotate(r),Ih.moveTo(-n/2,-a/2),Ih.lineTo(n/2,0),Ih.lineTo(-n/2,a/2),Ih.lineWidth=i,Ih.strokeStyle=o,Ih.stroke(),Ih.setTransform(1,0,0,1,0,0)}(s,l,n/c,a/c,o,r,5*d/c)}function Tg(e,t,n,a,r,o,i,s=1,l){var d,c,u=!(arguments.length>9)||void 0===arguments[9]||arguments[9];null==l&&(l=n/2);var f=i?Dh:1;i?(d=xh.width/2+(e-Rh)/f,c=xh.height/2+(t-Nh)/f):(d=e,c=t);var h=u?a:null,m=km(a);0==r?Vg(d,c,n/f,h,m,5*s/f):r>0?function(e,t,n,a,r,o,i,s){Ih.lineJoin="round",Ih.beginPath(),Ih.translate(e,t),Ih.rotate(s),a%2!=0&&Ih.rotate(-90*Math.PI/180),Ih.moveTo(n*Math.cos(0),n*Math.sin(0));for(var l=1;l<=a+1;l+=1)Ih.lineTo(n*Math.cos(2*l*Math.PI/a),n*Math.sin(2*l*Math.PI/a));Ih.fillStyle=r,Ih.fill(),i&&(Ih.lineWidth=i,Ih.strokeStyle=o,Ih.stroke())}(d,c,n/f,r,h,m,5*s/f,o):ey(d,c,n/f,l/f,-r,h,m,5*s/f,o),Ih.setTransform(1,0,0,1,0,0)}function _g(e,t,n){var a;a=e?wm(e.team,t.team,e.id,t.id):wm(0,t.team,0,t.parentID);var r=t.showName;Ur.showNames?e&&e.id==t.id&&!Ur.showOwnName&&(r=!1):r=!1,zg(t,a,r,n)}function zg(e,t,n,a){var r=e.x,o=e.y;e.d;var i=e.size,s=e.fadeTime||1;Ih.globalAlpha=1;var l=!1;if(e.fadeType){var d=e.fadeType[1];switch(e.fadeType[0]){case 0:i*=1+.5*(1-s),s<1&&(l=!0,yy(s,1==a));break;case 1:i*=s,s<1&&(l=!0,yy(s,1==a));break;case 2:var c=Math.pow(1-s,2);i*=1+2*(1-s),d[0],r+=c*Math.cos(d[1])*2e3,o+=c*Math.sin(d[1])*2e3,s<1&&(l=!0,yy(s,1==a));break;case 3:var u=Math.pow(1-s,2);i*=1-u,d[0],r=mr(r,d[1],u),o=mr(o,d[2],u),s<1&&(l=!0,yy(s,1==a))}}var f,h=xh.width/2+(r-Rh)/Dh,m=xh.height/2+(o-Nh)/Dh;if(f="object"==typeof e.nameColor?wm(0,132,0,1,e.nameColor[0],e.nameColor[1]):wm(e.nameColor,e.nameColor),0==a){var p=pm(t,e.isInvulnerable,e.radiant);if(n&&(Zm(h,m-i/Dh-20,"lv. "+Math.round(e.level),15,10,f),Zm(h,m-i/Dh-50,e.name,30,10,f)),Is){var g=[];Ur.showIds&&g.push(e.id),Ur.showClassNames&&g.push(e.className);for(var y=0;y<g.length;y++)Zm(h,m-i/Dh+10+23*y,g[y],15,10,f)}if(e.healthBarFade&&e.healthBarFade>.01){var v=1;e.healthBarFade<.05&&(v=e.healthBarFade/.05);var b=e.healthBarFade,w=function(e){for(var t=Tm(e),n=t.reduce((function(e,t){return e+t}))/t.length,a=Math.floor(Math.max(n,70)-n),r=0;r<t.length;r++)t[r]=Math.min(t[r]+a,255);return _m(t)}(p),x=i/Dh*b,k=i/Dh*b*2,S=m+(i+8)/Dh;Ih.lineCap="round",Ih.strokeStyle="black",Ih.lineWidth=2*Wh*v,Ih.beginPath(),Ih.moveTo(h-x,S),Ih.lineTo(h-x+k,S),Ih.stroke(),Ih.strokeStyle=_m(Cm(Tm(w),"#000000",.8)),Ih.lineWidth=Wh*v,Ih.beginPath(),Ih.moveTo(h-x,S),Ih.lineTo(h-x+k*Math.max(1,0),S),Ih.stroke(),Ih.strokeStyle=Mm(w,Math.round(80*(1-e.damageTime||0))),Ih.lineWidth=Wh*v,Ih.beginPath(),Ih.moveTo(h-x,S),Ih.lineTo(h-x+k*(Math.max(e.hp,0)/e.maxHP),S),Ih.stroke(),Ur.showPercentagesOnHealthBars&&10/Dh>3&&Zm(h,S,Math.max(0,fr(e.hp/e.maxHP*100,1))+"%",10/Dh*b*v,5/Dh*b*v,f)}}else{var M=!1,T=0,_=!1;if(Ny[e.id]&&(M=(T=yr(Ny[e.id].lerping))>.05,_=Ny[e.id].time<0),(e.id in Ry||M)&&Ur.showChat&&0==Mw)for(var z=Ry[e.id]||[],C=0,E=0,L=(n?""==e.name?55:95:25)-20,I=0,A=M?-1:0;A<z.length;A++){var O=void 0,B=void 0,D=void 0,P=void 0;if(-1==A)E+=B=T,D=37.5,P=_?1:B;else{O=z[A],I>3&&(O.time=Math.min(O.time,.5)),E+=B=Em(O.time,12);var R=12-O.time>11.5?E-B+1:E;P=0!=A||M?Math.max(0,1-(R-1)):R}qm(h,m-i/Dh-L-C-.5*P*25,-1==A?null:O.message,1,25,0,!0,B,0==P?0:.4,.4*P,f,O?yr(O.typingFade):0),-1!=A&&(I+=mr(1,O.message.lines.length,O.typingFade),D=mr(37.5,O.message.height,O.typingFade)),C+=B*(D+5.5+.5*P*25)}}l&&vy()}function Cg(e){for(var t,n,a={top:null,left:null,right:null,bottom:null},r=0;r<e.data.length;r+=4)0!==e.data[r+3]&&(t=r/4%e.width,n=~~(r/4/e.width),null===a.top&&(a.top=n),(null===a.left||t<a.left)&&(a.left=t),(null===a.right||a.right<t)&&(a.right=t),(null===a.bottom||a.bottom<n)&&(a.bottom=n));return a.bottom++,a.right++,a}var Eg=[],Lg=0,Ig=0;function Ag(){Eg=[],Lg=0,Ig=0}function Og(e,t,n,a=1e-4){0!=Ur.cameraShake&&Eg.push({x:e,y:t,power:n*Ur.cameraShake/100,time:a,maxTime:a})}function Bg(e,t,n,a,r,o,i,s,l,d=1,c=0,u=1,f=!1,h,m=1){ah.length<Nr&&ah.push({x:e,y:t,xVel:n,yVel:a,size:r,d:o,sides:i,color:s,lifetime:l/60,maxLifetime:l,startSize:r,endSize:m*r,transparency:d,radiant:c,friction:u,below:f,riftAnchorID:h})}function Dg(){ah=[]}function Pg(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={},a=0;a<t.length;a++){var r=t[a];0==r.type&&(n[r.id]={x:r.x,y:r.y})}ah.forEach((function(t,a){if(t.lifetime-=e,t.x+=60*t.xVel*e,t.y+=60*t.yVel*e,t.size=mr(t.startSize,t.endSize,1-t.lifetime/(t.maxLifetime/60)),1!=t.friction){var r=1-60*(1-t.friction)*e;t.xVel*=r,t.yVel*=r}if(t.riftAnchorID){var o=n[t.riftAnchorID];o&&(null==t.anchorX&&(t.anchorX=o.x,t.anchorY=o.y),t.x=o.x+(t.x-t.anchorX),t.y=o.y+(t.y-t.anchorY),t.anchorX=o.x,t.anchorY=o.y)}t.lifetime<0&&ah.splice(a,1)}))}function Rg(e){var t=e.x,n=-e.y,a=Be.polygonColors[e.level],r=20;if(e.polyp)r=45,a="#f177dd";else for(var o=0;o<e.level;o++)r*=1.5;e.radiant&&(wg(null,{x:t,y:n,size:r,sides:e.polyp?3:3+e.level,outerSides:0,outerSize:0,radiant:e.radiant},a),a=pm(a,!1,e.radiant)),Tg(t,n,r,a,e.polyp?3:3+e.level,e.d,!0)}function Ng(e,t,n,a,r,o,i,s,l,d=[],c=[],u=0){t=-t,u&&(wg(null,{x:e,y:t,size:n,sides:r,outerSides:o,outerSize:i,radiant:u},s),s=pm(s,!1,u)),i>0&&Tg(e,t,n+i*n,"#5F676C",o,a,!0,1,n),$g(e,t,n,a,l,!0),Tg(e,t,n,s,r,a,!0),jg(e,t,a,n,s,c,0,0,!1,!0),Wg(e,t,n,a,d,s,0,!1,s,!0)}function jg(e,t,n,a,r,o,i,s,l){for(var d=!(arguments.length>9)||void 0===arguments[9]||arguments[9],c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,u=0;u<o.length;u++){var f=o[u],h=r;f.hasOwnProperty("team")&&(h=Mm(pm(wm(f.team,f.team,0,0),l,s),i)),f.offsetX||=0,f.offsetY||=0;var m=c;1==f.hideBorder&&(m=0);var p=n+(f.rot||0),g=e+(f.offsetX*Math.sin(1.57079633-n)+f.offsetY*Math.cos(n+1.57079633))*a,y=t+(f.offsetY*Math.cos(n)+f.offsetX*Math.sin(-n+Math.PI))*a;if(f.outerSize>0&&Tg(g,y,(f.size+f.outerSize)*a,f.selected?Sm("#5F676C".substring(1),"ffffff",.2+(1+Math.sin(performance.now()/250))/2*.8):"#5F676C",f.outerSides,p,d,m,f.size*a),Tg(g,y,f.size*a,f.selected?Sm(h.substring(1),"ffffff",.2+(1+Math.sin(performance.now()/250))/2*.8):h,f.sides,p,d,m),yg&&Ef){var v=e+(-f.offsetY*Math.sin(n)+f.offsetX*Math.sin(n+Gg))*a,b=t-(f.offsetX*Math.cos(n+Gg)+-f.offsetY*Math.cos(n))*a,w={x:xh.width/2+(v-Rh)/Dh,y:xh.height/2+(b-Nh)/Dh,r:(f.size+f.outerSize)*a/Dh,rot:n};Ly(nh,w)&&Of.push({type:"layer",index:u,stack:ff(vg)})}}}function Fg(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e.gadgets){var n=e.fadeTime||1,a=e.size,r=e.x,o=e.y,i=e.d,s=1;if(e.fadeType){var l=e.fadeType[1];switch(e.fadeType[0]){case 0:a*=1+.5*(1-n),n<1&&(s=n);break;case 1:a*=n;break;case 2:var d=Math.pow(1-n,2);a*=1+2*(1-n),i+=d*l[0]*4,r+=d*Math.cos(l[1])*2e3,o+=d*Math.sin(l[1])*2e3,n<1&&(s=n);break;case 3:var c=Math.pow(1-n,2);a*=1-c,i+=c*l[0]*4,r=mr(r,l[1],c),o=mr(o,l[2],c)}}var u=e.lastColor??"#ffffff";!function e(n,a,r,o,i){for(var l=0;l<i.length;l++){var d=i[l];if(2==d.type&&0!=d.alpha){var c=1;null!=d.enableFade&&(c=yr(d.enableFade));var f=s*(d.alpha||.3);Ug(n,a,d.offsetX,d.offsetY,d.subtype,d.auraColor,d.hideBorder,d.rotationType,r,d.rot,o,d.sides,d.radius,u,c,f,null==d.deactivatedApha?.3:d.deactivatedApha,t&&0==d.showParticles)}if(3==d.type){var h=void 0;switch(d.rotationType){case 0:h=d.baseRot+r;break;case 1:case 4:h=null==d.rot?d.baseRot+r:d.rot;break;case 3:case 2:h=0==d.anchored?null==d.rot?d.baseRot+r:d.baseRot+r+d.rot:null==d.rot?d.baseRot:d.rot;h+=2*Math.PI+1.2*performance.now()/3e3*d.rotationSpeed}e(n+(d.offsetX*Math.sin(1.57079633-r)+d.offsetY*Math.cos(r+1.57079633))*o,a+(d.offsetY*Math.cos(r)+d.offsetX*Math.sin(-r+Math.PI))*o,h,d.width*o,d.tank.gadgets)}}}(r,o,i,a,e.gadgets),Ih.globalAlpha=1}}function Ug(e,t,n,a,r,o,i,s,l,d,c,u,f,h,m,p,g){var y=!(arguments.length>17)||void 0===arguments[17]||arguments[17],v=ym(r,o,h),b=xh.width/2+(e-Rh)/Dh,w=xh.height/2+(t-Nh)/Dh;if(y&&Math.random()/jr<1/(300/(c*f*m*m))){var x=Math.random()*Math.PI*2,k=Math.random()*(c*f);Bg(e+k*Math.sin(x)+(n*Math.sin(1.57079633-l)+a*Math.cos(l+1.57079633))*c*m,t+k*Math.cos(x)+(a*Math.cos(l)+n*Math.sin(-l+Math.PI))*c*m,1*Math.random()-.5,1*Math.random()-.5,6,Math.random()*Math.PI*2,u,v,30,p)}if(0!=g||0!=m){Ih.globalAlpha=p*mr(g,1,m),Ih.translate(b,w),Ih.rotate(l),Ih.translate(-b,-w);var S=v;0==m?S="#5F676C":m<1&&(S=Sm(v.substring(1),"#5F676C".substring(1),m)),Tg(e+n*c,t+a*c,c*f,S,u,(0==s?0:-l)+d,!0,1==i?0:1)}}function Wg(e,t,n,a,r,o,i,s,l,d,c=1){for(var u=0;u<r.length;u++){var f=r[u];3==f.type?Yg(u,e,t,n,a,f,o,i,s,l,d,c):Hg(u,e,t,n,a,f,o,d,1==f.hideBorder?0:c)}}function Hg(e,t,n,a,r,o,i,s){var l,d,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,u=s?Dh:1,f=o.width*(1.5-.8*Math.max(0,o.animTime||0))*a,h=o.length*(1-.2*Math.max(0,o.animTime||0));s?(l=xh.width/2+(t-Rh)/u,d=xh.height/2+(n-Nh)/u):(l=t,d=n);var m=null==o.color?"#999999":wm(o.color,o.color);switch(Ih.lineJoin="round",Ih.fillStyle=o.selected?Sm(m.substring(1),"ffffff",.2+(1+Math.sin(performance.now()/250))/2*.8):m,Ih.lineWidth=5*c/u,Ih.strokeStyle=km(Ih.fillStyle),Ih.beginPath(),Ih.translate(l,d),Ih.rotate(r),Ih.translate(o.offsetX*a/u,o.offsetY*a/u),0===o.type&&(Ih.rotate(-r),Ih.rotate(o.rot??r+o.baseRot),Ih.rect(-1*o.width*a/u,-2*h*a/u,o.width*a*2/u,2*a*h/u)),Ih.fill(),c&&Ih.stroke(),o.type){case 0:if(Vg(0,0,1.5*o.width*a/u,Ih.fillStyle,Ih.strokeStyle,5*c/u),oo&&o.selected&&Ur.showAutoCannonRangeGuideLines){var p=l+Math.cos(r)*(o.offsetX*a)/u-Math.sin(r)*(o.offsetY*a)/u,g=d+Math.sin(r)*(o.offsetX*a)/u+Math.cos(r)*(o.offsetY*a)/u,y=(30*o.minDistance||0)+a,v=(30*o.maxDistance||0)+a;y==v&&y>0?hg(p,g,y/u,"#ffffff"):(y>0&&hg(p,g,y/u,"#00ff00"),v>0&&hg(p,g,v/u,"#ff0000"))}break;case 1:Ih.rotate(o.rot),Ih.beginPath(),Ih.rect(f/u*-.5,f/u*-.5,f/u,f/u),Ih.fill(),c&&Ih.stroke();break;case 2:Ih.setTransform(1,0,0,1,0,0),Ih.translate(l,d),Ih.rotate(r),Ih.translate(-l,-d);var b=1;null!=o.enableFade&&(b=o.enableFade),Tg(t+o.offsetX*a,n+o.offsetY*a,o.width*a,Ih.fillStyle,o.backSides,o.rot,s,c);var w=ym(o.subtype,o.auraColor,i),x=w;if(0==x?x="#5F676C":b<1&&(x=Sm("#5F676C".substring(1),w.substring(1),1-b)),Ih.translate(l,d),Ih.rotate(r),Ih.translate(-l,-d),Tg(t+o.offsetX*a,n+o.offsetY*a,o.width*a*.5,x,o.sides,(0==o.rotationType?0:-r)+o.rot,s,c),b<1&&b>0){Ih.translate(l,d),Ih.rotate(r),Ih.translate(-l,-d);var k=Ih.globalAlpha;Ih.globalAlpha=.45*k*Math.min(1,3*(1-b)),Tg(t+o.offsetX*a,n+o.offsetY*a,o.width*a*.5*Math.max(0,6*b-1),w,o.sides,(0==o.rotationType?0:-r)+o.rot,s,c),Ih.globalAlpha=k}}if(yg&&Ef){var S=t+(-o.offsetY*Math.sin(r)+o.offsetX*Math.sin(r+Gg))*a,M=n-(o.offsetX*Math.cos(r+Gg)+-o.offsetY*Math.cos(r))*a,T={x:xh.width/2+(S-Rh)/Dh,y:xh.height/2+(M-Nh)/Dh,r:o.width*a*(0==o.type?1.5:1)/Dh};Ly(nh,T)&&Of.push({type:"gadget",index:e,stack:ff(vg)})}Ih.setTransform(1,0,0,1,0,0)}function Yg(e,t,n,a,r,o,i,s,l,d,c){var u,f,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1;switch(o.rotationType){case 0:u=o.baseRot+r;break;case 1:case 4:u=null==o.rot?o.baseRot+r:o.rot;break;case 3:case 2:u=0==o.anchored?null==o.rot?o.baseRot+r:o.baseRot+r+o.rot:null==o.rot?o.baseRot:o.rot;u+=2*Math.PI+1.2*performance.now()/3e3*o.rotationSpeed}var m=t+(o.offsetX*Math.sin(-r+Gg)+o.offsetY*Math.cos(r+Gg))*a,p=n+(o.offsetY*Math.cos(r)+o.offsetX*Math.sin(-r+Math.PI))*a,g=i;if(null!=o.team&&(g=1==o.suppressColor?Mm(pm(wm(o.team,o.team,0,0),d,l),s):wm(o.team,o.team,0,0)),yg&&Ef&&(f=ff(vg),vg.push(e)),o.outerSize>0&&Tg(m,p,(o.width+o.outerSize)*a,o.selected?Sm("#5F676C".substring(1),"ffffff",.2+(1+Math.sin(performance.now()/250))/2*.8):"#5F676C",o.outerSides,u,c,h,o.width*a),$g(m,p,a*o.width,u,o.tank.barrels,c,h),yg&&Ef){var y=t+(-o.offsetY*Math.sin(r)+o.offsetX*Math.sin(r+Gg))*a,v=n-(o.offsetX*Math.cos(r+Gg)+-o.offsetY*Math.cos(r))*a,b={x:xh.width/2+(y-Rh)/Dh,y:xh.height/2+(v-Nh)/Dh,r:o.width*a/Dh};Ly(nh,b)&&Of.push({type:"gadget",index:e,stack:ff(vg).slice(0,-1)})}if(Tg(m,p,o.width*a,o.selected?Sm(g.substring(1),"ffffff",.2+(1+Math.sin(performance.now()/250))/2*.8):g,o.sides,u,c,h),jg(m,p,u,a*o.width,g,o.tank.layers,s,l,d,c,h),Wg(m,p,a*o.width,u,o.tank.gadgets,g,s,l,d,c,h),yg&&Ef&&(vg=f),oo&&o.selected){var w=c?Dh:1,x=xh.width/2+(m-Rh)/w,k=xh.height/2+(p-Nh)/w;if(1==o.rotationType&&Ur.showAutoCannonRangeGuideLines){var S=(30*o.minDistance||0)+a,M=(30*o.maxDistance||0)+a;Ur.showTankSectionFrontGuideLines&&fg(x,k,u,"#ffffff"),o.maxSpread>0&&o.maxSpread<360&&0==o.spreadDetection||(S==M&&S>0?hg(x,k,S/w,"#ffffff"):(S>0&&hg(x,k,S/w,"#00ff00"),M>0&&hg(x,k,M/w,"#ff0000"))),o.maxSpread>0&&o.maxSpread<360&&(0==o.spreadDetection?S==M&&S>0?(fg(x,k,u+lr(o.maxSpread/2),"#ffffff",S/w),fg(x,k,u-lr(o.maxSpread/2),"#ffffff",S/w),mg(x,k,S/w,u-lr(o.maxSpread/2),u+lr(o.maxSpread/2),"#ffffff")):(fg(x,k,u+lr(o.maxSpread/2),"#ff0000",(M-S)/w,S/w),fg(x,k,u-lr(o.maxSpread/2),"#ff0000",(M-S)/w,S/w),mg(x,k,M/w,u-lr(o.maxSpread/2),u+lr(o.maxSpread/2),"#ff0000"),fg(x,k,u+lr(o.maxSpread/2),"#00ff00",S/w),fg(x,k,u-lr(o.maxSpread/2),"#00ff00",S/w),mg(x,k,S/w,u-lr(o.maxSpread/2),u+lr(o.maxSpread/2),"#00ff00")):(fg(x,k,u+lr(o.maxSpread/2),"#ffffff"),fg(x,k,u-lr(o.maxSpread/2),"#ffffff")))}else if(2==o.rotationType&&Ur.showRotatingTankSectionGuideLines&&o.rotationSpeed){Ur.showTankSectionFrontGuideLines?(fg(x,k,u,"#ffffff"),mg(x,k,o.width*a/w+10,u+lr(30),u-lr(30),"#ffffff")):hg(x,k,o.width*a/w+10,"#ffffff");for(var T=performance.now(),_=8+Math.floor((o.width*a/w+10-30)/10),z=0;z<_;z++){var C=z/_*Math.PI*2+1.2*T/3e3*o.rotationSpeed;Ur.showTankSectionFrontGuideLines&&!xr(C,u+lr(30),u-lr(30))||gg(x,k,o.width*a/w+10,C,-Math.sign(o.rotationSpeed)*lr(45),6.5,"#ffffff")}if(Ur.showTankSectionFrontGuideLines)for(var E=0,L=[u+lr(30),u-lr(30)];E<L.length;E++){var I=L[E];gg(x,k,o.width*a/w+10,I,-Math.sign(o.rotationSpeed)*lr(45),8,"#ffffff")}}else if(3==o.rotationType&&Ur.showRotatingTankSectionGuideLines&&o.rotationSpeed){var A=performance.now(),O=8+Math.floor((o.width*a/w+10-30)/10),B=Math.abs(o.maxRotation)||0;if(B){fg(x,k,u+B/2,"#ffffff"),fg(x,k,u-B/2,"#ffffff"),mg(x,k,o.width*a/w+10,u-B/2,u+B/2,"#ffffff");for(var D=0,P=[u-B/2,u+B/2];D<P.length;D++){var R=P[D];gg(x,k,o.width*a/w+10,R,-Math.sign(o.rotationSpeed)*lr(45),8,"#ffffff")}}else if(Ur.showTankSectionFrontGuideLines){fg(x,k,u,"#ffffff"),mg(x,k,o.width*a/w+10,u+lr(30),u-lr(30),"#ffffff");for(var N=0,j=[u+lr(30),u-lr(30)];N<j.length;N++){var F=j[N];gg(x,k,o.width*a/w+10,F,-Math.sign(o.rotationSpeed)*lr(45),8,"#ffffff")}}else hg(x,k,o.width*a/w+10,"#ffffff");for(var U=0;U<O;U++){var W=U/O*Math.PI*2+1.2*A/3e3*o.rotationSpeed;(B?xr(W,u-B/2,u+B/2):!Ur.showTankSectionFrontGuideLines||xr(W,u+lr(30),u-lr(30)))&&gg(x,k,o.width*a/w+10,W,-Math.sign(o.rotationSpeed)*lr(45),6.5,"#ffffff")}}else 4==o.rotationType?(Ur.showTankSectionFrontGuideLines&&fg(x,k,u,"#ffffff"),o.maxSpread>0&&o.maxSpread<360&&Ur.showOtherTankSectionGuideLines&&(fg(x,k,u+lr(o.maxSpread/2),"#ffffff"),fg(x,k,u-lr(o.maxSpread/2),"#ffffff"))):Ur.showTankSectionFrontGuideLines&&fg(x,k,u,"#ffffff")}}function $g(e,t,n,a,r,o,i=1){for(var s=0;s<r.length;s++){var l=r[s];Xg(s,e,t,n,a+l.rot,l.offset,l.distance,l.width,l.length,l.animTime,null==l.visualType?l.type:l.visualType,o,1==l.hideBorder?0:i,l.selected,l.color)}}var Gg=Math.PI/2;function Xg(e,t,n,a,r,o,i,s,l,d,c,u){var f,h,m=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,p=arguments.length>13?arguments[13]:void 0,g=arguments.length>14?arguments[14]:void 0,y=u?Dh:1,v=l*(1-.2*Math.max(0,d||0));u?(f=xh.width/2+(t-Rh)/y,h=xh.height/2+(n-Nh)/y):(f=t,h=n);var b=null==g?"#999999":wm(0,g);switch(Ih.lineJoin="round",Ih.fillStyle=p?Sm(b.substring(1),"ffffff",.2+(1+Math.sin(performance.now()/250))/2*.8):b,m&&(Ih.lineWidth=5*m/y,Ih.strokeStyle=km(Ih.fillStyle)),Ih.beginPath(),Ih.translate(f,h),Ih.rotate(r),Ih.translate(o*a/y,-i*a/y),c){case 0:Ih.rect(-1*s*a/y,-2*v*a/y,s*a*2/y,2*a*v/y);break;case 1:Qg(-1*s*a/y,0/y,s*a*2/y,-2*a*v/y,s*a/y);break;case 2:Ih.rect(-.5*s*a/y,-1.5*v*a/y,s*a/y,1.5*a*v/y),Ih.fill(),m&&Ih.stroke(),Qg(-1*s*a/y,-1.5*a*v/y,s*a*2/y,-2*a*v/y,s*a/y);break;case 3:Ih.rect(-s*a/y,-1.33333333333*v*a/y,s*a*2/y,1.33333333333*a*v/y),Ih.fill(),m&&Ih.stroke(),Ih.rect(-.7*s*a/y,-1.3333333333*v*a/y,1.4*s*a/y,-.3333333333*a*v/y),Ih.fill(),m&&Ih.stroke(),Ih.rect(-s*a/y,-1.66666666666666*v*a/y,s*a*2/y,-.3333333333*a*v/y);break;case 4:Qg(-1*s*a/y,0/y,s*a*2/y,-1.3333333333*a*v/y,s*a/y),Ih.rect(-.7*s*a/y,-1.3333333333*v*a/y,1.4*s*a/y,-.3333333333*a*v/y),Ih.fill(),m&&Ih.stroke(),Qg(-.5*s*a/y,-1.66666666666666*v*a/y,s*a/y,-2*a*v/y,s*a*2/y);break;case 5:Qg(-1*s*a/y,0/y,s*a*2/y,-1.3333333333*a*v/y,s*a/y),Ih.rect(-.7*s*a/y,-1.3333333333*v*a/y,1.4*s*a/y,-.3333333333*a*v/y),Ih.fill(),m&&Ih.stroke(),Qg(-1*s*a/y,-1.66666666666666*v*a/y,2*s*a/y,-2*a*v/y,s*a/y);break;case 6:Qg(-.5*s*a/y,0/y,s*a*1/y,-2*a*v/y,s*a*2/y);break;case 7:Ih.rect(-s*a/y,-1.33333333333*v*a/y,s*a*2/y,1.33333333333*a*v/y),Ih.fill(),m&&Ih.stroke(),Qg(-1*s*a/y,-1.33333333333*v*a/y,2*s*a/y,-1.6666666666666*a*v/y,s*a/y),Ih.rect(-s*a/y,-1.66666666666666*v*a/y,s*a*2/y,-.3333333333*a*v/y);break;case 8:Ih.rect(-.5*s*a/y,-1.33333333333*v*a/y,s*a/y,1.33333333333*a*v/y),Ih.fill(),m&&Ih.stroke(),Qg(-1*s*a/y,-1.33333333333*v*a/y,2*s*a/y,-1.6666666666666*a*v/y,s*a/y),Ih.rect(-s*a/y,-1.66666666666666*v*a/y,s*a*2/y,-.3333333333*a*v/y);break;case 9:Qg(-.5*s*a/y,0/y,s*a/y,-1.3333333333*a*v/y,s*a*2/y),Ih.fill(),m&&Ih.stroke(),Ih.rect(-.6666666666666*s*a/y,-1.3333333333*v*a/y,1.3333333333*s*a/y,-.3333333333*a*v/y),Ih.fill(),m&&Ih.stroke(),Qg(-1*s*a/y,-1.66666666666666*v*a/y,2*s*a/y,-2*a*v/y,s*a/y);break;case-1:!function(e,t,n,a){Ih.lineJoin="round",Ih.beginPath(),Ih.moveTo(e-a/4,t),Ih.lineTo(e+.75*a,t),Ih.lineTo(e+a/4,t+n),Ih.closePath()}(-.5*s*a/y,0/y,-2*a*v/y,s*a*2/y),Ih.fill(),m&&Ih.stroke();break;case-2:!function(e,t,n,a){Ih.lineJoin="round",Ih.beginPath(),Ih.moveTo(e+a/4,t),Ih.lineTo(e+.75*a,t+n),Ih.lineTo(e-a/4,t+n),Ih.closePath()}(-.5*s*a/y,0/y,-2*a*v/y,s*a*2/y),Ih.fill(),m&&Ih.stroke()}if(Ih.fill(),m&&Ih.stroke(),Ih.setTransform(1,0,0,1,0,0),yg&&Ef){var w=v,x=i+w,k=o,S=t+(x*Math.sin(r)+k*Math.sin(r+Gg))*a,M=n-(k*Math.cos(r+Gg)+x*Math.cos(r))*a,T=s*a*2,_=w*a*2,z={x:xh.width/2+(S-Rh)/y,y:xh.height/2+(M-Nh)/y,height:_/y,width:T/y,rot:r};(function(e,t){var n={x:e.x-t.x,y:e.y-t.y},a={width:t.width,height:t.height,x:0,y:0};return function(e,t,n){var a=Math.cos(n),r=Math.sin(n),o=a*(t.x-e.x)+r*(t.y-e.y)+e.x,i=a*(t.y-e.y)-r*(t.x-e.x)+e.y;t.x=o,t.y=i}(a,n,t.rot),Ay(n,a)})(nh,z)&&Of.push({type:"barrel",index:e,stack:ff(vg)})}}function qg(e,t,n,a,r,o,i=0,s=0){n<2*r&&(r=n/2),a<2*r&&(r=a/2),e-=n/2,t-=a/2,Ih.beginPath(),Ih.moveTo(e+r,t),Ih.arcTo(e+n,t,e+n,t+a,r),Ih.arcTo(e+n,t+a,e,t+a,r),0!=i&&(i=Math.min(i,n-2*r),Ih.lineTo(e+n/2+i,t+a),Ih.lineTo(e+n/2,t+a+s),Ih.lineTo(e+n/2-i,t+a)),Ih.arcTo(e,t+a,e,t,r),Ih.arcTo(e,t,e+n,t,r),Ih.closePath(),Ih.fillStyle=o,Ih.fill()}function Zg(e,t,n,a,r){n<2*r&&(r=n/2),a<2*r&&(r=a/2),e-=n/2,t-=a/2,Ih.beginPath(),Ih.moveTo(e+r,t),Ih.arcTo(e+n,t,e+n,t+a,r),Ih.arcTo(e+n,t+a,e,t+a,r),Ih.arcTo(e,t+a,e,t,r),Ih.arcTo(e,t,e+n,t,r),Ih.closePath()}function Vg(e,t,n,a,r,o){Ih.lineJoin="round",Ih.beginPath(),Ih.arc(e,t,Math.abs(n),0,2*Math.PI,!1),a&&(Ih.fillStyle=a,Ih.fill()),o&&(Ih.lineWidth=o,Ih.strokeStyle=r,Ih.stroke())}function Jg(e,t,n,a,r){var o=n/2,i=a/2;Ih.beginPath();var s=!1;function l(){var n=d/4*Math.PI*2+r,a=Math.cos(n),l=Math.sin(n);function c(n,r){var o=e+n*a-r*l,i=t+n*l+r*a;s?Ih.lineTo(o,i):Ih.moveTo(o,i),s=!0}c(i,i),c(i,o),c(-i,o),c(-i,i)}for(var d=0;d<4;d++)l()}function Kg(e,t,n,a){var r=!(arguments.length>4)||void 0===arguments[4]||arguments[4];Ih.beginPath(),Ih.arc(e,t,n,0,2*Math.PI,!1),Ih.fillStyle=a,Ih.fill(),r&&(Ih.strokeWidth=10,Ih.strokeStyle="#ffffff",Ih.stroke())}function Qg(e,t,n,a,r){Ih.lineJoin="round",Ih.beginPath(),Ih.moveTo(e+(n-r)/2,t),Ih.lineTo(e+n-(n-r)/2,t),Ih.lineTo(e+n,a),Ih.lineTo(e,a),Ih.closePath()}function ey(e,t,n,a,r,o,i,s,l){Ih.lineJoin="round",Ih.beginPath(),Ih.translate(e,t),Ih.rotate(l),r%2!=0&&Ih.rotate(-90*Math.PI/180),Ih.moveTo(n*Math.cos(0),n*Math.sin(0)),Ih.lineTo(a*Math.cos(1*Math.PI/r),a*Math.sin(1*Math.PI/r));for(var d=1;d<=r;d+=1)Ih.lineTo(n*Math.cos(2*d*Math.PI/r),n*Math.sin(2*d*Math.PI/r)),Ih.lineTo(a*Math.cos(2*(d+.5)*Math.PI/r),a*Math.sin(2*(d+.5)*Math.PI/r));Ih.fillStyle=o,Ih.fill(),s&&(Ih.lineWidth=s,Ih.strokeStyle=i,Ih.stroke())}function ty(e,t,n,a){var r=a.fadeTime||1,o=a.size,i=a.x,s=a.y,l=a.d,d=1;if(a.fadeType){var c=a.fadeType[1];switch(a.fadeType[0]){case 0:o*=1+.5*(1-r),r<1&&(d=r);break;case 1:o*=r;break;case 2:var u=Math.pow(1-r,2);o*=1+2*(1-r),l+=u*c[0]*4,i+=u*Math.cos(c[1])*2e3,s+=u*Math.sin(c[1])*2e3,r<1&&(d=r);break;case 3:var f=Math.pow(1-r,2);o*=1-f,l+=f*c[0]*4,i=mr(i,c[1],f),s=mr(s,c[2],f)}}!function a(r,o,i,s,l){for(var c=0;c<l.length;c++){var u=l[c];if(2==u.type){var f=1;null!=u.enableFade&&(f=yr(u.enableFade));var h=r+(-u.offsetY*Math.sin(i)+u.offsetX*Math.sin(i+Gg))*s,m=o-(u.offsetX*Math.cos(i+Gg)+-u.offsetY*Math.cos(i))*s,p=(0==u.rotationType?i:0)+u.rot;ry(e+h/Dh,t+m/Dh,p,1*s*u.radius/Dh,u.sides,d*f),ry(e+h/Dh,t+m/Dh,p,1.5*s*u.radius/n/Dh,u.sides,.2*d*f)}if(3==u.type){var g=void 0;switch(u.rotationType){case 0:g=u.baseRot+i;break;case 1:case 4:g=null==u.rot?u.baseRot+i:u.rot;break;case 2:case 3:g=0==u.anchored?null==u.rot?u.baseRot+i:u.baseRot+i+u.rot:null==u.rot?u.baseRot:u.rot;g+=2*Math.PI+1.2*performance.now()/3e3*u.rotationSpeed}a(r+(u.offsetX*Math.sin(1.57079633-i)+u.offsetY*Math.cos(i+1.57079633))*s,o+(u.offsetY*Math.cos(i)+u.offsetX*Math.sin(-i+Math.PI))*s,g,u.width*s,u.tank.gadgets)}}}(i,s,l,o,a.gadgets)}function ny(e,t,n,a){var r=a.fadeTime||1,o=a.size,i=a.x,s=a.y,l=a.d,d=performance.now(),c=1-1/(a.radiant+.5);if(a.radiant>2&&(c=1),a.fadeType){var u=a.fadeType[1];switch(a.fadeType[0]){case 0:o*=1+.5*(1-r),r<1&&(c*=r);break;case 1:o*=r;break;case 2:var f=Math.pow(1-r,2);o*=1+2*(1-r),l+=f*u[0]*4,i+=f*Math.cos(u[1])*2e3,s+=f*Math.sin(u[1])*2e3,r<1&&(c*=r);break;case 3:var h=Math.pow(1-r,2);o*=1-h,l+=h*u[0]*4,i=mr(i,u[1],h),s=mr(s,u[2],h)}}if(ry(e+i/Dh,t+s/Dh,l,Math.max(o,1.2*o/n)/Dh,a.sides,c),a.radiant>2){if(a.radiant>3){var m=Math.max(1.5+a.radiant/5+.06*(1+Math.sin(d/800*((1+a.radiant)/2)))*a.radiant,.1);ry(e+i/Dh,t+s/Dh,20*Math.cos(d/25e3)*(1+a.radiant)/2,o*m*(1+(a.outerSize||0))/Dh,-3,c,.4*o/Dh)}var p=2/((a.radiant+2)/5);ry(e+i/Dh,t+s/Dh,d/2e3*(1+a.radiant)/2,(o+(a.outerSize||0)*o)*(Math.cos(d/500+Math.PI)/p+1)/Dh,-6,c),ry(e+i/Dh,t+s/Dh,-d/2e3*(1+a.radiant)/2,(o+(a.outerSize||0)*o)*(Math.cos(d/500)/p+1)/Dh,-6,c)}if(c*=1-.7/((2+a.radiant)/3),a.radiant>1){var g=Math.max(1.2+.1*(1+Math.sin(d/800*((2+a.radiant)/4)))*a.radiant,.1);ry(e+i/Dh,t+s/Dh,l,o*g*2*(1+(a.outerSize||0))/Dh,a.outerSize>0?a.outerSides:a.sides,c)}}function ay(e,t,n,a,r,o,i){var s=Ih.globalAlpha;Ih.globalAlpha=i,Ih.globalCompositeOperation="destination-out",Ih.lineJoin="round",Ih.lineWidth=r/2,Ih.translate(e,t),Ih.rotate(n-lr(90)),Ih.beginPath(),Ih.moveTo(0,o/2),Ih.lineTo(a,r/2),Ih.lineTo(a,r/-2),Ih.lineTo(0,o/-2),Ih.fill(),Ih.stroke(),Ih.setTransform(1,0,0,1,0,0),Ih.globalCompositeOperation="source-over",Ih.globalAlpha=s}function ry(e,t,n,a,r,o,i){null==i&&(i=a/2),0==r?oy(e,t,a,o):r>0?function(e,t,n,a,r,o){var i=Ih.globalAlpha;Ih.globalAlpha=o,Ih.globalCompositeOperation="destination-out",Ih.beginPath(),Ih.translate(e,t),Ih.rotate(n),r%2!=0&&Ih.rotate(-90*Math.PI/180),Ih.moveTo(a*Math.cos(0),a*Math.sin(0));for(var s=1;s<=r+1;s+=1)Ih.lineTo(a*Math.cos(2*s*Math.PI/r),a*Math.sin(2*s*Math.PI/r));Ih.fill(),Ih.setTransform(1,0,0,1,0,0),Ih.globalCompositeOperation="source-over",Ih.globalAlpha=i}(e,t,n,a,r,o):function(e,t,n,a,r,o,i){var s=Ih.globalAlpha;Ih.globalAlpha=i,Ih.globalCompositeOperation="destination-out",Ih.beginPath(),Ih.translate(e,t),Ih.rotate(n),r%2!=0&&Ih.rotate(-90*Math.PI/180),Ih.moveTo(a*Math.cos(0),a*Math.sin(0)),Ih.lineTo(o*Math.cos(1*Math.PI/r),o*Math.sin(1*Math.PI/r));for(var l=1;l<=r;l+=1)Ih.lineTo(a*Math.cos(2*l*Math.PI/r),a*Math.sin(2*l*Math.PI/r)),Ih.lineTo(o*Math.cos(2*(l+.5)*Math.PI/r),o*Math.sin(2*(l+.5)*Math.PI/r));Ih.fill(),Ih.setTransform(1,0,0,1,0,0),Ih.globalCompositeOperation="source-over",Ih.globalAlpha=s}(e,t,n,a,-r,i,o)}function oy(e,t,n,a){var r=Ih.globalAlpha;Ih.globalAlpha=a,Ih.globalCompositeOperation="destination-out",Ih.beginPath(),Ih.arc(e,t,n,0,2*Math.PI,!0),Ih.fill(),Ih.globalCompositeOperation="source-over",Ih.globalAlpha=r}function iy(e,t,n,a,r,o){var i=Ih.globalAlpha;Ih.globalAlpha=o,Ih.globalCompositeOperation="destination-out",Ih.beginPath(),Ih.translate(e,t),Ih.rotate(r),Ih.rect(-n,-a,2*n,2*a),Ih.fill(),Ih.setTransform(1,0,0,1,0,0),Ih.globalCompositeOperation="source-over",Ih.globalAlpha=i}function sy(e=!1){var t,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];zh.clearRect(0,0,vh.width,vh.height),Ch.clearRect(0,0,bh.width,bh.height);var a=xh.width/2-Rh/Dh,r=xh.height/2-Nh/Dh;t=e?(ml[sh<.5?ih:oh]||ml.default).dimension:ol[rh]||il,dh=t;var o=t.visual;if(Ur.showAmbientParticles){var i,s=o.particles,l=1.2*Ph,d=hf(s);try{for(d.s();!(i=d.n()).done;)for(var c=i.value,u=Math.min(Nr,Ph*Ph*c.spawnrate*jr),f=Math.random();f<u;f+=Math.random()){var h=lr(Py(c.d.min,c.d.max)),m=Py(c.speed.min,c.speed.max);Bg(Rh+Math.random()*l-l/2,Nh+Math.random()*l-l/2,m*Math.sin(h),m*Math.cos(h),Py(c.size.min,c.size.max),Math.random()*Math.PI*2,Math.round(Py(c.sides.min,c.sides.max)),zm(c.color.min,c.color.max,Math.random()),Py(c.lifetime.min,c.lifetime.max),Py(c.transparency.min,c.transparency.max),c.radiant?1:0)}}catch(e){d.e(e)}finally{d.f()}}Ih.fillStyle=o.backgroundColor,Ih.fillRect(0,0,Ih.canvas.width,Ih.canvas.height);var p=5/Dh;if(p>.3){var g=o.gridSize/Dh,y=Math.round(a/g)*g,v=Math.round(r/g)*g;Ih.lineWidth=p,Ih.strokeStyle=o.gridColor,Ih.beginPath();for(var b=a;b<Ih.canvas.width+a;b+=g)Ih.moveTo(b-y,0),Ih.lineTo(b-y,Ih.canvas.height);for(var w=r;w<Ih.canvas.height+r;w+=g)Ih.moveTo(0,w-v),Ih.lineTo(Ih.canvas.width,w-v);Ih.closePath(),Ih.stroke()}n&&function(e,t,n){for(var a=0;a<t.length;a++){var r=t[a];Ih.fillStyle=wm(0,r.team,0,0)+"29";var o=r.width*Uh,i=r.height*Uh;Ih.fillRect(xh.width/2-(-r.x*Uh+Rh+o/2)/Dh,xh.height/2-(-r.y*Uh+Nh+i/2)/Dh,o/Dh,i/Dh),Is&&Ur.showHitboxes&&pg(xh.width/2-(-r.x*Uh+Rh+o/2)/Dh,xh.height/2-(-r.y*Uh+Nh+i/2)/Dh,o/Dh,i/Dh,"#ffffff")}Ih.fillStyle=e;for(var s=0;s<n.length;s++){var l=n[s],d=l.width*Uh,c=l.height*Uh;Ih.fillRect(xh.width/2-(-l.x*Uh+Rh+d/2)/Dh,xh.height/2-(-l.y*Uh+Nh+c/2)/Dh,d/Dh,c/Dh),Is&&Ur.showHitboxes&&pg(xh.width/2-(-l.x*Uh+Rh+d/2)/Dh,xh.height/2-(-l.y*Uh+Nh+c/2)/Dh,d/Dh,c/Dh,"#00ff00")}Ih.fillRect(0,xh.height/2-(Nh+Uh)/Dh,xh.width/2-(Rh+Uh)/Dh,2*Uh/Dh),Ih.fillRect(xh.width,xh.height/2-(Nh+Uh)/Dh,(-Rh+Uh)/Dh-xh.width/2,2*Uh/Dh),Ih.fillRect(0,0,xh.width,xh.height/2-(Nh+Uh)/Dh),Ih.fillRect(0,xh.height,xh.width,(-Nh+Uh)/Dh-xh.height/2),Is&&Ur.showHitboxes&&pg(xh.width/2-(Rh+Uh)/Dh,xh.height/2-(Nh+Uh)/Dh,2*Uh/Dh,2*Uh/Dh,"#00ff00")}(t.visual.wallColor||"#00000029",t.bases,t.walls)}function ly(e){if(!oo){var t=120;if(zb)for(var n=0;n<2;n++)for(var a=0==n,r=xh.width/2,o=a?nv:av,i=0;i<o.length;i++){var s=o[i],l=0,d=0;if(s.showing&&s.offset>.2){for(var c=Math.min(4,s.length),u=0;u<s.length;u++){if(Ay(e,{x:r+400*(1==c?0:l/(c-1)-.5),y:475*s.offset-400+0+120*d,width:100,height:100}))return{weapon:a,i:u,set:i};4==++l&&(l=0,d++,c=Math.min(4,s.length-u-1))}if(d+=l>0?1:0,l=0,Ay(e,{x:r,y:475*s.offset-400+0-60+120*d+30,width:100,height:40}))return{weapon:a,i:-1,set:i}}}else for(var f=0;f<2;f++){var h,m=0==f;h=m?0:xh.width;for(var p=xh.height,g=m?nv:av,y=0;y<g.length;y++){var v=g[y],b=0,w=0;if(v.showing&&v.offset>.2){for(var x=0;x<v.length;x++){if(v[x],Ay(e,{x:m?h+475*v.offset-400+t*b:h-(475*v.offset-400)-t*b,y:p-200-t*w,width:100,height:100}))return{weapon:m,i:x,set:y};3==++b&&(b=0,w++)}if(w+=b>0?1:0,b=0,Ay(e,{x:m?h+475*v.offset-400+t*b:h-(475*v.offset-400)-t*b,y:p-200-t*w+30,width:100,height:40}))return{weapon:m,i:-1,set:y}}}}}return!1}function dy(e){if(!oo)if(zb){var t=xh.width/2,n=0,a=0;if(Um>.2)for(var r=400*Um-400,o=Math.min(4,Nm.length),i=0;i<Nm.length;i++){if(Nm[i],Ay(e,{x:t+400*(1==o?0:n/(o-1)-.5),y:0+r+120*a+75,width:100,height:100}))return i+1;4==++n&&(n=0,a++,o=Math.min(4,Nm.length-i-1))}}else if(Qy>0){for(var s=0+(ro?60:0),l=xh.height,d=0;d<4;d++)if(Jy[(u=4-d)-1]<15&&Iy(e,{x:s+20+250-15,y:l-20-32*d-15,width:30,height:30}))return u;s=xh.width;for(var c=0;c<4;c++){var u;if(Jy[(u=4-c+4)-1]<15&&Iy(e,{x:s-20-250-15,y:l-20-32*c-15,width:30,height:30}))return u}}return null}function cy(e){if(zp<.2)return null;var t=xh.width/2,n=xh.height/2,a=_p.length,r=2*Math.PI/a,o=Math.sqrt(Math.pow(e.x-t,2)+Math.pow(e.y-n,2)),i=Math.atan2(e.y-n,e.x-t),s=Math.floor(Cr(i-Math.PI/2)/r);if(s>=a)return null;var l=(1+.1*_p[s].lerping)*zp,d=250*l;if(o<d)return{type:0,value:s};if(_p[s].add)return null;var c=s*r+Math.PI/2,u=Math.min(d*r*.45,.08*d),f=mr(d,d/l*zp,.5)+2*u,h=t+Math.cos(c+r/2)*f,m=n+Math.sin(c+r/2)*f;return Math.sqrt(Math.pow(e.x-h,2)+Math.pow(e.y-m,2))<1.4*u?{type:1,value:s}:null}var uy=document.createElement("canvas"),fy=uy.getContext("2d"),hy=document.createElement("canvas"),my=hy.getContext("2d"),py=null,gy=1;function yy(e,t=!1){gy=e,Ur.fastTransparency||t?Ih.globalAlpha=gy:(hy.width=Ih.canvas.width,hy.height=Ih.canvas.height,py=Ih,Ih=my)}function vy(){Ur.fastTransparency||((Ih=py).globalAlpha=gy,Ih.drawImage(hy,0,0)),Ih.globalAlpha=1}function by(e,t){var n,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=xy(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0;function s(){}return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw n}}}}function wy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,i,s=[],l=!0,d=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){d=!0,r=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return s}}(e,t)||xy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xy(e,t){if(e){if("string"==typeof e)return ky(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ky(e,t):void 0}}function ky(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Sy={players:0,spectators:0},My={normal:{weapon:{},body:{}},celestial:{weapon:{},body:{}}},Ty=!1,_y=[],zy=[];var Cy={};function Ey(e,t){return(0*e+t)/1}function Ly(e,t){var n=e.x-t.x,a=e.y-t.y;return n*n+a*a<=t.r*t.r}function Iy(e,t){return e.x>t.x&&e.x<t.x+t.width&&e.y<t.y+t.height&&e.y>t.y}function Ay(e,t){return e.x>t.x-t.width/2&&e.x<t.x+t.width/2&&e.y<t.y+t.height/2&&e.y>t.y-t.height/2}function Oy(e,t,n){var a=[n[0]-t[0],n[1]-t[1]],r=[t[0]-e[0],t[1]-e[1]],o=-(a[0]*r[0]+a[1]*r[1])/(Math.pow(a[0],2)+Math.pow(a[1],2));return o>=0&&o<=1?By(o,[0,0],t,n):Dy(By(0,e,t,n))<=Dy(By(1,e,t,n))?t:n}function By(e,t,n,a){return[(1-e)*n[0]+e*a[0]-t[0],(1-e)*n[1]+e*a[1]-t[1]]}function Dy(e){return Math.pow(e[0],2)+Math.pow(e[1],2)}function Py(e,t){return Math.random()*(t-e)+e}var Ry={},Ny={},jy=[],Fy=/(\b(https?):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;function Uy(e){var t,n=[],a=by(e);try{for(a.s();!(t=a.n()).done;){var r,o=wy(t.value,3),i=o[0],s=o[1]||"#ffffff",l=o[2],d=void 0===l||l,c=by(i.split(/(\s+)/));try{function f(){var e=r.value;if(Ur.clickableLinks&&d){var t,a=Math.round(1e7*Math.random()).toString(),o=Math.round(1e7*Math.random()).toString(),i=by(e.replace(Fy,(function(e){return`${a}${o}${e}${a}`})).split(a).filter((function(e){return""!=e})));try{for(i.s();!(t=i.n()).done;){var l=t.value;l.startsWith(o)?n.push({color:10,link:!0,text:l.substring(o.length)}):n.push({color:s,link:!1,text:l})}}catch(e){i.e(e)}finally{i.f()}}else n.push({text:e,link:!1,color:s})}for(c.s();!(r=c.n()).done;)f()}catch(h){c.e(h)}finally{c.f()}}}catch(m){a.e(m)}finally{a.f()}var u="";return n.forEach((function(e){u+=e.text})),{sections:n,fullText:u}}var Wy=!1,Hy=0;function Yy(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e&&Ur.silentTyping||((e!=Wy||e&&performance.now()-Hy>4e3)&&t&&(Hy=performance.now(),db(e)),Wy=e,mh&&(e?$y(mh.id):Gy(mh.id)))}function $y(e){Ur.showTypingIndicators&&(Ny[e]||={time:0,lerping:0},Ny[e].time=8)}function Gy(e,t=!1){Ny[e]&&(Ny[e].time=0,db(!1),t&&(Ny[e].lerping=0))}function Xy(e,t){e in Ry||(Ry[e]=[]);var n=12,a=Ny[e]&&Ny[e].time>0;a?(n=12-.5*Ny[e].lerping,Gy(e,!0),mh&&e==mh.id&&Yy(!1,!1)):!Ur.showTypingIndicators&&mh&&e==mh.id&&Yy(!1,!1),Ry[e].unshift({message:Uy(t),time:n,fromTyping:a,typingFade:a?0:1})}function qy(e){e in Ry&&delete Ry[e],e in Ny&&delete Ny[e]}function Zy(e,t=1){!function(e,t=1){e=Uy(e),jy.unshift({message:e,time:6*t,maxTime:6*t})}([[e,6]],t)}function Vy(){arguments.length>0&&void 0!==arguments[0]&&!arguments[0]||(Ry={}),jy=[],Nf=0,Uf=0,Hf="",Yy(!1)}window.startTyping=$y,window.endTyping=Gy,window.chatMessageThing=Xy,window.addNotification=Zy;var Jy=[8],Ky=[8],Qy=0,ev=[],tv=[],nv=[],av=[];function rv(e){Ty=e}function ov(){var e,t=by(av);try{for(t.s();!(e=t.n()).done;)e.value.showing=!1}catch(e){t.e(e)}finally{t.f()}}function iv(){var e,t=by(nv);try{for(t.s();!(e=t.n()).done;)e.value.showing=!1}catch(e){t.e(e)}finally{t.f()}}var sv=document.getElementById("message-popup"),lv=document.getElementById("message-popup-title"),dv=document.getElementById("message-popup-text");function cv(e,t){var n,a;lv.innerHTML=null===(n=rx(null==e?void 0:e.toString()))||void 0===n?void 0:n.replaceAll("\\n","<br>"),dv.innerHTML=null===(a=rx(null==t?void 0:t.toString()))||void 0===a?void 0:a.replaceAll("\\n","<br>"),sv.classList.remove("hide")}function uv(e,t){var n,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return fv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fv(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0;function s(){}return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw n}}}}function fv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}document.getElementById("ok-button").onclick=function(){sv.classList.add("hide")};var hv,mv=[],pv={},gv=!1;function yv(){gv=!1}function vv(){var e,t;Vy(!1),bv(),Ep=!1,zp=0,Cp=!1;var n=uv(nv);try{for(n.s();!(e=n.n()).done;)e.value.offset=.2}catch(e){n.e(e)}finally{n.f()}var a=uv(av);try{for(a.s();!(t=a.n()).done;)t.value.offset=.2}catch(e){a.e(e)}finally{a.f()}}function bv(){mv=[],pv={},gv=!1,Ag(),nv=nv.filter((function(e){return!e.removed})),av=av.filter((function(e){return!e.removed}))}function wv(e,t,n){var a,r=new Array(t.length),o={},i=uv(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;o[s.id]=s}}catch(e){i.e(e)}finally{i.f()}for(var l=0;l<t.length;l++){var d=t[l];r[l]=xv(o[d.id]||d,d)}return r}function xv(e,t){var n={};return Object.keys(e).forEach((function(a){var r=t[a];if(null!=r)n[a]=r;else switch(a){case"barrels":case"gadgets":case"barrelData":case"gadgetData":n[a]=sr(e[a]);break;case"fadeTime":n[a]=1,e[a]=1;break;default:n[a]=e[a]}})),Object.keys(n).forEach((function(e){switch(e){case"barrels":for(var t=0;t<n.barrels.length;t++)n.barrels[t].animTime=n.barrelData[t].animTime||0;break;case"gadgets":for(var a=0;a<n.gadgets.length;a++){var r=n.gadgets[a],o=n.gadgetData[a];r.animTime=o.animTime,null!=o.rot&&(r.rot=o.rot),null!=o.enabled&&(r.enabled=o.enabled),o.tank&&kv(r.tank,o.tank)}}})),n}function kv(e,t){for(var n=0;n<e.barrels.length;n++)e.barrels[n].animTime=t.barrels[n].animTime||0;for(var a=0;a<e.gadgets.length;a++){var r=e.gadgets[a],o=t.gadgets[a];r.animTime=o.animTime,null!=o.rot&&(r.rot=o.rot),null!=o.enabled&&(r.enabled=o.enabled),o.tank&&kv(r.tank,o.tank)}}function Sv(){return Date.now()-Ur.renderDelay}function Mv(){if(!gv)return{};var e=function(){for(var e=Sv(),t=mv.length-1;t>=0;t--)if(mv[t].t<=e)return t;return-1}(),t=Sv(),n=mv[e],a=mv[e+1]||n;if(mv.splice(0,e),e<0||!pv)pv=mv[mv.length-1];else{var r=Math.min((t-n.t)/(a.t-n.t),1)||0;pv={me:Tv(pv.me,a.me,n.me,r,!0,!1),x:n.x,y:n.y,tanks:zv(pv.tanks,a.tanks,n.tanks,a.removedEntities,r,!0),polygons:zv(pv.polygons,a.polygons,n.polygons,a.removedEntities,r,!0),bullets:zv(pv.bullets,a.bullets,n.bullets,a.removedEntities,r,!0),rifts:Cv(pv.rifts,a.rifts,n.rifts,r),mapSize:mr(pv.mapSize,a.mapSize,r),tickTime:n.tickTime,dt:n.dt,dimension:n.dimension,cameraSizeMultiplier:n.cameraSizeMultiplier}}return pv}function Tv(e,t,n,a){var o=!(arguments.length>4)||void 0===arguments[4]||arguments[4];if(!t)return e;if(e){var i={};if(arguments.length>5&&void 0!==arguments[5]&&arguments[5]&&e.fadeType)if(e.fadeTime)switch(e.fadeType[0]){default:e.fadeTime=mr(e.fadeTime,-.1,.15*hh*60);break;case 3:case 2:e.fadeTime=Math.max(e.fadeTime-3*hh,0);break;case 2:e.fadeTime=Math.max(e.fadeTime-1*hh,0)}else e.fadeTime=1;else e.fadeTime=1;if(o){var s=e.hp/e.maxHP,l=t.hp/t.maxHP;s>l?e.damageTime?i.damageTime=mr(e.damageTime,Math.max(-.2,1-30*(s-l)),.3):i.damageTime=1:e.damageTime?i.damageTime=mr(e.damageTime,1,.3):i.damageTime=1,null!=e.healthBarFade?i.healthBarFade=mr(e.healthBarFade,s<.99&&1==e.fadeTime?1:0,.2):i.healthBarFade=0}return Object.keys(t).forEach((function(o){var s=t[o],l=e[o]||s,d=n&&n[o]||s;switch(o){case"d":i[o]=Ev(d,s,a);break;case"x":case"y":case"hp":case"lifetime":case"maxHP":i[o]=mr(d,s,a);break;case"score":case"totalScore":case"xpToNextLevel":case"size":i[o]=mr(l,s,.1);break;case"barrels":i[o]=d;for(var c=0;c<d.length;c++)d[c]&&s[c]&&(i[o][c].animTime=mr(d[c].animTime,s[c].animTime,a));break;case"gadgets":i[o]=d;for(var u=0;u<d.length;u++)s[u]&&l[u]&&(l[u].animTime&&s[u].animTime&&(i[o][u].animTime=mr(l[u].animTime,s[u].animTime,a)),l[u].rot&&s[u].rot&&(i[o][u].rot=Ev(l[u].rot,s[u].rot,a)),l[u].tank&&s[u].tank&&d[u].tank&&(i[o][u].tank=_v(l[u].tank,s[u].tank,d[u].tank,a)),null!=l[u].enabled&&null!=s[u].enabled&&(null==l[u].enableFade&&(l[u].enableFade=s[u].enabled?1:0),i[o][u].enableFade=l[u].enableFade,s[u].enabled?i[o][u].enableFade=Math.min(1,l[u].enableFade+5*hh):i[o][u].enableFade=Math.max(0,l[u].enableFade-5*hh)));break;case"smoothRatio":i[o]=mr(l[r],e.hp/e.maxHP,.002);break;case"healthBarFade":case"damageTime":break;default:i[o]=d}})),i}}function _v(e,t,n,a){var r={};return Object.keys(t).forEach((function(o){var i=t[o],s=e[o]||i,l=n&&n[o]||i;switch(o){case"barrels":r[o]=l;for(var d=0;d<s.length;d++)s[d]&&i[d]&&(r[o][d].animTime=mr(l[d].animTime,i[d].animTime,a));break;case"gadgets":r[o]=l;for(var c=0;c<l.length;c++)i[c]&&s[c]&&(s[c].animTime&&i[c].animTime&&(r[o][c].animTime=mr(s[c].animTime,i[c].animTime,a)),s[c].rot&&i[c].rot&&(r[o][c].rot=Ev(s[c].rot,i[c].rot,a)),s[c].tank&&i[c].tank&&l[c].tank&&(r[o][c].tank=_v(s[c].tank,i[c].tank,l[c].tank,a)),null!=s[c].enabled&&null!=i[c].enabled&&(null==s[c].enableFade&&(s[c].enableFade=i[c].enabled?1:0),r[o][c].enableFade=s[c].enableFade,i[c].enabled?r[o][c].enableFade=Math.min(1,s[c].enableFade+5*hh):r[o][c].enableFade=Math.max(0,s[c].enableFade-5*hh)));break;default:r[o]=l}})),r}function zv(e,t,n,a,r,o=!1){if(e){if(t){var i,s,l,d={},c={},u={},f=uv(e);try{for(f.s();!(i=f.n()).done;){var h=i.value;d[h.id]=h,a[h.id]&&(h.fadeType=a[h.id])}}catch(e){f.e(e)}finally{f.f()}var m=uv(t);try{for(m.s();!(s=m.n()).done;){var p=s.value;c[p.id]=p}}catch(e){m.e(e)}finally{m.f()}var g=uv(n);try{for(g.s();!(l=g.n()).done;){var y=l.value;u[y.id]=y}}catch(e){g.e(e)}finally{g.f()}return e.concat(t.filter((function(e){return!d[e.id]}))).map((function(e){return Tv(e,c[e.id]||e,u[e.id]||e,r,o,!0)})).filter((function(e){return!!c[e.id]||!!e.fadeType&&!!(e.fadeTime>0)}))}return e}}function Cv(e,t,n,a){var r,o,i={},s={},l=uv(e);try{for(l.s();!(r=l.n()).done;){var d=r.value;i[d.id]=d}}catch(e){l.e(e)}finally{l.f()}var c=uv(n);try{for(c.s();!(o=c.n()).done;){var u=o.value;s[u.id]=u}}catch(e){c.e(e)}finally{c.f()}if(e){if(t){for(var f=new Array(t.length),h=0;h<t.length;++h){var m=t[h];f[h]=Tv(i[m.id]||m,m,s[m.id]||m,a,!1)}return f}return e}}function Ev(e,t,n){var a=(1-n)*Math.cos(e)+n*Math.cos(t),r=(1-n)*Math.sin(e)+n*Math.sin(t);return Math.atan2(r,a)}function Lv(e){return(Lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Iv(){Iv=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),s=new T(r||[]);return a(i,"_invoke",{value:x(e,n,s)}),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var u={};function f(){}function h(){}function m(){}var p={};l(p,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(_([])));y&&y!==t&&n.call(y,o)&&(p=y);var v=m.prototype=f.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(a,o,i,s){var l=c(e[a],e,o);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==Lv(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){d.value=e,i(d)}),(function(e){return r("throw",e,i,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function x(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return z()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var s=k(i,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=c(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}function k(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var r=c(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function _(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:z}}function z(){return{value:void 0,done:!0}}return h.prototype=m,a(v,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,a,r,o=Promise){var i=new w(d(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),l(v,s,"Generator"),l(v,o,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=_,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;M(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Av(e,t,n,a,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function Ov(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){Av(o,a,r,i,s,"next",e)}function s(e){Av(o,a,r,i,s,"throw",e)}i(void 0)}))}}function Bv(e,t,n){return Dv.apply(this,arguments)}function Dv(){return Dv=Ov(Iv().mark((function e(t,n,a){return Iv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r;n||={};var o={method:a,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)};"GET"==a&&delete o.body,fetch(t,o).catch((function(t){e({error:"Failed to connect to server."})})).then((r=Ov(Iv().mark((function t(n){var a;return Iv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.text();case 2:a=t.sent;try{e(JSON.parse(a))}catch(t){e({error:"Failed to parse response."})}case 4:case"end":return t.stop()}}),t)}))),function(e){return r.apply(this,arguments)})).catch((function(t){e({error:"Failed to parse response."})}))})));case 1:case"end":return e.stop()}}),e)}))),Dv.apply(this,arguments)}function Pv(e,t){return Rv.apply(this,arguments)}function Rv(){return(Rv=Ov(Iv().mark((function e(t,n){return Iv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bv(t,n,"POST"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nv(e){return(Nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jv(){jv=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),s=new T(r||[]);return a(i,"_invoke",{value:x(e,n,s)}),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var u={};function f(){}function h(){}function m(){}var p={};l(p,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(_([])));y&&y!==t&&n.call(y,o)&&(p=y);var v=m.prototype=f.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(a,o,i,s){var l=c(e[a],e,o);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==Nv(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){d.value=e,i(d)}),(function(e){return r("throw",e,i,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function x(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return z()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var s=k(i,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=c(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}function k(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var r=c(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function _(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:z}}function z(){return{value:void 0,done:!0}}return h.prototype=m,a(v,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,a,r,o=Promise){var i=new w(d(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),l(v,s,"Generator"),l(v,o,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=_,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;M(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Fv(e,t,n,a,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}window.triggerEvent=function(e){!function(e){var t={};t=e;var n=mv[mv.length-1];if(n&&n.dimension==t.dimension&&null==n.me==(null==t.me)||(bv(),Dg(),pv=mv[mv.length-1]),gv=!0,0!=mv.length){for(var a={},r=0;r<t.removedEntities.length;r+=3)a[t.removedEntities[r]]=[t.removedEntities[r+1],t.removedEntities[r+2]];t.removedEntities=a;var o=mv[mv.length-1];t.me&&=xv(o.me,t.me),t.tanks=wv(o.tanks,t.tanks,a),t.bullets=wv(o.bullets,t.bullets,a),t.rifts=wv(o.rifts,t.rifts,a),t.polygons=wv(o.polygons,t.polygons,a)}mv.push(t),t.leaderboard&&function(e){for(var t=e[0].map((function(e){return function(e){for(var t={},n=Be.h[e[1]],a=0;a<e.length;a++){var r=e[a];null!=r&&(t[n[a]]=r)}return t}(e)})),n=[],a=function(){var e,a,o,i=t[r],s=zy.find((function(e){return e.id==i.id}));s?n.push((e=s,a=i,o={},Object.keys(e).forEach((function(t){var n=a[t];o[t]=n??e[t]})),o)):n.push(i)},r=0;r<t.length;r++)a();if(e){(_y={entries:n,playerCount:e[1]}).showPlayers=-1!=_y.playerCount,_y.highestScore=0;for(var o=0;o<_y.entries.length;o++){var i=_y.entries[o];i.score>_y.highestScore&&(_y.highestScore=i.score)}for(var s=0;s<_y.entries.length;s++){var l,d=_y.entries[s];if(d.size=1==d.type||d.isCelestial?75:40,1==!d.type&&_y.showPlayers){for(var c=0;c<d.barrels.length;c++)d.barrels[c].animTime=0;for(var u=0;u<d.gadgets.length;u++){var f=d.gadgets[u];f.animTime=0,2==f.type&&(f.enabled=!0)}}d.nameColor=null!==(l=d.nameColor)&&void 0!==l?l:6,d.scoreRatio=d.score/_y.highestScore,d.scoreRatio=Number.isNaN(d.scoreRatio)||!Number.isFinite(d.score)?Number.isFinite(d.score)?0:1:d.scoreRatio,d.fadeTime=0,_y.showPlayers||(d.name=(d.name||"???").replace(/\S/g,"?"),d.radiant=0,d.team=-1,d.nameColor=6),d.score==_y.highestScore&&(d.scoreRatio=1),d.formattedScore=gx(d.score)}}else _y=null;zy=n}(t.leaderboard),t.events&&function(e){for(var t=0;t<e.length;t++){var n=wy(e[t],2),a=n[0],r=n[1];switch(a){case 0:lm(r);break;case 7:dm(r);break;case 2:sm(r);break;case 10:sm(r,!0,!1,.5);break;case 8:sm(r,!0);break;case 9:sm(r,!0,!0);break;case 3:im(r);break;case 4:rm(r);break;case 5:am(r);break;case 6:om(r);break;case 1:Xy(r.id,r.message);break;case 11:qy(r);break;case 12:r[1]?$y(r[0]):Gy(r[0]);break;default:}}}(t.events)}(e)};var Uv=new be;window.msgpack=Uv,Uv.pack();var Wv=Uv.pack;Uv.unpack;var Hv="",Yv="",$v={closed:!0,sendMessage:function(){}};function Gv(){return Xv.apply(this,arguments)}function Xv(){var e;return e=jv().mark((function e(){var t,n,a,r=arguments;return jv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(r.length>0)||void 0===r[0]||r[0],n=performance.now(),null!=hv&&!(n-hv>1e3)){e.next=9;break}return hv=n,e.next=6,Pv(Rb+"/api/serverlist",{});case 6:(a=e.sent).error&&Aw("Could not retrieve server list"),Bw(a,t);case 9:case"end":return e.stop()}}),e)})),Xv=function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){Fv(o,a,r,i,s,"next",e)}function s(e){Fv(o,a,r,i,s,"throw",e)}i(void 0)}))},Xv.apply(this,arguments)}function qv(){$v.closed||$v.close()}function Zv(){$v.closed||$v.forceClose(),setTimeout((function(){}),0)}var Vv="",Jv=!1;function Kv(){Vv="",Jv=!1}var Qv=0,eb=(0,Oe.throttle)(60,(function(e){var t=Math.round(1e3*e)/1e3;Qv!=t&&($v.sendMessage(0,t),window.direction&&window.direction(1e3*t)),Qv=t})),tb=(0,Oe.throttle)(20,(function(e){$v.sendMessage(16,e),window.u.send(["chat",e])}));function nb(e){$v.sendMessage(8,e)}var ab=(0,Oe.debounce)(60,(function(){$v.sendMessage(76,lo)}));window.setUpdateBody=function(e){ab=e};var rb=(0,Oe.debounce)(60,(function(){$v.sendMessage(72,so)}));window.setUpdateWeapon=function(e){rb=e};var ob=(0,Oe.debounce)(20,(function(e){$v.sendMessage(12,e)}));function ib(e,t){$v.sendMessage(4,[e,t])}window.setUpdateMovementInput=function(e){ib=e};var sb=(0,Oe.debounce)(20,(function(e){$v.sendMessage(32,e)})),lb=Oe.throttle(60,(function(e,t){$v.sendMessage(40,[e,t])})),db=Oe.throttle(60,(function(e){$v.sendMessage(44,e),window.u.send(["typing",e])})),cb=[],ub=[{id:"scenexe-io_970x250",minWidth:1404,minHeight:1040,deathScreen:!1},{id:"scenexe-io_300x600",minWidth:1877.2,minHeight:910,deathScreen:!0}];function fb(){try{ub.forEach((function(e){aiptag.cmd.display.push((function(){aipDisplayTag.display(e.id)}))}))}catch(e){}}function hb(){try{ub.forEach((function(e){var t=document.getElementById(e.id);t.classList.remove("hide");var n=Math.min(window.innerWidth/e.minWidth,1),a=Math.min(window.innerHeight/e.minHeight,1),r=Math.min(n,a),o=t.classList.contains("ad-bottom");t.classList.contains("ad-right"),t.style.transform=`translate${o?"X":"Y"}(-50%) scale(${r})`,e.deathScreen||1!=Mw||t.classList.add("hide")}))}catch(e){}}window.addEventListener("resize",(0,Oe.debounce)(40,(function(){hb()})));var mb=document.getElementById("captcha"),pb=null,gb=null;function yb(){gb&&gb(hcaptcha.getResponse(pb))}function vb(){var e=Math.min(window.innerWidth,window.innerHeight)/100*40;mb.style.transform=`scale(${e/303}) translateY(-55%)`}function bb(e){return(bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wb(){wb=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),s=new T(r||[]);return a(i,"_invoke",{value:x(e,n,s)}),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var u={};function f(){}function h(){}function m(){}var p={};l(p,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(_([])));y&&y!==t&&n.call(y,o)&&(p=y);var v=m.prototype=f.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(a,o,i,s){var l=c(e[a],e,o);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==bb(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){d.value=e,i(d)}),(function(e){return r("throw",e,i,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function x(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return z()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var s=k(i,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var l=c(e,t,n);if("normal"===l.type){if(a=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a="completed",n.method="throw",n.arg=l.arg)}}}function k(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var r=c(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function _(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:z}}function z(){return{value:void 0,done:!0}}return h.prototype=m,a(v,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,a,r,o=Promise){var i=new w(d(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),l(v,s,"Generator"),l(v,o,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=_,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;M(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function xb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function kb(e,t,n,a,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}window.addEventListener("resize",(0,Oe.debounce)(40,(function(){vb()}))),vb();var Sb=document.getElementById("chat"),Mb=document.getElementById("chat-input"),Tb=document.getElementById("quick-chat-button"),_b=Tb.children[0],zb=!1,Cb=[],Eb=[],Lb={},Ib=[],Ab=!1,Ob=!1,Bb=0,Db=0,Pb=0,Rb=window.location.origin;function Nb(e){Bb=e}var jb=[],Fb=[],Ub=-1,Wb=0,Hb=!1;function Yb(e){Hb=e}var $b=document.getElementById("game-over-killer"),Gb=document.getElementById("game-over-stats"),Xb=document.getElementById("game-over"),qb=document.getElementById("overlay-canvas");document.getElementById("continue-button");var Zb=document.getElementById("full-changelog"),Vb=document.getElementById("button-settings"),Jb=document.getElementById("form-loading"),Kb=document.getElementById("form-error"),Qb=document.getElementById("button-feedback"),ew=document.getElementById("button-bugs"),tw=document.getElementById("submit"),nw=document.getElementById("cancel"),aw=document.getElementById("popup-input"),rw=document.getElementById("popup-input-small"),ow=document.getElementById("popup"),iw=document.getElementById("popup-title"),sw=document.getElementById("popup-subtitle"),lw=document.getElementById("connecting-text"),dw=document.getElementById("full-connecting-text"),cw=document.getElementById("play-menu"),uw=document.getElementById("respawn-text"),fw=document.getElementById("play-menu-wrapper"),hw=document.getElementById("main-menu"),mw=document.getElementById("play-button"),pw=document.getElementById("background"),gw=document.getElementById("display-name-input"),yw=document.getElementById("ads"),vw=document.getElementById("server-select-dropdown"),bw=document.getElementById("server-select-dropdown-visual"),ww=document.getElementById("server-select-dropdown-visual-shadow"),xw=document.getElementById("server-select-dropdown-visual-text");vw.addEventListener("change",(function(){Bb=vw.selectedIndex,Gw(!0,cr(),!1)})),Tb.onclick=function(){Ep||Bp()},Mb.onfocus=function(){Vw()};var kw=!1;Mb.onblur=function(e){kw?kw=!1:Yy(!1)};var Sw=!1;Mb.onkeydown=function(e){e.repeat||(Sw=!0),Sw?Yy(!0):e.preventDefault()};var Mw=2;function Tw(e){Mw=e}function _w(e=!1){if(e){nf&&Ju("/user",{sessionID:nf},(function(e){}),(function(e){e.error||e.sessionID})),(zb=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))&&(zw(),mx("mobile_unsupported")||Ty||(cv("Mobile support is experimental","Some features may not work properly on this device."),hx("mobile_unsupported",!0)));var t=mx("username");t&&(gw.value=t),window.addEventListener("keydown",cx),document.body.oncontextmenu=function(e){return e.target!=xh||0!=Mw},Mb.style.display="",Tb.style.display="",tm(),Ap(JSON.parse(mx("quick_chat"))||[]),Gv()}var n,a,r;yv(),Array.from(document.getElementsByClassName("hud")).forEach((function(e){e.classList.add("hidden")})),hw.classList.remove("hidden"),pw.classList.remove("hide"),yw.classList.remove("hidden"),lw.classList.remove("hide"),cw.classList.add("hide"),mb.classList.add("hide"),mw.onclick=function(){Zw()},Vb.onclick=function(){Yr()},fb(),hb(),document.getElementById("full-changelog-link").onclick=function(){return Kw(),!1},document.getElementById("exit-changelog").onclick=function(){Qw()},document.getElementById("apply-settings").onclick=function(){Xr(!0)},document.getElementById("cancel-settings").onclick=function(){Xr()},ew.onclick=function(){ex(1)},Qb.onclick=function(){ex(2)},nw.onclick=function(){ex(0)},tw.onclick=function(){!function(){nx.apply(this,arguments)}()},e&&(n=JSON.parse(mx("settings"))||{},a=JSON.parse(mx("keybinds"))||{},r=document.getElementById("settings-scroll"),Object.entries(Fr).forEach((function(e){var t=Br(e,2),a=t[0],o=t[1];if(o.section)Wr[a]=Gr(r,o.name);else{switch(o.type){case 0:Ur[a]=$r(n[a],o.default);var i=ps(r,"div");ps(i,"label").textContent=o.name;var s=ps(i,"label");s.classList.add("switch");var l=ps(s,"input");l.type="checkbox",ps(s,"span").classList.add("switch-button"),Wr[a]=l;break;case 1:Ur[a]=$r(n[a],o.default),(i=ps(r,"div")).classList.add("slider"),ps(i,"label").textContent=o.name;var d=ps(i,"input");d.classList.add("slide"),d.type="range",d.step=o.step,d.min=o.min,d.max=o.max,d.oninput=function(){d.previousElementSibling.textContent=`${o.name} - ${d.value}${o.ending}`},Wr[a]=d}o.hasOwnProperty("onUpdate")&&o.onUpdate(Ur[a])}})),Gr(r,"Keybinds"),Object.entries(Vr).forEach((function(e){var t=Br(e,2),n=t[0],o=t[1];if(o.editable){Jr[n]=$r(a[n],o.default);var i=ps(r,"div");i.classList.add("keybind"),ps(i,"label").textContent=`${o.tankEditor?"TANK EDITOR: ":""}${o.name}${o.control?" (CTRL +)":""}`;var s=Jr[n],l=ps(i,"button");l.textContent=Qr[s],l.value=s,l.addEventListener("click",(function(){var e;qr!=(e=n)?(Zr(),qr=e,Kr[e].classList.add("changing")):Zr()})),Kr[n]=l}})),ps(r,"hr"),new Promise((function(e){fetch("/changelog.txt").then((function(e){return e.text()})).then((function(t){!function(e){for(var t="",n=("CHANGELOG - "+(cb=e.split("\n\r\n"))[0]).split("\n"),a=0;a<n.length;a++)n[a].startsWith("    ")||(t+=""==t?n[a]:"<br />"+n[a]);var r=document.getElementById("changelog");r.children[0].innerHTML=t.replace(/\n/g,"<br />"),r.classList.remove("hide");var o=document.getElementById("subtitle");o.textContent=cb[0].split("-",1)[0].trim(),o.classList.remove("hide"),t="";for(var i=0;i<cb.length;i++){""!=t&&(t+="<br /><br /><hr />");for(var s=cb[i].split("\n"),l=0;l<s.length;l++){var d=0,c="";for(d=0;s[l].startsWith("    ",4*d);d++)c+="&emsp;&emsp;";0==l?t+="<h3>":""!=t&&1!=l&&(t+="<br />"),t+=c+s[l],0==l&&(t+="</h3>")}}document.getElementById("full-changelog").children[0].children[2].innerHTML=t.replace(/\n/g,"<br />")}(t.replace(/\r?\n/g,"\r\n")),e()}))})),window.usingAdBlocker=!1,fetch("https://api.adinplay.com").catch((function(e){window.usingAdBlocker=!0})).finally((function(){window.usingAdBlocker&&(mx("ad_blocker")||Ty||(cv("Please disable your ad blocker","Ads support the game and allow it to keep updating and expanding."),hx("ad_blocker",!0)))})),Gh(),cd({}),od())}function zw(){try{document.documentElement.webkitRequestFullScreen?document.documentElement.webkitRequestFullScreen():document.documentElement.requestFullscreen()}catch(e){}}_w(!0);var Cw=!1,Ew="";function Lw(e){lw.classList.add("hide"),cw.classList.add("hide"),mb.classList.remove("hide"),function(e){gb=e,null==pb?pb=hcaptcha.render(mb,{sitekey:"2e209116-4e8b-4a05-956c-a6b79e1d3103",callback:yb}):hcaptcha.reset(pb)}((function(t){e(t),lw.classList.remove("hide"),mb.classList.add("hide")}))}function Iw(e){Cw=!0,Ew=e,lw.classList.add("hide"),cw.classList.remove("hide"),mb.classList.add("hide"),dw.classList.add("hide"),fw.classList.remove("hide"),Jv||(uw.textContent=""),zb||gw.focus(),""==Vv||Jv||(ex(0),Qw(),Xr(),Op(),vp(),Zw())}function Aw(e=""){qv(!1),document.getElementById("disconnect-text").textContent=e,document.getElementById("disconnect-modal").classList.remove("hide"),document.getElementById("reconnect-button").onclick=function(){window.location.reload()}}function Ow(e=""){Gv(!(arguments.length>1)||void 0===arguments[1]||arguments[1]),Cw=!1,rl(),fm(),vv(),1!=Mw&&3!=Mw&&(Mw=2),hb(),Vv&&(dw.textContent=""==e?"Connecting...":e,dw.classList.remove("hide"),fw.classList.add("hide")),lw.classList.remove("hide"),cw.classList.add("hide"),Xb.classList.add("hide"),qb.classList.add("hide"),3!=Mw&&_w(),Jv&&(Xb.classList.remove("hide"),qb.classList.remove("hide"),hw.classList.add("hidden"),Mw=1)}function Bw(e,t){if(0==e.length){if(2!=Mw)return;Aw("No servers found. The game may be updating.")}var n,a;Cb=e,Eb=[],Lb={},Ib=[];for(var r="",o=0,i=0,s=0;s<Cb.length;s++){var l=Cb[s];o+=l.players,i+=l.spectators,Eb.includes(l.gamemode)||Eb.push(l.gamemode),Ib.includes(l.region)||Ib.push(l.region),Lb[l.gamemode]||=[],Lb[l.gamemode].includes(l.region)||Lb[l.gamemode].push(l.region),r+=`<option style="background-color:${Xw(l.gamemode)}" value="${s}">${qw(l.gamemode)} - ${l.region} - ${l.players} player${1==l.players?"":"s"}</option>`}vw.innerHTML=r,Ab=Eb.length>1;for(var d=-1,c=0;c<Cb.length;c++)Cb[c].address==Ew&&(d=c);if(-1==d){var u=mx("gamemode"),f=mx("region"),h=jw(u,f);if(Cb[h]&&null!=u&&null!=f){var m=Cb[h];Bb=h,Db=Eb.indexOf(m.gamemode),Pb=Lb[m.gamemode].indexOf(m.region)}else{for(var p=1e200,g=0,y=0;y<Cb.length;y++){var v=Cb[y];v.players<p&&(p=v.players,g=y)}var b=Cb[g];Bb=g,b&&(Db=Eb.indexOf(b.gamemode),Pb=Lb[b.gamemode].indexOf(b.region))}}else Bb=d;n=o,a=i,Sy.players=n,Sy.spectators=a,Gw(!Cw&&t)}function Dw(){Db==Eb.length-1?Db=0:Db++,Gw(!0,1)}function Pw(){0==Db?Db=Eb.length-1:Db--,Gw(!0,-1)}function Rw(){Pb==Lb[Eb[Db]].length-1?Pb=0:Pb++,Gw(!0,1)}function Nw(){0==Pb?Pb=Lb[Eb[Db]].length-1:Pb--,Gw(!0,-1)}function jw(e,t){for(var n=[],a=[],r=0;r<Cb.length;r++)Cb[r].gamemode==e&&a.push(r);if(1==a.length)return a[0];if(0==a.length)return 0;n=a,a=[];for(var o=0,i=n;o<i.length;o++){var s=i[o];Cb[s].region==t&&a.push(s)}return 1==a.length?a[0]:0==a.length?n.sort((function(e,t){return Cb[e].players-Cb[t].players}))[0]:a.sort((function(e,t){return Cb[e].players-Cb[t].players}))[0]}window.connectedToGameServer=Iw,window.qk=Ow,window.onRecievedServers=Bw,window.qM=Pw,window.qZ=Dw,window.qq=Gw;var Fw,Uw,Ww,Hw=null;function Yw(e,t=1){e!=Pb&&(Pb=e,Gw(!0,t))}function $w(e,t=1){e!=Db&&(Db=e,Gw(!0,t))}function Gw(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=Hw;Hw||=Cb[Bb],n&&(Bb=jw(Eb[Db],(Lb[Eb[Db]]||{})[Pb]));var r=Cb[Bb];if(!r)return xw.innerText="Connecting...",bw.style.backgroundColor="#c0c0c0",void(ww.style.backgroundColor=km("#c0c0c0"));vw.selectedIndex=Bb,xw.innerText=vw.options[Bb].innerText,bw.style.backgroundColor=Xw(Cb[Bb].gamemode),ww.style.backgroundColor=km(Xw(Cb[Bb].gamemode));var o=Hw.gamemode!=r.gamemode,i=Hw.region!=r.region;a||(o=!0,i=!0),Db=Eb.indexOf(r.gamemode),Pb=Lb[r.gamemode].indexOf(r.region),Ob=Lb[r.gamemode].length>1,hx("gamemode",r.gamemode),hx("region",r.region),r&&Mw>=2&&e&&(o&&ch(r.gamemode,t),i&&function(e,t){op=e,sp=t,ip=0}(Hw.region,t),Kv(),r.address,$v.closed||($v.forceClose(),Ow(Yv,!1))),Hw=r}function Xw(e){return Be.b[e]||Be.teamColors[0]}function qw(e){return Be.l[e]||"???"}function Zw(e){window.start&&(e=!0);try{window.start()}catch(e){}if(!0!==e&&(e=!1),2==Mw||e)(e||0==Wb&&Cw&&!Hb)&&(gw.blur(),Vh(),Cs=!1,Es=!1,Ls=!1,As=!1,zb&&zw(),function(e){$v.sendMessage(80,e),function(){for(var e=0;e<8;e++)Jy[e]=0,Ky[e]=0;Qy=0,ov(),iv()}()}(gw.value),vv(),hx("username",gw.value),hw.classList.add("hidden"),pw.classList.add("hide"),yw.classList.add("hidden"),yv(),window.onbeforeunload=function(){return"Leaving now may result in lost progress."},qf=!1,cm=!0,um=0,ro&&co.classList.remove("hidden"),tm(),setTimeout((function(){tm()}),100),Mw=0,setTimeout((function(){mx("tut_move")||Ty||zb||(Zy("Press the WASD or arrow keys to move."),hx("tut_move",!0))}),1e3),Kv()),zb&&zw();else if(1==Mw)Xb.classList.add("hide"),qb.classList.add("hide"),hw.classList.remove("hidden"),zb||gw.focus(),Mw=2,hb();else if(0==Mw)if(Tp)bp.click();else if(Ur.showChat&&Gf)if(Mb===document.activeElement){var t=Mb.value.trim();""!=t&&(jb.push(Mb.value),tb(t),t.startsWith("/")||(kw=!0)),Mb.blur(),Mb.value="",Ub=-1}else Vw()}function Vw(){Mb.focus(),al(),qs(),Vs(),Ub=-1,Sw=!1,Yy(!0)}window.onPlayButtonClicked=Zw;var Jw=!1;function Kw(){Zb.classList.remove("hide"),Hb=!0,ox("changelog"),lx("changelog"),Jw=!0}function Qw(){Zb.classList.add("hide"),Hb=!1,ix(),sx(),Jw=!1}function ex(e){if(Wb=e,0==e)ow.classList.add("hide"),ix(),sx();else{ow.classList.remove("hide"),Kb.textContent="",Jb.classList.add("hide"),aw.value="",rw.value="";var t=2==e?"Submit Feedback":"Report Bug",n=2==e?"Feedback:":"Explain the bug in detail:";iw.textContent=t,sw.textContent=n,ox(2==e?"submit feedback":"report bug"),lx(2==e?"submit-feedback":"report-bug")}}var tx=!1;function nx(){return(e=wb().mark((function e(){var t,n,a,r;return wb().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!tx){e.next=2;break}return e.abrupt("return");case 2:if(0==Wb){e.next=27;break}if(Kb.textContent="",""!=aw.value.trim()){e.next=7;break}return Kb.textContent="Enter a message.",e.abrupt("return");case 7:return t="Unknown OS",-1!=navigator.userAgent.indexOf("Win")&&(t="Windows"),-1!=navigator.userAgent.indexOf("Mac")&&(t="MacOS"),-1!=navigator.userAgent.indexOf("Linux")&&(t="Linux"),-1!=navigator.userAgent.indexOf("Android")&&(t="Android"),-1!=navigator.userAgent.indexOf("like Mac")&&(t="iOS"),-1!=navigator.userAgent.indexOf("CrOS")&&(t="ChromeOS"),n="Unknown Browser",-1!=(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))?n="Opera":-1!=navigator.userAgent.indexOf("Edg")?n="Edge":-1!=navigator.userAgent.indexOf("Chrome")?n="Chrome":-1!=navigator.userAgent.indexOf("Safari")?n="Safari":-1!=navigator.userAgent.indexOf("Firefox")?n="Firefox":-1==navigator.userAgent.indexOf("MSIE")&&1!=!!document.documentMode||(n="Internet Explorer"),a={type:Wb,content:aw.value.trim(),extraInfo:rw.value.trim(),username:gw.value.trim(),server:Hv,hub:Rb,browser:n,os:t,userAgent:navigator.userAgent},Jb.classList.remove("hide"),tx=!0,e.next=21,Pv(Rb+"/api/feedback",{data:(o=(0,De.uint8ArrayToB64)(Wv(a)),o.split("").reverse().join(""))});case 21:if(r=e.sent,Jb.classList.add("hide"),tx=!1,!r.error){e.next=27;break}return Kb.textContent=r.error,e.abrupt("return");case 27:ex(0);case 28:case"end":return e.stop()}var o}),e)})),nx=function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){kb(o,a,r,i,s,"next",e)}function s(e){kb(o,a,r,i,s,"throw",e)}i(void 0)}))}).apply(this,arguments);var e}function ax(e){return-1!=="aeiouAEIOU".indexOf(e[0])}function rx(e){return null==e?void 0:e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ox(e){document.title=`${e} - Local Editor`}function ix(){document.title="Local Editor"}function sx(){Fw=void 0,null!=window.location.hash&&-1!=window.location.href.indexOf("#")&&(2==Mw?history.pushState({},document.title,"."):history.replaceState({},document.title,"."))}function lx(e,t=!1){e=e.replace("#",""),t||(Fw="#"+e),window.location.hash=e}function dx(e){Vy(!1),Xr(),Op(),vp(),function(e){_f=function(e){for(var t={},n=Be.d[e[1]],a=0;a<e.length;a++){var r=e[a];null!=r&&(t[n[a]]=r)}return t}(e);for(var t=0;t<_f.gadgets.length;t++){var n=_f.gadgets[t];n.animTime=0,2==n.type&&(n.enabled=!0)}for(var a=0;a<_f.barrels.length;a++)_f.barrels[a].animTime=0}(e.lastTank),Yy(!1),Gv(!e.server),e.stars&&ef(e.stars);var t,n=function(e){for(var t=1,n=100;e>n;)e-=n,n*=1.2,t++;return t}(e.respawnXP);uw.textContent=n>1?`You will respawn at level ${n}`:"",e.server&&function(e,t){ch(0),Hv=e;var n=Cb.findIndex((function(e){return e.address===Hv}));-1!=n&&(Nb(n),Gw(!1)),Jv=!0,Vv=t,Yv="Connecting...",qv()}(e.server.address,e.server.key);var a=function(e){if(0==e.length)return[["nothing",6]];if(1==e.length)return[e[0]];for(var t=e.pop(),n=[],a=0;a<e.length;a++)n.push(e[a]),a<e.length-1&&n.push([", ",6]);return n.push([1==e.length?" and ":", and ",6]),n.push(t),n}(e.killers.map((function(e){return Ur.showNames?""!=e.name?[e.name,e.nameColor,!1]:[`an unnamed ${e.className}`,e.nameColor,!1]:[`a${ax(e.className)?"n":""} ${e.className}`,e.nameColor,!1]})));a.unshift(["you were killed by ",6]);var r="",o=function(e,t){var n,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return xb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xb(e,t):void 0}}(e))){a&&(e=a);var r=0;function s(){}return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw n}}}}((a=Uy(a)).sections);try{for(o.s();!(t=o.n()).done;){var i=t.value;r+=`<span style="color: ${wm(0,i.color,0,0)}">${rx(i.text)}</span>`}}catch(e){o.e(e)}finally{o.f()}0==Mw?($b.innerHTML=r,Gb.innerHTML=`\n\t\t\t\tLevel ${e.level} ${rx(_f.className)}\n\t\t\t\t<br />\n\t\t\t\t<br />\n\t\t\t\tTime Played: ${e.timeAlive}\n\t\t\t\t<br />\n\t\t\t\tScore: ${gx(e.score)}\n\t\t\t\t<br />\n\t\t\t\tKills: ${e.kills}`,Mw=1,document.getElementById("continue-button").onclick=function(){Zw()},rl(),fm(),Xb.classList.remove("hide"),qb.classList.remove("hide"),pw.classList.remove("hide"),yw.classList.remove("hidden")):Mw=2,hb(),fb()}function cx(e){e.keyCode==Jr.enter?Zw():e.keyCode==Jr.openCommand&&0==Mw&&Mb!==document.activeElement&&Ur.showChat&&Gf&&!Tp?(Mb.value="",Mb.focus(),al(),qs(),Vs(),Ub=-1):e.keyCode==Jr.escape&&0==Mw&&(Tp&&(Op(),Bp()),gp&&vp()),Mb==document.activeElement&&(e.keyCode==Jr.escape?Mb.blur():e.keyCode==Jr.previousChatMessage?(Ub<0?((Fb=[].concat(jb)).push(Mb.value),0!=(Ub=Fb.length-1)&&Ub--):0!=Ub&&Ub--,Ub<0||(Mb.value=Fb[Ub])):e.keyCode==Jr.nextChatMessage&&-1!=Ub&&Ub<Fb.length-1&&(Ub++,Mb.value=Fb[Ub]))}function ux(e){Uw||=document.getElementById("server-select"),Ww||=document.getElementById("server-select-dropdown-wrapper"),e?(Ww.classList.remove("hidden"),Uw.classList.add("high")):(Ww.classList.add("hidden"),Uw.classList.remove("high"))}function fx(e){var t=zb&&Ur.showQuickChatButton;if(Tb.classList.toggle("hidden",!t),Sb&&Mb&&(Sb.style.right=10/e+"px",Sb.style.top=250/e+"px",Mb.style.borderRadius=5/e+"px",Mb.style.padding=3/e+"px",Mb.style.fontSize=18/e+"px",Mb.style.width=(220-(t?43:0))/e+"px",Mb.style.height=33/e+"px",t)){var n=3/e;Tb.style.width=33/e+"px",Tb.style.height=33/e+"px",Tb.style.borderRadius=5/e+"px",Tb.style.marginLeft=10/e+"px",Tb.style.padding=n+"px",_b.style.width=33/e-2*n+"px",_b.style.height=33/e-2*n+"px"}}function hx(e,t){localStorage.setItem(e,t)}function mx(e){var t,n=localStorage.getItem(e);if(null==n){var a=function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}(e);null!=a&&(hx(e,n=a),t=e,document.cookie=t+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;")}return n}function px(e){localStorage.removeItem(e)}function gx(e){var t=Math.sign(e),n=Math.abs(e);if(Number.isNaN(e)||null==e)return"???";if(!Number.isFinite(n))return(-1==t?"-":"")+"";if(n<1e3)return Math.round(n*t).toString();if(Ur.useScientificNotation)return(-1==t?"-":"")+n.toExponential(2);for(var a=0;n>999;)a++,n/=1e3;return(-1==t?"-":"")+(n=ur(n,n<10?2:n<100?1:0)).toString()+Be.f[Math.min(a-1,Be.f.length-1)]}window.onhashchange=function(){if(window.location.hash!=Fw){Fw=window.location.hash;var e=window.location.hash;if(2==Mw){if(e.startsWith("#profile")){var t=e.split("/");if(t.length>1){var n=+t[1];if(!isNaN(n))return mc(n),void lx(e)}}switch("#changelog"==e?Kw():Jw&&Qw(),"#settings"==e?Yr():Hr&&Xr(),"#submit-feedback"==e?ex(2):"#report-bug"==e?ex(1):0!=Wb&&ex(0),"#log-in"==e?ju():Ru&&Uu(),"#sign-up"==e?Fu():Nu&&Hu(),"#achievements"==e?nd():td&&ad(),lx(e),e){case"#changelog":case"#settings":case"#submit-feedback":case"#report-bug":case"#log-in":case"#sign-up":case"#achievements":break;default:sx()}}else if(3==Mw)if(e.startsWith("#profile")){var a=e.split("/");if(a.length>1){var r=+a[1];if(!isNaN(r))return mc(r),void lx(e)}gc()}else gc();else ix(),sx()}},window.onhashchange()}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,a),o.exports}a.d=(e,t)=>{for(var n in t)if(a.o(t,n)&&!a.o(e,n)){let a=function(){return r()},r=t[n];Object.defineProperty(e,n,{enumerable:!0,get:a,set:function(e){r=function(){return e}}})}},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a(666),a(93)}();